(window.webpackJsonp=window.webpackJsonp||[]).push([[257],{"3OWR":function(e,t,n){var i=n("MrPd"),r=n("juv8"),o=n("LsHQ"),s=n("MMmD"),a=n("6sVZ"),u=n("7GkX"),c=Object.prototype.hasOwnProperty,d=o((function(e,t){if(a(t)||s(t))r(t,u(t),e);else for(var n in t)c.call(t,n)&&i(e,n,t[n])}));e.exports=d},LsHQ:function(e,t,n){var i=n("EA7m"),r=n("mv/X");e.exports=function(e){return i((function(t,n){var i=-1,o=n.length,s=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(s=e.length>3&&"function"==typeof s?(o--,s):void 0,a&&r(n[0],n[1],a)&&(s=o<3?void 0:s,o=1),t=Object(t);++i<o;){var u=n[i];u&&e(t,u,i,s)}return t}))}},Xdxp:function(e,t,n){var i=n("g4R6"),r=n("zoYe"),o=n("Sxd8"),s=n("dt0z");e.exports=function(e,t,n){return e=s(e),n=null==n?0:i(o(n),0,e.length),t=r(t),e.slice(n,n+t.length)==t}},"mv/X":function(e,t,n){var i=n("ljhN"),r=n("MMmD"),o=n("wJg7"),s=n("GoyQ");e.exports=function(e,t,n){if(!s(n))return!1;var a=typeof t;return!!("number"==a?r(n)&&o(t,n.length):"string"==a&&t in n)&&i(n[t],e)}},ptru:function(e,t,n){var i;i=function(){var e=!0;function t(t){function n(e){var n=t.match(e);return n&&n.length>1&&n[1]||""}function i(e){var n=t.match(e);return n&&n.length>1&&n[2]||""}var r,s=n(/(ipod|iphone|ipad)/i).toLowerCase(),a=!/like android/i.test(t)&&/android/i.test(t),u=/nexus\s*[0-6]\s*/i.test(t),c=!u&&/nexus\s*[0-9]+/i.test(t),d=/CrOS/.test(t),p=/silk/i.test(t),l=/sailfish/i.test(t),h=/tizen/i.test(t),f=/(web|hpw)(o|0)s/i.test(t),m=/windows phone/i.test(t),y=(/SamsungBrowser/i.test(t),!m&&/windows/i.test(t)),v=!s&&!p&&/macintosh/i.test(t),E=!a&&!l&&!h&&!f&&/linux/i.test(t),g=i(/edg([ea]|ios)\/(\d+(\.\d+)?)/i),S=n(/version\/(\d+(\.\d+)?)/i),b=/tablet/i.test(t)&&!/tablet pc/i.test(t),k=!b&&/[^-]mobi/i.test(t),T=/xbox/i.test(t);/opera/i.test(t)?r={name:"Opera",opera:e,version:S||n(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr\/|opios/i.test(t)?r={name:"Opera",opera:e,version:n(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||S}:/SamsungBrowser/i.test(t)?r={name:"Samsung Internet for Android",samsungBrowser:e,version:S||n(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/Whale/i.test(t)?r={name:"NAVER Whale browser",whale:e,version:n(/(?:whale)[\s\/](\d+(?:\.\d+)+)/i)}:/MZBrowser/i.test(t)?r={name:"MZ Browser",mzbrowser:e,version:n(/(?:MZBrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/coast/i.test(t)?r={name:"Opera Coast",coast:e,version:S||n(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/focus/i.test(t)?r={name:"Focus",focus:e,version:n(/(?:focus)[\s\/](\d+(?:\.\d+)+)/i)}:/yabrowser/i.test(t)?r={name:"Yandex Browser",yandexbrowser:e,version:S||n(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(t)?r={name:"UC Browser",ucbrowser:e,version:n(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(t)?r={name:"Maxthon",maxthon:e,version:n(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(t)?r={name:"Epiphany",epiphany:e,version:n(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(t)?r={name:"Puffin",puffin:e,version:n(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(t)?r={name:"Sleipnir",sleipnir:e,version:n(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(t)?r={name:"K-Meleon",kMeleon:e,version:n(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:m?(r={name:"Windows Phone",osname:"Windows Phone",windowsphone:e},g?(r.msedge=e,r.version=g):(r.msie=e,r.version=n(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(t)?r={name:"Internet Explorer",msie:e,version:n(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:d?r={name:"Chrome",osname:"Chrome OS",chromeos:e,chromeBook:e,chrome:e,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/edg([ea]|ios)/i.test(t)?r={name:"Microsoft Edge",msedge:e,version:g}:/vivaldi/i.test(t)?r={name:"Vivaldi",vivaldi:e,version:n(/vivaldi\/(\d+(\.\d+)?)/i)||S}:l?r={name:"Sailfish",osname:"Sailfish OS",sailfish:e,version:n(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(t)?r={name:"SeaMonkey",seamonkey:e,version:n(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(t)?(r={name:"Firefox",firefox:e,version:n(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(t)&&(r.firefoxos=e,r.osname="Firefox OS")):p?r={name:"Amazon Silk",silk:e,version:n(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(t)?r={name:"PhantomJS",phantom:e,version:n(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(t)?r={name:"SlimerJS",slimer:e,version:n(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(t)||/rim\stablet/i.test(t)?r={name:"BlackBerry",osname:"BlackBerry OS",blackberry:e,version:S||n(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:f?(r={name:"WebOS",osname:"WebOS",webos:e,version:S||n(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(t)&&(r.touchpad=e)):/bada/i.test(t)?r={name:"Bada",osname:"Bada",bada:e,version:n(/dolfin\/(\d+(\.\d+)?)/i)}:h?r={name:"Tizen",osname:"Tizen",tizen:e,version:n(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||S}:/qupzilla/i.test(t)?r={name:"QupZilla",qupzilla:e,version:n(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||S}:/chromium/i.test(t)?r={name:"Chromium",chromium:e,version:n(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||S}:/chrome|crios|crmo/i.test(t)?r={name:"Chrome",chrome:e,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:a?r={name:"Android",version:S}:/safari|applewebkit/i.test(t)?(r={name:"Safari",safari:e},S&&(r.version=S)):s?(r={name:"iphone"==s?"iPhone":"ipad"==s?"iPad":"iPod"},S&&(r.version=S)):r=/googlebot/i.test(t)?{name:"Googlebot",googlebot:e,version:n(/googlebot\/(\d+(\.\d+))/i)||S}:{name:n(/^(.*)\/(.*) /),version:i(/^(.*)\/(.*) /)},!r.msedge&&/(apple)?webkit/i.test(t)?(/(apple)?webkit\/537\.36/i.test(t)?(r.name=r.name||"Blink",r.blink=e):(r.name=r.name||"Webkit",r.webkit=e),!r.version&&S&&(r.version=S)):!r.opera&&/gecko\//i.test(t)&&(r.name=r.name||"Gecko",r.gecko=e,r.version=r.version||n(/gecko\/(\d+(\.\d+)?)/i)),r.windowsphone||!a&&!r.silk?!r.windowsphone&&s?(r[s]=e,r.ios=e,r.osname="iOS"):v?(r.mac=e,r.osname="macOS"):T?(r.xbox=e,r.osname="Xbox"):y?(r.windows=e,r.osname="Windows"):E&&(r.linux=e,r.osname="Linux"):(r.android=e,r.osname="Android");var P="";r.windows?P=function(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}(n(/Windows ((NT|XP)( \d\d?.\d)?)/i)):r.windowsphone?P=n(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):r.mac?P=(P=n(/Mac OS X (\d+([_\.\s]\d+)*)/i)).replace(/[_\s]/g,"."):s?P=(P=n(/os (\d+([_\s]\d+)*) like mac os x/i)).replace(/[_\s]/g,"."):a?P=n(/android[ \/-](\d+(\.\d+)*)/i):r.webos?P=n(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):r.blackberry?P=n(/rim\stablet\sos\s(\d+(\.\d+)*)/i):r.bada?P=n(/bada\/(\d+(\.\d+)*)/i):r.tizen&&(P=n(/tizen[\/\s](\d+(\.\d+)*)/i)),P&&(r.osversion=P);var R=!r.windows&&P.split(".")[0];return b||c||"ipad"==s||a&&(3==R||R>=4&&!k)||r.silk?r.tablet=e:(k||"iphone"==s||"ipod"==s||a||u||r.blackberry||r.webos||r.bada)&&(r.mobile=e),r.msedge||r.msie&&r.version>=10||r.yandexbrowser&&r.version>=15||r.vivaldi&&r.version>=1||r.chrome&&r.version>=20||r.samsungBrowser&&r.version>=4||r.whale&&1===o([r.version,"1.0"])||r.mzbrowser&&1===o([r.version,"6.0"])||r.focus&&1===o([r.version,"1.0"])||r.firefox&&r.version>=20||r.safari&&r.version>=6||r.opera&&r.version>=10||r.ios&&r.osversion&&r.osversion.split(".")[0]>=6||r.blackberry&&r.version>=10.1||r.chromium&&r.version>=20?r.a=e:r.msie&&r.version<10||r.chrome&&r.version<20||r.firefox&&r.version<20||r.safari&&r.version<6||r.opera&&r.version<10||r.ios&&r.osversion&&r.osversion.split(".")[0]<6||r.chromium&&r.version<20?r.c=e:r.x=e,r}var n=t("undefined"!=typeof navigator&&navigator.userAgent||"");function i(e){return e.split(".").length}function r(e,t){var n,i=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n++)i.push(t(e[n]));return i}function o(e){for(var t=Math.max(i(e[0]),i(e[1])),n=r(e,(function(e){var n=t-i(e);return r((e+=new Array(n+1).join(".0")).split("."),(function(e){return new Array(20-e.length).join("0")+e})).reverse()}));--t>=0;){if(n[0][t]>n[1][t])return 1;if(n[0][t]!==n[1][t])return-1;if(0===t)return 0}}function s(e,i,r){var s=n;"string"==typeof i&&(r=i,i=void 0),void 0===i&&(i=!1),r&&(s=t(r));var a=""+s.version;for(var u in e)if(e.hasOwnProperty(u)&&s[u]){if("string"!=typeof e[u])throw new Error("Browser version in the minVersion map should be a string: "+u+": "+String(e));return o([a,e[u]])<0}return i}return n.test=function(e){for(var t=0;t<e.length;++t){var i=e[t];if("string"==typeof i&&i in n)return!0}return!1},n.isUnsupportedBrowser=s,n.compareVersions=o,n.check=function(e,t,n){return!s(e,t,n)},n._detect=t,n.detect=t,n},e.exports?e.exports=i():n("B9Yq")("bowser",i)},qxnY:function(e,t,n){(function(t){e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n.w={},n(n.s=42)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MEDIA_ERR_NETWORK=2,t.MEDIA_ERR_SRC_NOT_SUPPORTED=4,t.MEDIA_ERR_DECODE=3,t.GENERIC_ERROR=1,t.ERROR_BUFFERING_TIMEOUT=101},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2);function r(e,t){for(var n=e.buffered,i=e.currentTime,r=0;r<n.length;r++){var o=n.start(r),s=n.end(r);if(!(s<=i)){if(o-t>i)break;for(var a=r+1;a<n.length&&!(n.start(a)-s>t);a++)s=n.end(a);for(var u=r-1;u>=0&&!(o-n.end(u)>t);u--)o=n.start(u);return{start:Math.min(o,i),end:s}}}return{start:i,end:i}}t.decodedFrames=function(e){return"number"==typeof e.webkitDecodedFrameCount?e.webkitDecodedFrameCount:"function"==typeof e.getVideoPlaybackQuality?e.getVideoPlaybackQuality().totalVideoFrames:"number"==typeof e.mozDecodedFrames?e.mozDecodedFrames:-1},t.droppedFrames=function(e){return"number"==typeof e.webkitDroppedFrameCount?e.webkitDroppedFrameCount:"function"==typeof e.getVideoPlaybackQuality?e.getVideoPlaybackQuality().droppedVideoFrames:-1},t.bufferedRange=r,t.willBuffer=function(e,t){var n=r(e,t).end,i=e.currentTime,o=n-i;return!(e.ended||e.duration-i<t)&&o<t},t.getNextPlayablePosition=function(e,t){void 0===t&&(t=i.MIN_PLAYABLE_BUFFER);var n=r(e,t).end-e.currentTime>t,o=e.buffered;if(o.length>1||!n)for(var s=e.currentTime,a=0;a<o.length;a++){var u=o.start(a),c=o.end(a);if(s<u&&c-u>t)return u+t}return n?e.currentTime+t:e.currentTime},t.subscribe=function(e,t,n){return e.addEventListener(t,n),function(){e.removeEventListener(t,n)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MIN_PLAYABLE_BUFFER=.1,t.FINITE_LIVE_DURATION=1<<30,t.BUFFERING_TIMEOUT=12e4,t.HEARTBEAT_INTERVAL=2e3},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),r={keySystem:"org.w3.clearkey",uuid:"1077efec-c0b2-4d02-ace3-3c1e52e2fb4b"},o={keySystem:"com.apple.fps.2_0",certUrl:"https://fp-keyos-twitch.licensekeyserver.com/cert/a17fd33d3843df9b17679ccf50a419b2.der",licenseUrl:"https://fp-keyos-twitch.licensekeyserver.com/getkey",uuid:"94CE86FB-07FF-4F43-ADB8-93D2FA968CA2"},s={keySystem:"com.microsoft.playready",licenseUrl:"https://pr-keyos-twitch.licensekeyserver.com/core/rightsmanager.asmx",uuid:"9a04f079-9840-4286-ab92-e65be0885f95"},a={keySystem:"com.widevine.alpha",licenseUrl:"https://wv-keyos-twitch.licensekeyserver.com",uuid:"edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};t.KEY_SYSTEMS={CLEARKEY:r,FAIRPLAY:o,PLAYREADY:s,WIDEVINE:a},t.KEY_SYSTEMS_BY_STRING={"com.widevine.alpha":a,"com.microsoft.playready":s,"com.apple.fps.2_0":o,"org.w3.clearkey":r},t.AUTH_XML_URL="https://usher.ttvnw.net/api/authxml/";var u=i.MEDIA_ERR_NETWORK,c=i.MEDIA_ERR_SRC_NOT_SUPPORTED,d={value:c,message:"Your browser does not support any DRM Content Decryption Modules"},p={value:c,message:"There was an issue while updating DRM License"},l={value:u,message:"Error while requesting DRM license"},h={value:c,message:"Error creating key session"},f={value:c,message:"Encryption key not usable because of internal error in CDM"},m={value:c,message:"Unable to find valid CDM support on media"},y={value:u,message:"Request for AuthXML failed"},v={value:u,message:"Request for DRM certificate failed"};t.ERRORS={NO_CDM_SUPPORT:d,SESSION_UPDATE:p,LICENSE_REQUEST:l,KEY_SESSION_CREATION:h,KEY_SESSION_INTERNAL:f,NO_PSSH_FOUND:m,AUTH_XML_REQUEST:y,CERT_REQUEST:v}},function(e,t){e.exports=n("fiWp")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3);t.safeParseJSON=function(e){try{return JSON.parse(e)}catch(t){return console.error("Failed JSON parse:",e),{}}},t.objectAssign=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},t.getSupportedKeySystem=function(e){return"function"==typeof navigator.requestMediaKeySystemAccess?e.msie||e.msedge?i.KEY_SYSTEMS.PLAYREADY.uuid:i.KEY_SYSTEMS.WIDEVINE.uuid:""},t.defaultIsQualitySupported=function(e){return""===e.codecs||"undefined"==typeof MediaSource||MediaSource.isTypeSupported('video/mp4;codecs="'+e.codecs+'"')},t.filterQualities=function(e,t){var n=[],i=[];return e.forEach((function(e){t(e)?n.push(e):i.push(e)})),{supported:n,unsupported:i}},t.loadSettings=function(e){try{return n(28)("./"+e+".json")}catch(e){return{}}},t.getVisibilityPropNames=function(e){var t,n;return void 0!==e.hidden?(t="hidden",n="visibilitychange"):void 0!==e.msHidden?(t="msHidden",n="msvisibilitychange"):void 0!==e.webkitHidden&&(t="webkitHidden",n="webkitvisibilitychange"),{hidden:t,visibilityChange:n}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this.buffer=[],this.head=0,this.tail=0}return e.prototype.push=function(e){this.tail===this.buffer.length?this.buffer.push(e):this.buffer[this.tail]=e,this.tail++},e.prototype.pop=function(){var e=this.buffer[this.head];return this.buffer[this.head]=null,this.head++,this.empty()&&(this.head=0,this.tail=0),e},e.prototype.size=function(){return this.tail-this.head},e.prototype.empty=function(){return this.head>=this.tail},e}();t.Queue=i},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(31));t.default=self.Promise||r.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.IDLE="Idle",e.READY="Ready",e.BUFFERING="Buffering",e.PLAYING="Playing",e.ENDED="Ended"}(t.PlayerState||(t.PlayerState={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.AVAILABLE="RemotePlayerAvailable",e.UNAVAILABLE="RemotePlayerUnavailable",e.SESSION_STARTED="RemotePlayerSessionStarted",e.SESSION_ENDED="RemotePlayerSessionEnded"}(t.RemotePlayerEvent||(t.RemotePlayerEvent={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.PLAYER_LOADED_IN_WORKER="player_loaded_in_worker",e.HLS_MASTER_PLAYLIST_REQUEST="master_manifest_request",e.HLS_MASTER_PLAYLIST_READY="master_manifest_ready",e.HLS_MEDIA_PLAYLIST_REQUEST="variant_request",e.HLS_MEDIA_PLAYLIST_READY="variant_ready",e.MIN_BUFFER_READY="min_buffer_ready",e.VIDEO_ELEMENT_PLAY="video_element_play"}(t.ProfileEvent||(t.ProfileEvent={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.INITIALIZED="PlayerInitialized",e.QUALITY_CHANGED="PlayerQualityChanged",e.AUTO_SWITCH_QUALITY_CHANGED="PlayerAutoSwitchQualityChanged",e.DURATION_CHANGED="PlayerDurationChanged",e.VOLUME_CHANGED="PlayerVolumeChanged",e.MUTED_CHANGED="PlayerMutedChanged",e.PLAYBACK_RATE_CHANGED="PlayerPlaybackRateChanged",e.REBUFFERING="PlayerRebuffering",e.AUDIO_BLOCKED="PlayerAudioBlocked",e.PLAYBACK_BLOCKED="PlayerPlaybackBlocked",e.ERROR="PlayerError",e.RECOVERABLE_ERROR="PlayerRecoverableError",e.TRACKING="PlayerTracking",e.TIME_UPDATE="PlayerTimeUpdate",e.BUFFER_UPDATE="PlayerBufferUpdate",e.SEEK_COMPLETED="PlayerSeekCompleted",e.PROFILE="PlayerProfile",e.SESSION_DATA="PlayerSessionData",e.WORKER_ERROR="PlayerWorkerError",e.METADATA="PlayerMetadata"}(t.PlayerEvent||(t.PlayerEvent={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.ID3="MetaID3",e.CAPTION="MetaCaption"}(t.MetadataEvent||(t.MetadataEvent={}))},function(e,t,n){"use strict";var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var r=/^(\d+)\.(\d+)\.(\d+)[+|-]?(.*)?$/,o=/^(\d+)\.(\d+)[+|-]?(.*)?$/,s=/^(\d+)$/,a=i(n(40))._detect(navigator.userAgent),u=function(e){var t=r.exec(e)||o.exec(e)||s.exec(e)||[];return{major:parseInt(t[1],10)||0,minor:parseInt(t[2],10)||0,patch:parseInt(t[3],10)||0}}(String(a.version));t.browser={chrome:a.chrome,chromecast:navigator.userAgent.toLowerCase().indexOf("crkey")>-1,domain:window.location.host.split(".").slice(-2).join("."),family:a.name.toLowerCase(),firefox:a.firefox,host:window.location.host,major:u.major,minor:u.minor,msedge:a.msedge,msie:a.msie,name:navigator.appVersion,opera:a.opera,osName:a.osname,osVersion:String(a.osversion),patch:u.patch,safari:a.safari,url:window.location.href,userAgent:navigator.userAgent}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAccessToken=function(e){var t=e.streamId,n=e.streamType,i=e.clientId,r=e.oAuthToken,o=["client_id="+i,"player_type="+e.playerType,"player_backend="+e.playerBackend,"platform="+e.platform];r&&o.push("oauth_token="+r);var s="https://api.twitch.tv/api/"+n+"s/"+t+"/access_token?"+o.join("&");return new Promise((function(e,t){var n=new XMLHttpRequest;n.open("GET",s),n.onerror=t,n.onload=function(){if(n.status>=200&&n.status<300)try{e(JSON.parse(n.responseText))}catch(e){t(e)}else t(new Error(n.responseText))},n.send()}))},t.createMasterPlaylistUrl=function(e,t){var n,i=e.streamId,r=e.streamType,o=e.playerType,s=e.playerBackend,a=t.token,u=t.sig,c=["playlist_include_framerate=true","allow_source=true","player_type="+o,"player_backend="+s];return"vod"===r?(n="vod",c.push("nauth="+encodeURIComponent(a),"nauthsig="+u)):(n="api/channel/hls",c.push("token="+encodeURIComponent(a),"sig="+u)),"https://usher.ttvnw.net/"+n+"/"+i+".m3u8?"+c.join("&")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.GENERIC="Error",e.NOT_SUPPORTED="ErrorNotSupported",e.NO_SOURCE="ErrorNoSource",e.INVALID_DATA="ErrorInvalidData",e.INVALID_STATE="ErrorInvalidState",e.INVALID_PARAMETER="ErrorInvalidParameter",e.TIMEOUT="ErrorTimeout",e.INVALID_OUTPUT="ErrorInvalidOutput",e.INTERNAL="ErrorInternal",e.NETWORK="ErrorNetwork",e.NETWORK_IO="ErrorNetworkIO",e.AUTHORIZATION="ErrorAuthorization",e.NOT_AVAILABLE="ErrorNotAvailable"}(t.ErrorType||(t.ErrorType={})),function(e){e[e.GEOBLOCKED=1]="GEOBLOCKED",e[e.UNSUPPORTED_DEVICE=2]="UNSUPPORTED_DEVICE",e[e.ANONYMIZER_BLOCKED=3]="ANONYMIZER_BLOCKED",e[e.CELLULAR_NETWORK_PROHIBITED=4]="CELLULAR_NETWORK_PROHIBITED",e[e.UNAUTHORIZATION_ENTITLEMENTS=5]="UNAUTHORIZATION_ENTITLEMENTS",e[e.VOD_RESTRICTED=6]="VOD_RESTRICTED"}(t.AuthorizationError||(t.AuthorizationError={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.UNKNOWN="Unspecified",e.FILE="File",e.PLAYLIST="Playlist",e.SEGMENT="Segment",e.SOURCE="Source",e.DECODER="Decode",e.RENDERER="Render"}(t.ErrorSource||(t.ErrorSource={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),r=n(6),o=function(){function e(e,t){var n=this;this.workerPort={postMessage:this.postMessageFromWorker.bind(this),onmessage:function(){}},this.emitter=new i.EventEmitter,this.messageQueue=new r.Queue,this.terminated=!1,this.loadScript(e,(function(e){return n.applyWorkerEnv(e,t)}))}return e.prototype.postMessage=function(e){this.messageQueue?this.messageQueue.push(e):this.postMessageToWorker(e)},e.prototype.terminate=function(){this.terminated=!1},e.prototype.addEventListener=function(e,t){this.emitter.on(e,t)},e.prototype.removeEventListener=function(e,t){this.emitter.off(e,t)},e.prototype.loadScript=function(e,t){var n=this,i=new XMLHttpRequest;i.open("GET",e),i.addEventListener("load",(function(){i.status>=200&&i.status<400?t(i.response):n.emitter.emit("error",new Error(i.statusText))})),i.addEventListener("error",(function(e){n.emitter.emit("error",e)})),i.send()},e.prototype.applyWorkerEnv=function(e,t){try{Function("self","messageHandler",e)(window,this.workerPort)}catch(e){return void this.emitter.emit("error",e)}for(;!this.messageQueue.empty();)this.postMessageToWorker(this.messageQueue.pop());this.messageQueue=null},e.prototype.postMessageFromWorker=function(e){var t=this;setTimeout((function(){t.emitter.emit("message",{data:e})}),0)},e.prototype.postMessageToWorker=function(e){var t=this;setTimeout((function(){t.workerPort.onmessage({data:e})}),0)},e}();t.WorkerShim=o},function(e,t){e.exports=n("Xdxp")},function(e,t){e.exports=n("3OWR")},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(19)),o=i(n(18)),s=function(){function e(e){var t=e.isIPv4,n=e.onResultsReady;this.trackingProperties={},this.isIPv4=t,this.onResultsReady=n;try{this.createPeerConnection()}catch(e){this.sendSpadeEvent()}}return e.prototype.createPeerConnection=function(){var e=this;this.peerConnection=new RTCPeerConnection,this.peerConnection.onicecandidate=this.onIceCandidate.bind(this),this.peerConnection.onnegotiationneeded=function(){e.peerConnection.createOffer().then((function(t){e.peerConnection.setLocalDescription(t)}))},this.dataChannel=this.peerConnection.createDataChannel("datachannel")},e.prototype.onIceCandidate=function(e){var t=this;if(null===e.candidate){var n=btoa(JSON.stringify(this.peerConnection.localDescription));this.makeHTTPRequest(n).then((function(e){t.recordTrackingProperty("webrtc_attempt_id",e.webrtc_attempt_id);var n=e.offer_base64;try{var i=JSON.parse(atob(n));t.checkUDP(i)}catch(e){t.sendSpadeEvent()}}),this.sendSpadeEvent.bind(this))}},e.prototype.makeHTTPRequest=function(e){var t=this;return this.recordTrackingProperty("webrtc_http_start",Date.now()),new Promise((function(n,i){var r=t.isIPv4?"https://ipv4.webrtc-test.ttvnw.net/data-channel-handshake":"https://ipv6.webrtc-test.ttvnw.net/data-channel-handshake";fetch(r,{method:"POST",body:e,headers:{"Content-Type":"text/plain"}}).then((function(e){t.recordTrackingProperty("webrtc_http_success",Date.now()),n(e.json())})).catch((function(e){t.recordTrackingProperty("webrtc_http_error",Date.now()),i()})),window.setTimeout(i,1e4)}))},e.prototype.checkUDP=function(e){var t=this;this.recordTrackingProperty("webrtc_udp_start",Date.now()),new Promise((function(n,i){t.dataChannel.onopen=function(){t.recordTrackingProperty("webrtc_udp_success",Date.now())},t.dataChannel.onmessage=function(e){o.default(e.data),t.recordTrackingProperty("webrtc_message",Date.now()),n()},t.dataChannel.onerror=function(){t.recordTrackingProperty("webrtc_udp_error",Date.now()),i()},window.setTimeout(i,1e4),t.peerConnection.setRemoteDescription(e)})).then(this.sendSpadeEvent.bind(this),this.sendSpadeEvent.bind(this))},e.prototype.recordTrackingProperty=function(e,t){this.trackingProperties[e]=t},e.prototype.sendSpadeEvent=function(){var e=r.default({},{webrtc_v6:!this.isIPv4},this.trackingProperties);this.onResultsReady("webrtc_client_ping",e),this.destroy()},e.prototype.destroy=function(){this.trackingProperties={},this.dataChannel&&this.dataChannel.close(),this.peerConnection&&this.peerConnection.close()},e}();t.WebRTCConnectivityExperiment=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(20),r=function(){function e(e){var t=e.isIPv4,n=e.onResultsReady;this.isIPv4=t,this.onResultsReady=n,this.initialDelay=Math.round(1e3*Math.random()),this.timeoutId=window.setTimeout(this.runExperiment.bind(this),this.initialDelay)}return e.prototype.runExperiment=function(){this.clearExperimentModule(),this.experiment=new i.WebRTCConnectivityExperiment({isIPv4:this.isIPv4,onResultsReady:this.onResultsReady}),this.timeoutId=window.setTimeout(this.runExperiment.bind(this),6e4)},e.prototype.clearExperimentModule=function(){this.experiment&&this.experiment.destroy(),this.experiment=null},e.prototype.destroy=function(){window.clearTimeout(this.timeoutId),this.clearExperimentModule()},e}();t.WebRTCConnectivityExperimentManager=r},function(e,t,n){"use strict";var i=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i};Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),o=function(){function e(){this.emitter=new r.EventEmitter}return e.prototype.on=function(e,t){this.emitter.on(String(e),t)},e.prototype.removeListener=function(e,t){this.emitter.removeListener(String(e),t)},e.prototype.emit=function(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];(t=this.emitter).emit.apply(t,i([String(e)],n))},e}();t.TypedEventEmitter=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1);t.VolumeObserver=function(e,t){var n=e.muted;return{unsub:i.subscribe(e,"volumechange",(function(){var i=e.muted;n!==i?(n=i,t.onSinkMutedChanged(i)):t.onSinkVolumeChanged(e.volume)}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){this.video=e,this.tracks=[e.addTextTrack("metadata")]}return e.prototype.addCue=function(e){for(var t,n=0,i=this.tracks;n<i.length;n++){var r=i[n],o=r.cues;if(!o.length||o[o.length-1].startTime<e.startTime&&o[o.length-1].endTime!==e.endTime){t=r;break}}t||(t=this.video.addTextTrack("metadata"),this.tracks.push(t));try{t.addCue(e)}catch(t){var s=this.video.addTextTrack("metadata");this.tracks.push(s);try{s.addCue(e)}catch(t){console.warn("Player could not add cue at start ",e.startTime,"end ",e.endTime)}}},e.prototype.remove=function(e,t){this.tracks.forEach((function(n){for(var i=n.cues,r=i.length-1;r>=0;r--){var o=i[r];if(o.startTime<e)break;o.endTime<t&&n.removeCue(o)}}))},e}();t.SafeTextTrack=i},function(e){e.exports={lowlatency:{liveSpeedUpRate:1.05},buffercontrol:{liveSpeedUpRate:1.05}}},function(e){e.exports={abr:{estimator:"fastslow"}}},function(e){e.exports={abr:{enableLowLatency:!0}}},function(e,t,n){var i={"./abrall.json":27,"./abrfs.json":26,"./speed5.json":25};function r(e){var t=o(e);return n(t)}function o(e){var t=i[e];if(!(t+1)){var n=new Error('Cannot find module "'+e+'".');throw n.code="MODULE_NOT_FOUND",n}return t}r.keys=function(){return Object.keys(i)},r.resolve=o,e.exports=r,r.id=28},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=n(0),o=n(5),s=n(1),a=function(){function e(e,t){var n=this;this.listener=e,this.videoElement=t,this.unsubList=[],this.fps=0,this.intervalId=-1,this.paused=!0,this.attemptingToPlay=!1,this.hasReloadedOnDecodeError=!1;var i=o.getVisibilityPropNames(document).visibilityChange;this.unsubList=[s.subscribe(this.videoElement,"waiting",(function(){return n.onVideoWaiting()})),s.subscribe(this.videoElement,"timeupdate",(function(){return n.onVideoTimeUpdate()})),s.subscribe(this.videoElement,"durationchange",(function(){return n.onVideoDurationChange()})),s.subscribe(this.videoElement,"error",(function(){return n.onVideoError()})),s.subscribe(this.videoElement,"play",(function(){return n.onVideoPlay()})),s.subscribe(this.videoElement,"pause",(function(){return n.onVideoPause()})),s.subscribe(this.videoElement,"ended",(function(){return n.onVideoEnded()})),s.subscribe(this.videoElement,"playing",(function(){return n.onVideoPlaying()})),s.subscribe(document,i,(function(){return n.onVisibilityChange()}))]}return e.prototype.configure=function(e){var t=e.path;this.hasReloadedOnDecodeError=!1,this.videoElement.src=t},e.prototype.play=function(){var e=this,t=this.videoElement.buffered;if(t.length>0){var n=t.start(t.length-1),i=t.end(t.length-1);(this.videoElement.duration===1/0&&i<this.videoElement.currentTime||-1===this.videoElement.src.indexOf(".mp4")&&this.videoElement.currentTime<n)&&(console.warn("Moving to buffered region"),this.videoElement.currentTime=n)}this.paused=!1,this.attemptingToPlay=!0,Promise.resolve(this.videoElement.play()).then((function(){e.attemptingToPlay=!1})).catch((function(){e.attemptingToPlay=!1,e.checkStopped(!0)})),this.listener.onSinkPlay()},e.prototype.pause=function(){this.paused=!0,this.videoElement.pause(),clearTimeout(this.intervalId)},e.prototype.seekTo=function(e){this.videoElement.currentTime=e},e.prototype.setPlaybackRate=function(e){this.videoElement.playbackRate=e},e.prototype.setVolume=function(e){this.videoElement.volume=e},e.prototype.getVolume=function(){return this.videoElement.volume},e.prototype.buffered=function(){return s.bufferedRange(this.videoElement,i.MIN_PLAYABLE_BUFFER)},e.prototype.decodedFrames=function(){return s.decodedFrames(this.videoElement)},e.prototype.droppedFrames=function(){return s.droppedFrames(this.videoElement)},e.prototype.framerate=function(){return this.fps},e.prototype.delete=function(){this.unsubList.forEach((function(e){return e()})),this.videoElement.src="",this.videoElement.load()},e.prototype.isMuted=function(){return this.videoElement.muted},e.prototype.setMuted=function(e){this.videoElement.muted=e},e.prototype.getDisplayWidth=function(){return this.videoElement.clientWidth},e.prototype.getDisplayHeight=function(){return this.videoElement.clientHeight},e.prototype.getPlaybackRate=function(){return this.videoElement.playbackRate},e.prototype.getCurrentTime=function(){return this.videoElement.currentTime},e.prototype.bufferDuration=function(){var e=this.buffered(),t=e.start;return e.end-Math.max(t,this.videoElement.currentTime)},e.prototype.enqueue=function(){},e.prototype.endOfStream=function(){},e.prototype.setTimestampOffset=function(){},e.prototype.addCue=function(e,t,n){},e.prototype.remove=function(){},e.prototype.onSourceDurationChanged=function(e){},e.prototype.captureGesture=function(){Promise.resolve(this.videoElement.play()).catch((function(){})),this.videoElement.pause()},e.prototype.onVideoWaiting=function(){var e=this;if(s.bufferedRange(this.videoElement,i.MIN_PLAYABLE_BUFFER).end-this.videoElement.currentTime<i.MIN_PLAYABLE_BUFFER){this.listener.onSinkIdle();var t=self.setTimeout((function(){e.listener.onSinkError({value:r.ERROR_BUFFERING_TIMEOUT,code:r.ERROR_BUFFERING_TIMEOUT,message:"Buffering timeout"})}),i.BUFFERING_TIMEOUT),n=s.subscribe(this.videoElement,"timeupdate",(function(){n(),clearTimeout(t)}))}var o=s.subscribe(this.videoElement,"timeupdate",(function(){4===e.videoElement.readyState&&(o(),e.onVideoPlaying())}))},e.prototype.onVideoTimeUpdate=function(){this.listener.onSinkTimeUpdate(),this.listener.onSinkVideoDisplaySizeChanged(this.videoElement.clientWidth*self.devicePixelRatio,this.videoElement.clientHeight*self.devicePixelRatio)},e.prototype.onVideoDurationChange=function(){this.listener.onSinkDurationChanged(this.videoElement.duration)},e.prototype.onVideoError=function(){var e=this.videoElement.error,t=this.videoElement.error,n=t.code,i=t.message,o=void 0===i?"":i;e.code!==r.MEDIA_ERR_DECODE||this.hasReloadedOnDecodeError?this.listener.onSinkError({value:n,code:n,message:o}):this.hasReloadedOnDecodeError||(this.hasReloadedOnDecodeError=!0,console.warn("Reload video element on MEDIA_ERR_DECODE 3"),this.videoElement.load())},e.prototype.onVideoPlay=function(){var e=this,t=this.videoElement.currentTime;clearTimeout(this.intervalId),this.intervalId=self.setTimeout((function(){return e.heartbeat(t)}),i.HEARTBEAT_INTERVAL)},e.prototype.onVideoPause=function(){clearTimeout(this.intervalId),this.attemptingToPlay||this.checkStopped(!1)},e.prototype.onVideoEnded=function(){this.listener.onSinkEnded()},e.prototype.onVideoPlaying=function(){this.listener.onSinkPlaying(this.paused),this.trackFPS(s.decodedFrames(this.videoElement),performance.now()),this.trackBufferUpdate(s.bufferedRange(this.videoElement,i.MIN_PLAYABLE_BUFFER).end)},e.prototype.onVisibilityChange=function(){var e=o.getVisibilityPropNames(document).hidden;document[e]&&(this.hasReloadedOnDecodeError=!1)},e.prototype.heartbeat=function(e){var t=this,n=this.videoElement.currentTime;if(n===e){if(s.willBuffer(this.videoElement,i.MIN_PLAYABLE_BUFFER))return void this.listener.onSinkIdle();var r=s.getNextPlayablePosition(this.videoElement,i.MIN_PLAYABLE_BUFFER);r!==n&&(console.warn("jumping "+(r-n)+"s gap"),this.videoElement.currentTime=r,n=this.videoElement.currentTime)}this.intervalId=self.setTimeout((function(){return t.heartbeat(n)}),i.HEARTBEAT_INTERVAL)},e.prototype.checkStopped=function(e){!this.videoElement.paused||this.videoElement.ended||this.videoElement.error||this.paused||this.listener.onSinkStop(e)},e.prototype.trackFPS=function(e,t){var n=this,i=s.decodedFrames(this.videoElement),r=performance.now();this.fps=(i-e)/(r-t)*1e3;var o=s.subscribe(this.videoElement,"timeupdate",(function(){o(),n.trackFPS(i,r)}))},e.prototype.trackBufferUpdate=function(e){var t=this,n=this.buffered().end;n!==e&&this.listener.onSinkBufferUpdate();var i=s.subscribe(this.videoElement,"timeupdate",(function(){i(),t.trackBufferUpdate(n)}))},e}();t.PassthroughSink=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),r=function(){function e(e,t){this.video=e,this.srcBuf=t,this.pending=new i.Queue,this.srcBuf.addEventListener("updateend",this.process.bind(this))}return e.prototype.appendBuffer=function(e){this.schedule((function(t){try{t.appendBuffer(e)}catch(e){if("QuotaExceededError"===e.name){var n=t.buffered,i=n.start(0),r=n.end(n.length-1),o=(i+r)/2;t.remove(o,r)}}}))},e.prototype.setTimestampOffset=function(e){this.schedule((function(t){t.timestampOffset=e}))},e.prototype.remove=function(e,t){this.schedule((function(n){var i=n.buffered;if(i.length){var r=Math.max(e,i.start(0)),o=Math.min(t,i.end(i.length-1));r<o&&n.remove(r,o)}}))},e.prototype.schedule=function(e){this.pending.empty()&&!this.updating()?e(this.srcBuf):(this.pending.push(e),this.process())},e.prototype.process=function(){for(;!this.pending.empty()&&!this.updating();)this.pending.pop()(this.srcBuf)},e.prototype.updating=function(){return!this.srcBuf||this.srcBuf.updating||null!==this.video.error},e}();t.SafeSourceBuffer=r},function(e,t){e.exports=n("WQBT")},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(0),s=i(n(7)),a=n(1),u=function(){function e(e,t){var n=this;this.playAttempt=!1,this.seeking=!1,this.video=e,this.listener=t,this.onDelete={},this.intervalId=0,this.idle=!0,this.paused=!0,this.lastPlayhead=0,this.lastBufferEnd=0,this.fps=0,this.lastDecodedFrames=0,this.lastTimeUpdate=performance.now(),this.idleTimeout=-1,this.addListener("play",(function(){return n.onVideoPlay()})),this.addListener("pause",(function(){return n.onVideoPause()})),this.addListener("timeupdate",(function(){return n.onVideoTimeUpdate()})),this.addListener("ended",(function(){return n.onVideoEnded()})),this.addListener("error",(function(){return n.onVideoError()})),this.addListener("playing",(function(){return n.onVideoPlaying()})),this.addListener("seeking",(function(){return n.onVideoSeeking()}))}return e.prototype.delete=function(){Object.values(this.onDelete).forEach((function(e){return e()})),clearInterval(this.intervalId)},e.prototype.play=function(){this.paused=!1;var e=this.video.buffered;if(e.length>0){var t=e.start(e.length-1);(e.end(e.length-1)<this.video.currentTime||this.video.currentTime<t)&&(console.warn("Moving to buffered region",t),this.seekTo(t))}this.playInternal(),this.listener.onSinkPlay()},e.prototype.pause=function(){this.paused=!0,this.video.pause()},e.prototype.endOfStream=function(){this.idle=!1,clearTimeout(this.idleTimeout),this.idleTimeout=-1},e.prototype.framerate=function(){return this.fps},e.prototype.seekTo=function(e){this.video.seekable.length&&e!==this.video.currentTime&&(this.seeking=!0,this.video.currentTime=e)},e.prototype.onVideoPlay=function(){var e=this;this.playAttempt?(this.lastPlayhead=this.video.currentTime,clearInterval(this.intervalId),this.intervalId=self.setInterval((function(){return e.heartbeat()}),r.HEARTBEAT_INTERVAL)):(this.pause(),this.listener.play()),this.playAttempt=!1},e.prototype.onVideoPause=function(){this.checkStopped(!1),clearInterval(this.intervalId)},e.prototype.onVideoTimeUpdate=function(){clearTimeout(this.idleTimeout),this.idleTimeout=-1;var e=a.decodedFrames(this.video),t=performance.now();this.fps=1e3*Math.max(e-this.lastDecodedFrames,0)/(t-this.lastTimeUpdate),this.lastDecodedFrames=e,this.lastTimeUpdate=t,this.listener.onSinkTimeUpdate();var n=a.bufferedRange(this.video,r.MIN_PLAYABLE_BUFFER);this.checkBufferUpdate(n),this.updateIdle(n)},e.prototype.onVideoEnded=function(){this.listener.onSinkEnded()},e.prototype.onVideoPlaying=function(){this.video.paused||this.listener.onSinkPlaying(this.paused)},e.prototype.onVideoSeeking=function(){this.seeking?this.seeking=!1:this.listener.seekTo(this.video.currentTime)},e.prototype.onVideoError=function(){var e=this.video.error,t=e.code,n=e.message,i=void 0===n?"":n;this.listener.onSinkError({value:t,code:t,message:i})},e.prototype.heartbeat=function(){var e=a.bufferedRange(this.video,r.MIN_PLAYABLE_BUFFER);if(this.video.paused)clearInterval(this.intervalId);else if(this.video.currentTime===this.lastPlayhead){var t=a.getNextPlayablePosition(this.video,r.MIN_PLAYABLE_BUFFER);t!==this.video.currentTime&&(console.warn("jumping "+(t-this.video.currentTime)+"s gap"),this.seekTo(t)),this.updateIdle(e)}else this.checkBufferUpdate(e),this.lastPlayhead=this.video.currentTime;this.videoDisplaySizeUpdate()},e.prototype.videoDisplaySizeUpdate=function(){var e=this.video.clientWidth*window.devicePixelRatio,t=this.video.clientHeight*window.devicePixelRatio;this.listener.onSinkVideoDisplaySizeChanged(e,t)},e.prototype.checkBufferUpdate=function(e){var t=e.end;t!==this.lastBufferEnd&&(this.lastBufferEnd=t,this.listener.onSinkBufferUpdate())},e.prototype.updateIdle=function(e){var t=this,n=(e.start,e.end);if(this.video.paused)this.idle=!0;else{var i=n-this.video.currentTime<r.MIN_PLAYABLE_BUFFER;i&&!this.idle&&(this.idleTimeout=self.setTimeout((function(){return t.onBufferingTimeout()}),r.BUFFERING_TIMEOUT),this.listener.onSinkIdle()),this.idle=i}},e.prototype.onBufferingTimeout=function(){clearTimeout(this.idleTimeout),this.idleTimeout=-1,this.listener.onSinkError({value:o.ERROR_BUFFERING_TIMEOUT,code:o.ERROR_BUFFERING_TIMEOUT,message:"Buffering timeout"})},e.prototype.checkStopped=function(e){!this.video.paused||this.video.ended||this.video.error||this.paused||this.listener.onSinkStop(e)},e.prototype.playInternal=function(){var e=this;this.playAttempt=!0,s.default.resolve(this.video.play()).catch((function(){e.playAttempt=!1,e.checkStopped(!0)}))},e.prototype.addListener=function(e,t){this.onDelete[e]=a.subscribe(this.video,e,t)},e}();t.PlaybackMonitor=u},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),o=n(0),s=n(32),a=i(n(7)),u=n(30),c=n(1),d=function(){function e(e,t,n){this.video=t,this.metaTrack=n,this.codecs=Object.create(null),this.listener=e,this.playbackMonitor=new s.PlaybackMonitor(t,e),this.mediaSource=null,this.tracks=Object.create(null),this.trackOffsets=Object.create(null),this.removeTimeupdateListener=p}return e.prototype.configure=function(e){var t=e.trackID,n=e.codec;this.codecs[t]=n,this.mediaSource||(this.mediaSource=l(this.video)),this.tracks[t]||this.addSourceBuffer(t,n,0)},e.prototype.enqueue=function(e){var t=e.trackID,n=e.buffer,i=this.tracks[t];i&&i.then((function(e){return e.appendBuffer(n)}),p)},e.prototype.endOfStream=function(){var e=this;this.scheduleUpdate().then((function(){return e.playbackMonitor.endOfStream()}))},e.prototype.setTimestampOffset=function(e){var t=e.trackID,n=e.offset,i=this.tracks[t];i&&(this.trackOffsets[t]=n,i.then((function(e){return e.setTimestampOffset(n)}),p))},e.prototype.onSourceDurationChanged=function(e){var t=this;this.mediaSource.then((function(n){var i=function(e,t,n){var i=null;return e===1/0?n&&t!==1/0?i=e:n||t===r.FINITE_LIVE_DURATION||(i=r.FINITE_LIVE_DURATION):e!==t&&(i=e),i}(e,n.duration,t.video.controls);null!==i&&t.updateMediaSourceDuration(n,i)})),this.removeTimeupdateListener(),this.removeTimeupdateListener=c.subscribe(this.video,"timeupdate",(function(){return t.onSourceDurationChanged(e)}))},e.prototype.play=function(){var e=this;this.scheduleUpdate().then((function(){return e.playbackMonitor.play()}))},e.prototype.pause=function(){var e=this;this.scheduleUpdate().then((function(){return e.playbackMonitor.pause()}))},e.prototype.remove=function(e){var t=e.start,n=e.end,i=function(e){return e.remove(t,n)};for(var r in this.tracks)this.tracks[r].then(i);this.metaTrack.remove(t,n)},e.prototype.seekTo=function(e){var t=this,n=c.bufferedRange(this.video,r.MIN_PLAYABLE_BUFFER),i=n.start,o=n.end;e>=i&&e<o?this.scheduleUpdate().then((function(){return t.playbackMonitor.seekTo(e)})):this.playbackMonitor.seekTo(e)},e.prototype.setVolume=function(e){this.video.volume!==e&&(this.video.volume=e)},e.prototype.getVolume=function(){return this.video.volume},e.prototype.isMuted=function(){return this.video.muted},e.prototype.setMuted=function(e){this.video.muted!==e&&(this.video.muted=e)},e.prototype.getDisplayWidth=function(){return this.video.clientWidth},e.prototype.getDisplayHeight=function(){return this.video.clientHeight},e.prototype.setPlaybackRate=function(e){this.video.playbackRate=e},e.prototype.getPlaybackRate=function(){return this.video.playbackRate},e.prototype.getCurrentTime=function(){return this.video.currentTime},e.prototype.addCue=function(e,t,n){t<=e&&(t=e+r.MIN_PLAYABLE_BUFFER);var i=new(window.VTTCue||window.TextTrackCue)(e,t,"");i.onenter=function(){return n(!0)},i.onexit=function(){return n(!1)},this.metaTrack.addCue(i)},e.prototype.buffered=function(){return c.bufferedRange(this.video,r.MIN_PLAYABLE_BUFFER)},e.prototype.bufferDuration=function(){var e=this.buffered(),t=e.start;return e.end-Math.max(t,this.video.currentTime)},e.prototype.decodedFrames=function(){return c.decodedFrames(this.video)},e.prototype.droppedFrames=function(){return c.droppedFrames(this.video)},e.prototype.framerate=function(){return this.playbackMonitor.framerate()},e.prototype.captureGesture=function(){this.playbackMonitor.play(),this.playbackMonitor.pause()},e.prototype.delete=function(){if(this.removeTimeupdateListener(),this.playbackMonitor.delete(),this.metaTrack.remove(0,1/0),this.video.src){var e=this.video.src;this.video.removeAttribute("src"),this.video.load(),URL.revokeObjectURL(e)}},e.prototype.addSourceBuffer=function(e,t,n){var i=this,r=this.mediaSource.then((function(e){var r=e.addSourceBuffer("video/mp4;"+t);return r.timestampOffset=n,new u.SafeSourceBuffer(i.video,r)}));r.catch((function(e){return i.listener.onSinkError({value:o.MEDIA_ERR_SRC_NOT_SUPPORTED,code:o.MEDIA_ERR_SRC_NOT_SUPPORTED,message:e.toString()})})),this.tracks[e]=r},e.prototype.scheduleUpdate=function(){function e(e){return new a.default((function(t){return e.schedule(t)}))}var t=[];for(var n in this.tracks)t.push(this.tracks[n].then(e));return a.default.all(t).catch(p)},e.prototype.updateMediaSourceDuration=function(e,t){var n=this;if("open"===e.readyState)e.duration=t;else var i=c.subscribe(e,"sourceopen",(function(){i(),"open"===e.readyState&&n.scheduleUpdate().then((function(){e.duration=t}))}))},e}();function p(){}function l(e){return new a.default((function(t,n){var i=new MediaSource,o=function(){i.removeEventListener("sourceopen",o),"open"===i.readyState?(i.duration=r.FINITE_LIVE_DURATION,t(i)):n(new Error("MediaSource not opened"))};i.addEventListener("sourceopen",o);var s=e.playbackRate;e.src=URL.createObjectURL(i),e.playbackRate=s}))}t.MSEMediaSink=d,t._testExports={createMediaSource:l}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.licenseRequestData=function(e){var t=String.fromCharCode.apply(null,new Uint16Array(e)),n=(new DOMParser).parseFromString(t,"application/xml");return{headers:function(e){for(var t={},n=e.getElementsByTagName("name"),i=e.getElementsByTagName("value"),r=0;r<n.length;r++)t[n[r].childNodes[0].nodeValue]=i[r].childNodes[0].nodeValue;return t}(n),body:function(e){var t=null;if(e.getElementsByTagName("Challenge").length>0&&e.getElementsByTagName("Challenge")[0]){var n=e.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;n&&(t=atob(n))}return t}(n)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3);function r(e){return e instanceof Uint8Array||e instanceof Uint16Array?e.buffer:e}function o(e,t){for(var n=new DataView(e.buffer,e.byteOffset,e.byteLength),i=s(t),r=0;r<e.byteLength;){var o=n.getUint32(r);if(n.getUint32(r+4)===i)return e.subarray(r+8,r+o);r+=o}return new Uint8Array(e)}function s(e){return(e.charCodeAt(0)<<24)+(e.charCodeAt(1)<<16)+(e.charCodeAt(2)<<8)+e.charCodeAt(3)}function a(e){var t=e.toString(16);return 1===t.length?"0"+t:t}function u(e){for(var t=atob(e),n=t.length,i=new Uint8Array(n),r=0;r<n;r++)i[r]=t.charCodeAt(r);return i}function c(e){return decodeURIComponent(e.replace(/\+/g," "))}t.arrayBuffersEqual=function(e,t){if((e=r(e))===(t=r(t)))return!0;if(e.byteLength!==t.byteLength)return!1;for(var n=new DataView(e),i=new DataView(t),o=0;o<n.byteLength;o++)if(n.getUint8(o)!==i.getUint8(o))return!1;return!0},t.parsePSSHSupportFromInitData=function(e){return function(e){var t=[];return e.forEach((function(e){Object.keys(i.KEY_SYSTEMS).forEach((function(n){var r=i.KEY_SYSTEMS[n];r.uuid===e&&t.push(r)}))})),t}(function(e){if(null===e)return[];for(var t=new DataView(e.buffer||e),n=[],i=0;;){var r,o=void 0,u=void 0;if(i>=t.buffer.byteLength)break;if(r=i+t.getUint32(i),i+=4,t.getUint32(i)===s("pssh"))if(i+=4,0===(o=t.getUint8(i))||1===o){i++,i+=3,u="";for(var c=0;c<4;c++)u+=a(t.getUint8(i+c));i+=4,u+="-";for(c=0;c<2;c++)u+=a(t.getUint8(i+c));i+=2,u+="-";for(c=0;c<2;c++)u+=a(t.getUint8(i+c));i+=2,u+="-";for(c=0;c<2;c++)u+=a(t.getUint8(i+c));i+=2,u+="-";for(c=0;c<6;c++)u+=a(t.getUint8(i+c));i+=6,u=u.toLowerCase(),t.getUint32(i),i+=4,n.push(u),i=r}else i=r;else i=r}return n}(e))},t.httpRequest=function(e,t){return new Promise((function(n,i){var r=new XMLHttpRequest;for(var o in r.open(t.method,e,!0),t.headers)t.headers.hasOwnProperty(o)&&r.setRequestHeader(o,t.headers[o]);r.responseType=t.responseType,r.onload=function(){200===r.status&&n(r.response)},r.onloadend=function(){i(r.status)},r.send(t.body)}))},t.contentIdFromInitData=function(e){return function(e){for(var t="",n=0,i=e;n<i.length;n++){t+=a(i[n])}return t}(o(o(u(JSON.parse(String.fromCharCode.apply(null,e)).sinf[0]),"schi"),"tenc").subarray(8,24))},t.decodeBase64=u,t.encodeBase64=function(e){return btoa(String.fromCharCode.apply(null,e))},t.getParamsFromUrl=function(e){var t={};return new URL(e).searchParams.forEach((function(e,n){t[c(n)]=e?c(e):""})),t}},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(s,a)}u((i=i.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),s=n(35),a=n(34),u=n(0),c=[{initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/mp4;codecs="mp4a.40.2"'}],videoCapabilities:[{robustness:"SW_SECURE_CRYPTO",contentType:'video/mp4;codecs="avc1.42E01E"'}]}],d=function(){function e(e){var t=this;this.video=e.video,this.listener=e.listener,this.cdmSupport=null,this.selectedCDM=null,this.mediaKeys=void 0,this.pendingSessions=[],this.reset(),this.video.addEventListener("encrypted",(function(e){return t.handleEncrypted(e)})),this.video.addEventListener("webkitneedkey",(function(e){return t.handleSafariEncrypted(e)}))}return e.prototype.configure=function(e){var t=this;if(!this.authXml){var n=new URL(e).pathname.split("/"),i=n[n.length-1].split(".")[0],r=s.getParamsFromUrl(e),a=r.token,u=r.sig,c=""+o.AUTH_XML_URL+i+"?token="+encodeURIComponent(a)+"&sig="+u;this.authXml=s.httpRequest(c,{method:"GET",responseType:"text"}).catch((function(e){t.handleError(Object.assign({code:e},o.ERRORS.AUTH_XML_REQUEST))}))}},e.prototype.reset=function(){this.authXml=null,this.sessions=[]},e.prototype.isProtected=function(){return null!==this.authXml},e.prototype.handleError=function(e){this.listener.onSinkError({value:e.value||u.MEDIA_ERR_SRC_NOT_SUPPORTED,code:e.code||0,message:e.message||""})},e.prototype.hasSession=function(e){for(var t=0,n=this.sessions;t<n.length;t++){var i=n[t];if(i.initData&&s.arrayBuffersEqual(i.initData,e))return!0}return!1},e.prototype.createKeySystemSupportChain=function(){if(null===this.cdmSupport||0===this.cdmSupport.length)return Promise.reject(o.ERRORS.NO_PSSH_FOUND);var e=Promise.reject();return this.cdmSupport.forEach((function(t){e=e.catch((function(){return navigator.requestMediaKeySystemAccess(t.keySystem,c)}))})),e=e.catch((function(){return Promise.reject(o.ERRORS.NO_CDM_SUPPORT)}))},e.prototype.handleEncrypted=function(e){return i(this,void 0,void 0,(function(){var t,n,i;return r(this,(function(r){switch(r.label){case 0:if(this.hasSession(e.initData))return[2];if(this.sessions.push(e),null===this.cdmSupport&&(this.cdmSupport=s.parsePSSHSupportFromInitData(e.initData)),void 0!==this.mediaKeys)return[3,6];this.mediaKeys=null,r.label=1;case 1:return r.trys.push([1,5,,6]),[4,this.createKeySystemSupportChain()];case 2:return t=r.sent(),this.selectedCDM=o.KEY_SYSTEMS_BY_STRING[t.keySystem],[4,t.createMediaKeys()];case 3:return n=r.sent(),[4,this.setMediaKeys(n)];case 4:return r.sent(),[3,6];case 5:return i=r.sent(),this.handleError(i),[3,6];case 6:return this.addSession(e),[2]}}))}))},e.prototype.setMediaKeys=function(e){var t=this;return this.mediaKeys=e,this.pendingSessions.forEach((function(e){return t.createSessionRequest(e)})),this.pendingSessions=[],this.video.setMediaKeys(this.mediaKeys)},e.prototype.addSession=function(e){var t=this;this.mediaKeys?this.createSessionRequest(e).catch((function(){t.handleError(o.ERRORS.KEY_SESSION_CREATION)})):this.pendingSessions.push(e)},e.prototype.createSessionRequest=function(e){var t=this,n=e.initDataType,i=e.initData,r=this.mediaKeys.createSession();return r.addEventListener("message",(function(e){return t.handleMessage(e)})),r.addEventListener("keystatuseschange",(function(e){return t.handleKeyStatusesChange(e,i)})),r.generateRequest(n,i)},e.prototype.handleKeyStatusesChange=function(e,t){var n=this,i=e.target,r=!1;i.keyStatuses.forEach((function(e){switch(e){case"expired":r=!0;break;case"internal-error":n.handleError(o.ERRORS.KEY_SESSION_INTERNAL)}})),r&&i.close().then((function(){return n.removeSession(t)}))},e.prototype.removeSession=function(e){for(var t=0;t<this.sessions.length;t++)if(this.sessions[t].initData===e)return void this.sessions.splice(t,1)},e.prototype.handleMessage=function(e){return i(this,void 0,void 0,(function(){var t,n,i=this;return r(this,(function(r){switch(r.label){case 0:return t=e.target,[4,this.generateLicense(e.message)];case 1:return n=r.sent(),t.update(n).catch((function(){i.handleError(o.ERRORS.SESSION_UPDATE)})),[2]}}))}))},e.prototype.generateLicense=function(e){return i(this,void 0,void 0,(function(){var t,n,i,s;return r(this,(function(r){switch(r.label){case 0:return this.selectedCDM!==o.KEY_SYSTEMS.CLEARKEY?[3,1]:(t=JSON.parse((new TextDecoder).decode(e)),n=t.kids.map((function(e){return{kty:"oct",alg:"A128KW",kid:e,k:e}})),i=(new TextEncoder).encode(JSON.stringify({keys:n})),[2,Promise.resolve(i)]);case 1:return this.authXml?[4,this.authXml]:[3,3];case 2:return s=r.sent(),[2,this.requestLicense(e,s)];case 3:this.handleError(o.ERRORS.AUTH_XML_REQUEST),r.label=4;case 4:return[2]}}))}))},e.prototype.requestLicense=function(e,t){return i(this,void 0,void 0,(function(){var n,i,u=this;return r(this,(function(r){return n={method:"POST",responseType:"arraybuffer",body:e,headers:{customdata:t,"Content-Type":"application/octet-stream"}},this.selectedCDM===o.KEY_SYSTEMS.PLAYREADY&&(i=a.licenseRequestData(e),n.body=i.body,n.headers=Object.assign(n.headers,i.headers)),[2,s.httpRequest(this.selectedCDM.licenseUrl,n).catch((function(){u.handleError(Object.assign({code:status},o.ERRORS.LICENSE_REQUEST))}))]}))}))},e.prototype.handleSafariEncrypted=function(e){return i(this,void 0,void 0,(function(){var t,n,i=this;return r(this,(function(r){switch(r.label){case 0:this.selectedCDM=o.KEY_SYSTEMS.FAIRPLAY,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,s.httpRequest(o.KEY_SYSTEMS.FAIRPLAY.certUrl,{method:"GET",responseType:"arraybuffer",headers:{Pragma:"Cache-Control: no-cache","Cache-Control":"max-age=0"}})];case 2:return t=r.sent(),this.setupSafariMediaKeys(e,t).catch((function(e){return i.handleError(e)})),[3,4];case 3:return n=r.sent(),this.handleError(Object.assign({code:n},o.ERRORS.CERT_REQUEST)),[3,4];case 4:return[2]}}))}))},e.prototype.setupSafariMediaKeys=function(e,t){var n=this;return new Promise((function(i,r){n.video.webkitKeys||n.video.webkitSetMediaKeys(new window.WebKitMediaKeys(o.KEY_SYSTEMS.FAIRPLAY.keySystem)),n.video.webkitKeys||r("Issue setting fairplay media keys");var a=s.contentIdFromInitData(e.initData),u=n.video.webkitKeys.createSession("video/mp4",e.initData);if(!u)return r("Could not create key session");u.contentId=a,u.addEventListener("webkitkeymessage",(function(e){var i=e.target,o=e.message;"certificate"===String.fromCharCode.apply(null,e.message)?i.update(new Uint8Array(t)):n.getWebkitLicense(o,a).then((function(e){var t=e.trim();"<ckc>"===t.substr(0,5)&&"</ckc>"===t.substr(-6)&&(t=t.slice(5,-6)),i.update(s.decodeBase64(t))})).catch(r)})),u.addEventListener("webkitkeyadded",i),u.addEventListener("webkitkeyerror",r)}))},e.prototype.getWebkitLicense=function(e,t){return this.authXml?this.authXml.then((function(n){var i=o.KEY_SYSTEMS.FAIRPLAY.licenseUrl,r={method:"POST",body:"spc="+s.encodeBase64(e)+"&assetId="+t,responseType:"text",headers:{"Content-Type":"application/x-www-form-urlencoded",customdata:n}};return s.httpRequest(i,r).catch((function(e){return Promise.reject(Object.assign({code:e},o.ERRORS.LICENSE_REQUEST))}))})):Promise.reject(o.ERRORS.AUTH_XML_REQUEST)},e}();t.DRMManager=d},function(e,n,i){"use strict";var r=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{u(i.next(e))}catch(e){o(e)}}function a(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(s,a)}u((i=i.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=(r=s.trys).length>0&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(n,"__esModule",{value:!0});var s=i(13),a=function(){function e(t){var n=this;this.listener=t,e.prepareCastContext().then((function(){n.remotePlayer=new cast.framework.RemotePlayer,n.remotePlayerController=new cast.framework.RemotePlayerController(n.remotePlayer)})).catch((function(){n.listener.onSessionError()}))}return e.canCast=function(){return s.browser.chrome},e.lookForRemotePlaybackDevices=function(t){return r(this,void 0,void 0,(function(){var n;return o(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,e.prepareCastContext()];case 1:return(n=i.sent()).addEventListener(cast.framework.CastContextEventType.CAST_STATE_CHANGED,(function(e){switch(e.castState){case cast.framework.CastState.NO_DEVICES_AVAILABLE:t.onRemoteDevice(!1);break;case cast.framework.CastState.NOT_CONNECTED:t.onRemoteDevice(!0);break;case cast.framework.CastState.CONNECTED:var i=n.getCurrentSession();i&&i.getSessionState()===cast.framework.SessionState.SESSION_RESUMED&&t.onRemoteReconnect()}})),n.setOptions({receiverApplicationId:"F993ACB3",autoJoinPolicy:chrome.cast.AutoJoinPolicy.TAB_AND_ORIGIN_SCOPED}),[3,3];case 2:return i.sent(),t.onRemoteDevice(!1),[3,3];case 3:return[2]}}))}))},e.prepareCastContext=function(){return r(this,void 0,void 0,(function(){return o(this,(function(e){return window.cast&&window.cast.framework?[2,Promise.resolve(cast.framework.CastContext.getInstance())]:[2,new Promise((function(e,n){if(t.__onGCastApiAvailable=function(t,i){t?e(cast.framework.CastContext.getInstance()):n()},!document.getElementById("pc-chromecast-sender")){var i=document.createElement("script");i.id="pc-chromecast-sender",i.onerror=function(){document.body.removeChild(i),t.__onGCastApiAvailable=function(){},n()},i.async=!0,i.src="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1",document.body.appendChild(i)}}))]}))}))},e.prototype.configure=function(t){var n=t.path;return r(this,void 0,void 0,(function(){var t,i,r,s,a,u;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,6,,7]),[4,e.prepareCastContext()];case 1:return t=o.sent(),(i=t.getCurrentSession())?[3,3]:[4,t.requestSession()];case 2:return o.sent(),i=t.getCurrentSession(),this.setupRemotePlayerListeners(i,this.remotePlayerController),[3,4];case 3:i.getSessionState()===cast.framework.SessionState.SESSION_RESUMED&&this.setupRemotePlayerListeners(i,this.remotePlayerController),o.label=4;case 4:return(r=new chrome.cast.media.MediaInfo(n,"")).streamType=chrome.cast.media.StreamType.BUFFERED,s=new chrome.cast.media.GenericMediaMetadata,r.metadata=s,r.customData={analytics:{chromecast_sender:"player-core",platform:"web"}},this.remotePlayerController.stop(),a=new chrome.cast.media.LoadRequest(r),this.seekTime>0&&(a.currentTime=this.seekTime,this.seekTime=0),[4,i.loadMedia(a)];case 5:return o.sent(),[3,7];case 6:return u=o.sent(),[2,this.handleError(u)];case 7:return[2]}}))}))},e.prototype.stopMedia=function(t){return void 0===t&&(t=!0),r(this,void 0,void 0,(function(){var n,i;return o(this,(function(r){switch(r.label){case 0:return[4,e.prepareCastContext()];case 1:return n=r.sent(),(i=n.getCurrentSession())&&i.getSessionState()!==cast.framework.SessionState.SESSION_RESUMED&&i.endSession(t),[2]}}))}))},e.prototype.enqueue=function(){},e.prototype.endOfStream=function(){},e.prototype.setTimestampOffset=function(){},e.prototype.onSourceDurationChanged=function(){},e.prototype.play=function(){this.remotePlayer&&this.remotePlayer.isPaused&&this.remotePlayerController.playOrPause()},e.prototype.pause=function(){this.remotePlayer&&!this.remotePlayer.isPaused&&this.remotePlayerController.playOrPause()},e.prototype.reinit=function(){},e.prototype.remove=function(){},e.prototype.seekTo=function(e){this.remotePlayer&&(this.remotePlayer.playerState!==chrome.cast.media.PlayerState.IDLE?(this.remotePlayer.currentTime=e,this.remotePlayerController.seek()):this.seekTime=e)},e.prototype.setPlaybackRate=function(e){},e.prototype.addCue=function(){},e.prototype.bufferDuration=function(){return 0},e.prototype.buffered=function(){return{start:0,end:0}},e.prototype.decodedFrames=function(){return 0},e.prototype.droppedFrames=function(){return 0},e.prototype.framerate=function(){return 0},e.prototype.getDisplayWidth=function(){return 0},e.prototype.getDisplayHeight=function(){return 0},e.prototype.getPlaybackRate=function(){return 0},e.prototype.getCurrentTime=function(){return this.remotePlayer?this.remotePlayer.currentTime:0},e.prototype.delete=function(){this.remotePlayer&&this.stopMedia()},e.prototype.setMuted=function(e){this.remotePlayer&&e!==this.remotePlayer.isMuted&&this.remotePlayerController.muteOrUnmute()},e.prototype.isMuted=function(){return!!this.remotePlayer&&this.remotePlayer.isMuted},e.prototype.setVolume=function(e){this.remotePlayer&&(this.remotePlayer.volumeLevel=e,this.remotePlayerController.setVolumeLevel())},e.prototype.getVolume=function(){return this.remotePlayer?this.remotePlayer.volumeLevel:0},e.prototype.captureGesture=function(){},e.prototype.getDevice=function(){return r(this,void 0,void 0,(function(){var t,n;return o(this,(function(i){switch(i.label){case 0:return[4,e.prepareCastContext()];case 1:return t=i.sent(),(n=t.getCurrentSession())?[2,n.getCastDevice().friendlyName]:[2]}}))}))},e.prototype.setupRemotePlayerListeners=function(e,t){var n=this,i=function(){return r(n,void 0,void 0,(function(){return o(this,(function(t){return e.getMediaSession()&&this.listener.onSinkTimeUpdate(),[2]}))}))},s=function(){switch(n.remotePlayer.playerState){case chrome.cast.media.PlayerState.BUFFERING:n.listener.onSinkIdle();break;case chrome.cast.media.PlayerState.PLAYING:n.listener.onSinkPlaying(!1);break;case chrome.cast.media.PlayerState.IDLE:var t=e.getMediaSession();t&&t.idleReason===chrome.cast.media.IdleReason.FINISHED&&n.listener.onSinkEnded()}},a=function(){n.listener.onSinkVolumeChanged(n.remotePlayer.volumeLevel)},u=function(){n.listener.onSinkMutedChanged(n.remotePlayer.isMuted)},c=function(){n.listener.onSinkDurationChanged(n.remotePlayer.duration)},d=function(){n.remotePlayerController.removeEventListener(cast.framework.RemotePlayerEventType.CURRENT_TIME_CHANGED,i),n.remotePlayerController.removeEventListener(cast.framework.RemotePlayerEventType.PLAYER_STATE_CHANGED,s),n.remotePlayerController.removeEventListener(cast.framework.RemotePlayerEventType.VOLUME_LEVEL_CHANGED,a),n.remotePlayerController.removeEventListener(cast.framework.RemotePlayerEventType.IS_MUTED_CHANGED,u),n.remotePlayerController.removeEventListener(cast.framework.RemotePlayerEventType.DURATION_CHANGED,c),n.listener.onSessionStop()};e.addEventListener(cast.framework.SessionEventType.MEDIA_SESSION,(function(){n.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.CURRENT_TIME_CHANGED,i),n.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.PLAYER_STATE_CHANGED,s),n.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.VOLUME_LEVEL_CHANGED,a),n.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.IS_MUTED_CHANGED,u),n.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.DURATION_CHANGED,c),n.listener.onSessionStarted(e.getCastDevice().friendlyName)}));var p=e.getSessionObj();p.addUpdateListener((function(){p.status===chrome.cast.SessionStatus.STOPPED&&d()})),p.addMediaListener(d)},e.prototype.handleError=function(e){if(chrome.cast)switch(e){case chrome.cast.ErrorCode.SESSION_ERROR:this.listener.onSessionError();break;case chrome.cast.ErrorCode.RECEIVER_UNAVAILABLE:this.listener.onRemoteDevice(!1);break;case chrome.cast.ErrorCode.LOAD_MEDIA_FAILED:this.listener.onLoadMediaError();break;case chrome.cast.ErrorCode.CANCEL:this.listener.onUserCancel();break;default:this.listener.onSinkError({value:1,code:0,message:"Error requesting chromecast session"})}else this.listener.onSinkError({value:1,code:0,message:"Error loading chromecast SDK"})},e}();n.ChromecastMediaSink=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(37),r=n(36),o=n(33),s=n(29),a=n(24),u=n(23),c=function(){function e(e,t){this.video=t||document.createElement("video"),this.metaTrack=new a.SafeTextTrack(this.video),this.listener=e,this.drmManager=new r.DRMManager({video:this.video,listener:e}),this.codecs=Object.create(null),this.sink=new d(this.video),i.ChromecastMediaSink.lookForRemotePlaybackDevices(this.listener),this.unsubVolumeObserver=u.VolumeObserver(this.video,e).unsub}return e.prototype.delete=function(){this.sink.delete(),this.drmManager.reset()},e.prototype.configure=function(e){var t=e.mode,n=e.codec,r=e.trackID;this.sink instanceof d&&(this.sink="chromecast"===t?new i.ChromecastMediaSink(this.listener):"passthrough"===t?new s.PassthroughSink(this.listener,this.video):new o.MSEMediaSink(this.listener,this.video,this.metaTrack)),n?this.codecs[r]=n:e.codec=this.codecs[r],this.sink.configure(e);var a=e.path,u=e.isProtected;a&&u&&this.drmManager.configure(a)},e.prototype.applyRPC=function(e){var t=e.name,n=e.arg;this.sink[t].call(this.sink,n)},e.prototype.getCurrentSink=function(){return this.sink},e.prototype.reset=function(){this.delete(),this.sink=new d(this.video),this.listener.onSinkTimeUpdate(),this.listener.onSinkBufferUpdate()},e.prototype.videoElement=function(){return this.video},e.prototype.isProtected=function(){return this.drmManager.isProtected()},e.prototype.captureGesture=function(){this.video.played.length||this.sink.captureGesture()},e.prototype.destroy=function(){this.unsubVolumeObserver(),this.delete()},e}();t.MediaSinkManager=c;var d=function(){function e(e){this.video=e}return e.prototype.configure=function(e){},e.prototype.enqueue=function(e){},e.prototype.endOfStream=function(){},e.prototype.setTimestampOffset=function(e){},e.prototype.onSourceDurationChanged=function(e){},e.prototype.play=function(){},e.prototype.pause=function(){},e.prototype.remove=function(e){},e.prototype.seekTo=function(e){},e.prototype.setPlaybackRate=function(e){this.video.playbackRate=e},e.prototype.setVolume=function(e){this.video.volume=e},e.prototype.addCue=function(e,t,n){},e.prototype.buffered=function(){return{start:0,end:0}},e.prototype.decodedFrames=function(){return 0},e.prototype.droppedFrames=function(){return 0},e.prototype.framerate=function(){return 0},e.prototype.delete=function(){},e.prototype.getVolume=function(){return this.video.volume},e.prototype.isMuted=function(){return this.video.muted},e.prototype.setMuted=function(e){this.video.muted=e},e.prototype.getDisplayWidth=function(){return 0},e.prototype.getDisplayHeight=function(){return 0},e.prototype.getPlaybackRate=function(){return this.video.playbackRate},e.prototype.getCurrentTime=function(){return 0},e.prototype.bufferDuration=function(){return 0},e.prototype.captureGesture=function(){},e}()},function(e,t,n){"use strict";function i(){return"undefined"!=typeof MediaSource}Object.defineProperty(t,"__esModule",{value:!0}),t.isMSESupported=i,t.isVP9Supported=function(){return i()?"mediaCapabilities"in navigator?navigator.mediaCapabilities.decodingInfo({type:"media-source",video:{contentType:'video/mp4;codecs="vp09.00.41.08"',width:1920,height:1080,bitrate:8e6,framerate:60}}).then((function(e){return e.supported&&e.smooth})):Promise.resolve(MediaSource.isTypeSupported('video/mp4;codecs="vp09.00.10.08"')):Promise.resolve(!1)}},function(e,t){e.exports=n("ptru")},function(e,t,n){"use strict";var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var r=n(13),o=i(n(39)),s=n(0),a=n(12),u=n(11),c=n(10),d=n(9),p=n(8),l=n(38),h=n(22),f=i(n(5)),m=n(21),y=n(17);function v(e,t){var n;return(n=r.browser.msie?new y.WorkerShim(e,window):new Worker(URL.createObjectURL(new Blob(["importScripts('"+e+"')"])))).postMessage({wasmBinaryUrl:t}),n}t.isWasmSupported="object"==typeof window.WebAssembly&&"function"==typeof window.WebAssembly.instantiate,t.canPlay="undefined"!=typeof MediaSource&&MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),t.createWorker=v;var E=r.browser.chrome&&63===r.browser.major||r.browser.opera,g=function(){function e(t,n){var i=this;this.worker=n,this.id=e.instanceId++,this.emitter=new h.TypedEventEmitter,this.seekTime=null,this.paused=!0,this.isLoaded=!1,this.autoplay=!1,this.isQualitySupported=t.isQualitySupported||f.defaultIsQualitySupported,this.onvisibilitychange=function(){return i.onVisibilityChange()},this.onmessage=function(e){return i.onWorkerMessage(e)},this.mediaSinkManager=new l.MediaSinkManager(this),this.experimentIds=null,this.state={looping:!1,autoSwitchQuality:!0},this.stats={},this.resetState(),this.attachHandlers(),this.postMessage("create",[{settings:f.loadSettings(t.settings),logLevel:String(t.logLevel),mseSupported:o.isMSESupported(),keySystem:void 0!==t.keySystem?t.keySystem:f.getSupportedKeySystem(r.browser),browserContext:r.browser,codecs:e.isVP9Supported()?["vp09"]:[]}]),self.setTimeout(function(){this.emitter&&this.emitter.emit(u.PlayerEvent.INITIALIZED)}.bind(this),0)}return e.isVP9Supported=function(){return o.isMSESupported()&&MediaSource.isTypeSupported('video/mp4;codecs="vp09.00.10.08"')},e.prototype.delete=function(){var e=f.getVisibilityPropNames(document).visibilityChange;this.postMessage("delete"),this.webRTCConnectivityManagerIPv4&&(this.webRTCConnectivityManagerIPv4.destroy(),this.webRTCConnectivityManagerIPv4=null),this.webRTCConnectivityManagerIPv6&&(this.webRTCConnectivityManagerIPv6.destroy(),this.webRTCConnectivityManagerIPv6=null),this.worker.removeEventListener("message",this.onmessage),document.removeEventListener(e,this.onvisibilitychange),this.mediaSinkManager.getCurrentSink().delete(),this.emitter=null},e.prototype.attachHTMLVideoElement=function(e){this.mediaSinkManager&&this.mediaSinkManager.destroy(),this.mediaSinkManager=new l.MediaSinkManager(this,e)},e.prototype.getHTMLVideoElement=function(){return this.mediaSinkManager.videoElement()},e.prototype.load=function(e,t){void 0===t&&(t=""),this.postMessage("load",[e,t]),this.resetState()},e.prototype.play=function(){this.mediaSinkManager.captureGesture(),this.paused=!1,this.attemptPlay()},e.prototype.setAutoplay=function(e){this.autoplay=e},e.prototype.getExperimentIds=function(){return this.experimentIds},e.prototype.setExperiment=function(e,t){this.postMessage("setExperiment",[e,t])},e.prototype.pause=function(){this.paused=!0,this.postMessage("pause")},e.prototype.isPaused=function(){return this.paused},e.prototype.seekTo=function(e){this.getDuration()>.5&&(e=Math.min(e,this.getDuration()-.5)),e=Math.max(0,e),this.seekTime=e,this.postMessage("seekTo",[e])},e.prototype.isSeeking=function(){return null!==this.seekTime},e.prototype.getDuration=function(){return this.state.duration},e.prototype.getStartOffset=function(){return this.state.startOffset||0},e.prototype.getPosition=function(){return null===this.seekTime?this.mediaSinkManager.getCurrentSink().getCurrentTime():this.seekTime},e.prototype.getBuffered=function(){return this.mediaSinkManager.getCurrentSink().buffered()},e.prototype.getBufferDuration=function(){return this.mediaSinkManager.getCurrentSink().bufferDuration()},e.prototype.getPlayerState=function(){return this.state.playerState},e.prototype.getVideoWidth=function(){return this.mediaSinkManager.videoElement().videoWidth},e.prototype.getVideoHeight=function(){return this.mediaSinkManager.videoElement().videoHeight},e.prototype.getVideoFrameRate=function(){return this.mediaSinkManager.getCurrentSink().framerate()},e.prototype.getVideoBitRate=function(){return this.stats.videoBitRate},e.prototype.getAverageBitrate=function(){return this.stats.averageBitrate},e.prototype.getBandwidthEstimate=function(){return this.stats.bandwidthEstimate},e.prototype.getVersion=function(){return"2.21.1-0bda90b2"},e.prototype.isLiveLowLatency=function(){return Boolean(this.state.sessionData.FUTURE)},e.prototype.isLooping=function(){return this.state.looping},e.prototype.setLooping=function(e){this.postMessage("setLooping",[e]),this.state.looping=e},e.prototype.isMuted=function(){return this.mediaSinkManager.getCurrentSink().isMuted()},e.prototype.setMuted=function(e){this.mediaSinkManager.getCurrentSink().setMuted(e)},e.prototype.setVolume=function(e){this.mediaSinkManager.getCurrentSink().setVolume(e)},e.prototype.getVolume=function(){return this.mediaSinkManager.getCurrentSink().getVolume()},e.prototype.getQuality=function(){return this.state.quality},e.prototype.setQuality=function(e,t){void 0===t&&(t=!1),this.mediaSinkManager.videoElement().controls||(this.postMessage("setQuality",[e,t]),this.state.autoSwitchQuality=!1)},e.prototype.getQualities=function(){return this.state.qualities},e.prototype.setAuthToken=function(e){this.postMessage("setAuthToken",[e])},e.prototype.getAutoSwitchQuality=function(){return this.state.autoSwitchQuality},e.prototype.setAutoSwitchQuality=function(e){this.state.autoSwitchQuality=e,this.postMessage("setAutoSwitchQuality",[e])},e.prototype.setAutoInitialBitrate=function(e){this.postMessage("setAutoInitialBitrate",[e])},e.prototype.setAutoMaxBitrate=function(e){this.postMessage("setAutoMaxBitrate",[e])},e.prototype.setAutoMaxVideoSize=function(e,t){this.postMessage("setAutoMaxVideoSize",[e,t])},e.prototype.setAutoViewportSize=function(e,t){this.postMessage("setAutoViewportSize",[e,t])},e.prototype.getPlaybackRate=function(){return this.mediaSinkManager.getCurrentSink().getPlaybackRate()},e.prototype.setPlaybackRate=function(e){this.postMessage("setPlaybackRate",[e])},e.prototype.setClientId=function(e){this.postMessage("setClientId",[e])},e.prototype.setDeviceId=function(e){this.postMessage("setDeviceId",[e])},e.prototype.setLiveSpeedUpRate=function(e){this.postMessage("setLiveSpeedUpRate",[e])},e.prototype.setPlayerType=function(e){this.postMessage("setPlayerType",[e])},e.prototype.setLiveMaxLatency=function(e){this.postMessage("setLiveMaxLatency",[e])},e.prototype.setLiveLowLatencyEnabled=function(e){this.postMessage("setLiveLowLatencyEnabled",[e])},e.prototype.setMinBuffer=function(e){this.postMessage("setMinBuffer",[e])},e.prototype.setMaxBuffer=function(e){this.postMessage("setMaxBuffer",[e])},e.prototype.setRebufferToLive=function(e){this.postMessage("setRebufferToLive",[e])},e.prototype.setVisible=function(e){},e.prototype.setAnalyticsEndpoint=function(e){this.postMessage("setAnalyticsEndpoint",[e])},e.prototype.setAnalyticsSendEvents=function(e){this.postMessage("setAnalyticsSendEvents",[e])},e.prototype.addEventListener=function(e,t){this.emitter.on(e,t)},e.prototype.removeEventListener=function(e,t){this.emitter.removeListener(e,t)},e.prototype.getDroppedFrames=function(){return this.mediaSinkManager.getCurrentSink().droppedFrames()},e.prototype.getDecodedFrames=function(){return this.mediaSinkManager.getCurrentSink().decodedFrames()},e.prototype.getDisplayWidth=function(){return this.mediaSinkManager.getCurrentSink().getDisplayWidth()},e.prototype.getDisplayHeight=function(){return this.mediaSinkManager.getCurrentSink().getDisplayHeight()},e.prototype.getSessionData=function(){return this.state.sessionData},e.prototype.getLiveLatency=function(){return this.stats.broadcasterLatency},e.prototype.getTranscoderLatency=function(){return 1e3*this.stats.transcoderLatency},e.prototype.isProtected=function(){return this.mediaSinkManager.isProtected()},e.prototype.startRemotePlayback=function(){this.postMessage("startRemotePlayback")},e.prototype.endRemotePlayback=function(){this.postMessage("endRemotePlayback")},e.prototype.onSinkTimeUpdate=function(){var e=this.mediaSinkManager.getCurrentSink();null===this.seekTime&&(this.postMessage("onClientSinkUpdate",[{currentTime:e.getCurrentTime(),decodedFrames:e.decodedFrames(),droppedFrames:e.droppedFrames(),framerate:e.framerate()}]),this.emitter.emit(u.PlayerEvent.TIME_UPDATE))},e.prototype.onSinkBufferUpdate=function(){this.emitter.emit(u.PlayerEvent.BUFFER_UPDATE)},e.prototype.onSinkDurationChanged=function(e){this.postMessage("onClientSinkDurationChanged",[e])},e.prototype.onSinkEnded=function(){this.postMessage("onClientSinkEnded")},e.prototype.onSinkIdle=function(){this.postMessage("onClientSinkIdle")},e.prototype.onSinkPlaying=function(e){this.postMessage("onClientSinkPlaying"),e&&this.play()},e.prototype.onSinkStop=function(e){var t=f.getVisibilityPropNames(document).hidden;document[t]?this.postMessage("pause"):e?this.isMuted()?(this.pause(),this.emitter.emit(u.PlayerEvent.PLAYBACK_BLOCKED)):(this.setMuted(!0),this.mediaSinkManager.getCurrentSink().play(),this.emitter.emit(u.PlayerEvent.AUDIO_BLOCKED)):this.pause()},e.prototype.onSinkError=function(e){var t=e.value,n=e.code,i=e.message;this.postMessage("onClientSinkError",[t,n,i])},e.prototype.onSinkPlay=function(){this.emitter.emit(u.PlayerEvent.PROFILE,c.ProfileEvent.VIDEO_ELEMENT_PLAY)},e.prototype.onSinkVideoDisplaySizeChanged=function(e,t){this.setAutoViewportSize(e,t)},e.prototype.onSinkVolumeChanged=function(e){this.postMessage("setVolume",[e]),this.emitter.emit(u.PlayerEvent.VOLUME_CHANGED)},e.prototype.onSinkMutedChanged=function(e){this.postMessage("setMuted",[e]),this.emitter.emit(u.PlayerEvent.MUTED_CHANGED)},e.prototype.onRemoteDevice=function(e){this.emitter.emit(e?d.RemotePlayerEvent.AVAILABLE:d.RemotePlayerEvent.UNAVAILABLE)},e.prototype.onRemoteReconnect=function(){this.startRemotePlayback()},e.prototype.onSessionError=function(){var e=s.GENERIC_ERROR;this.postMessage("onClientSinkError",[e,0,"Chromecast session error"])},e.prototype.onLoadMediaError=function(){var e=s.GENERIC_ERROR;this.postMessage("onClientSinkError",[e,0,"Chromecast load media failed"])},e.prototype.onUserCancel=function(){this.endRemotePlayback(),this.emitter.emit(d.RemotePlayerEvent.SESSION_ENDED)},e.prototype.onSessionStop=function(){this.endRemotePlayback(),this.emitter.emit(d.RemotePlayerEvent.SESSION_ENDED)},e.prototype.onSessionStarted=function(e){this.emitter.emit(d.RemotePlayerEvent.SESSION_STARTED,e)},e.prototype.startWarpExperiment=function(e){e?this.webRTCConnectivityManagerIPv4=new m.WebRTCConnectivityExperimentManager({isIPv4:!0,onResultsReady:this.onWebRTCExperimentResultsReady.bind(this)}):this.webRTCConnectivityManagerIPv6=new m.WebRTCConnectivityExperimentManager({isIPv4:!1,onResultsReady:this.onWebRTCExperimentResultsReady.bind(this)})},e.prototype.onWebRTCExperimentResultsReady=function(e,t){this.postMessage("triggerAnalyticsEvent",[e,JSON.stringify(t)])},e.prototype.attemptPlay=function(){var e=f.getVisibilityPropNames(document).hidden;!document[e]&&this.isLoaded&&this.postMessage("play")},e.prototype.getDecodingInfo=function(e){var t=this;navigator.mediaCapabilities.decodingInfo(e).then((function(e){t.postMessage("onMediaDecodingInfoResult",[e])}))},e.prototype.postMessage=function(e,t){this.worker.postMessage({id:this.id,funcName:e,args:t})},e.prototype.resetState=function(){f.objectAssign(this.state,{playerState:p.PlayerState.IDLE,quality:{name:"",group:"",codecs:"",bitrate:0,width:0,height:0,framerate:0},qualities:[],duration:0,startOffset:0,sessionData:{}}),f.objectAssign(this.stats,{averageBitrate:0,videoBitRate:0,bandwidthEstimate:0,broadcasterLatency:0,transcoderLatency:0,networkProfile:[]}),this.emitter.emit(u.PlayerEvent.DURATION_CHANGED,{duration:0}),this.seekTime=null,this.isLoaded=!1},e.prototype.attachHandlers=function(){var e=this;this.worker.addEventListener("message",this.onmessage);var t=f.getVisibilityPropNames(document).visibilityChange;document.addEventListener(t,this.onvisibilitychange);var n=this.emitter,i=function(t){return f.objectAssign(e.state,t)};n.on(u.PlayerEvent.QUALITY_CHANGED,i),n.on(u.PlayerEvent.AUTO_SWITCH_QUALITY_CHANGED,i),n.on(u.PlayerEvent.DURATION_CHANGED,i),n.on(u.PlayerEvent.VOLUME_CHANGED,(function(){return e.onVolumeChanged()})),n.on(u.PlayerEvent.MUTED_CHANGED,(function(){return e.onMutedChanged()})),n.on(u.PlayerEvent.SEEK_COMPLETED,(function(){return e.onSeekCompleted()})),n.on(u.PlayerEvent.ERROR,(function(){return e.onError()})),n.on(u.PlayerEvent.SESSION_DATA,(function(t){return e.onSessionData(t)})),n.on(1,(function(t){return f.objectAssign(e.stats,t)})),n.on(0,(function(t){return e.onStateChanged(t)})),n.on(6,(function(t){return e.mediaSinkManager.applyRPC(t)})),n.on(2,(function(t){return e.mediaSinkManager.configure(t)})),n.on(3,(function(){return e.mediaSinkManager.reset()})),n.on(4,(function(t){return e.addCue(t)})),n.on(5,(function(t){return e.getDecodingInfo(t)})),n.on(a.MetadataEvent.ID3,(function(t){return e.onID3(t)})),n.on(7,(function(t){e.experimentIds=t}))},e.prototype.onVolumeChanged=function(){var e=f.getVisibilityPropNames(document).hidden;E&&document[e]&&0===this.getVolume()&&this.postMessage("pause")},e.prototype.onMutedChanged=function(){var e=f.getVisibilityPropNames(document).hidden;E&&document[e]&&this.isMuted()&&this.postMessage("pause")},e.prototype.onSeekCompleted=function(){this.seekTime=null},e.prototype.onError=function(){this.paused=!0},e.prototype.onStateChanged=function(e){var t=this;switch(e.playerState){case p.PlayerState.READY:var n=f.filterQualities(e.qualities,this.isQualitySupported);e.qualities=n.supported,n.unsupported.forEach((function(e){return t.postMessage("removeQuality",[e])})),this.isLoaded=!0,this.autoplay&&this.play(),this.paused||this.attemptPlay();break;case p.PlayerState.ENDED:this.paused=!0}f.objectAssign(this.state,e),this.emitter.emit(e.playerState)},e.prototype.addCue=function(e){var t=this,n=e.id,i=e.start,r=e.end;this.mediaSinkManager.getCurrentSink().addCue(i,r,(function(e){t.postMessage("onClientSinkCue",[n,e])}))},e.prototype.onID3=function(e){var t=this;e.forEach((function(e){if("TXXX"===e.id&&"segmentmetadata"===e.desc&&e.info.length){var n=f.safeParseJSON(e.info[0]);if(n.hasOwnProperty("stream_offset")){var i=Number(n.stream_offset);isNaN(i)||(t.state.startOffset=i-t.getPosition())}}}))},e.prototype.onVisibilityChange=function(){var e=f.getVisibilityPropNames(document).hidden;this.paused||document[e]||this.attemptPlay(),E&&!this.paused&&document[e]&&(this.isMuted()||0===this.getVolume())&&this.postMessage("pause"),this.postMessage("setVisible",[!document[e]])},e.prototype.onSessionData=function(e){f.objectAssign(this.state,e)},e.prototype.onWorkerMessage=function(e){var t=e.data,n=t.type,i=t.id,r=t.arg;i===this.id&&(void 0!==t.arg?this.emitter.emit(n,r):this.emitter.emit(n))},e.createWorker=v,e.instanceId=0,e}();t.MediaPlayer=g},function(e,t,n){"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),i(n(41)),i(n(16)),i(n(15)),i(n(12)),i(n(11)),i(n(10)),i(n(9)),i(n(8)),i(n(14))}])}).call(this,n("yLpj"))}}]);