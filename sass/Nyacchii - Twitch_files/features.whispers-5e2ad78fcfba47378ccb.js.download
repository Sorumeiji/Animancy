(window.webpackJsonp=window.webpackJsonp||[]).push([[110],{"+pBb":function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return a})),n.d(t,"h",(function(){return o})),n.d(t,"i",(function(){return s})),n.d(t,"p",(function(){return c})),n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return l})),n.d(t,"f",(function(){return u})),n.d(t,"g",(function(){return m})),n.d(t,"e",(function(){return p})),n.d(t,"k",(function(){return h})),n.d(t,"j",(function(){return f})),n.d(t,"m",(function(){return v})),n.d(t,"l",(function(){return g})),n.d(t,"o",(function(){return k})),n.d(t,"r",(function(){return b})),n.d(t,"q",(function(){return S})),n.d(t,"u",(function(){return y})),n.d(t,"t",(function(){return E})),n.d(t,"v",(function(){return _})),n.d(t,"n",(function(){return C})),n.d(t,"s",(function(){return N})),n.d(t,"J",(function(){return D})),n.d(t,"E",(function(){return w})),n.d(t,"N",(function(){return O})),n.d(t,"L",(function(){return I})),n.d(t,"H",(function(){return T})),n.d(t,"C",(function(){return F})),n.d(t,"I",(function(){return j})),n.d(t,"D",(function(){return P})),n.d(t,"G",(function(){return U})),n.d(t,"B",(function(){return M})),n.d(t,"K",(function(){return x})),n.d(t,"F",(function(){return A})),n.d(t,"y",(function(){return R})),n.d(t,"w",(function(){return L})),n.d(t,"x",(function(){return W})),n.d(t,"A",(function(){return B})),n.d(t,"M",(function(){return V})),n.d(t,"z",(function(){return G})),n.d(t,"O",(function(){return q})),n.d(t,"Q",(function(){return H})),n.d(t,"P",(function(){return z}));var i=n("Tznh"),r="chat.CHAT_HIDDEN",a="chat.CHAT_SHOWN",o="chat.EMOTE_SETS_UPDATED",s="chat.FOLLOWER_MODE_DURATION_PREFERENCE_CHANGED",c="chat.SLOW_MODE_DURATION_PREFERENCE_CHANGED",d="chat.AUTOMOD_ACTIONS_ENABLED",l="chat.AUTOMOD_ACTIONS_DISABLED",u="chat.EMOTE_PICKER_CLOSED",m="chat.EMOTE_PICKER_OPENED",p="chat.CLOSE_CHAT_RULES",h="chat.MODERATION_ACTIONS_ENABLED",f="chat.MODERATION_ACTIONS_DISABLED",v="chat.MOD_ICONS_ENABLED",g="chat.MOD_ICONS_DISABLED",k="chat.SHOW_CHAT_RULES",b="chat.TIMESTAMPS_ENABLED",S="chat.TIMESTAMPS_DISABLED",y="chat.VIEWER_CHAT_FILTER_ENABLED",E="chat.VIEWER_CHAT_FILTER_DISABLED",_="chat.VIEWER_CHAT_FILTER_SETTINGS_CHANGED",C="chat.RENDER_SENT_CHAT_MESSAGE",N="chat.UNHIDE_IGNORED_COMMAND";function D(){return{type:b}}function w(){return{type:S}}function O(){return{type:a}}function I(){return{type:r}}function T(){return{type:d}}function F(){return{type:l}}function j(){return{type:h}}function P(){return{type:f}}function U(){return{type:v}}function M(){return{type:g}}function x(e){return{type:y,source:e||i.c.Other}}function A(e){return{type:E,source:e||i.c.Other}}function R(e,t){return{type:_,settings:e,source:t||i.c.Other}}function L(e,t){return{type:s,channelLogin:e,duration:t}}function W(e,t){return{type:c,channelLogin:e,duration:t}}function B(){return{type:u}}function V(){return{type:m}}function G(){return{type:p}}function q(){return{type:k}}function H(e){return{type:C,customEvent:e}}function z(e){return{type:N,userID:e}}},"0FG4":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return d}));var i,r=n("RcPG"),a=n("a1OF");!function(e){e[e.Position=0]="Position",e[e.Token=1]="Token"}(i||(i={}));var o="0";function s(e,t,n){var o,s,c=n.type===i.Position?t:e,d=n.map[c];if(d){var l=(o=e,s=d.id,{images:{sources:{"1x":Object(a.d)(s,1),"2x":Object(a.d)(s,2),"4x":Object(a.d)(s,4)},themed:!1},alt:o,emoteID:s});return{type:r.a.Emote,content:l}}return null}var c={"\\:\\&gt\\;":[":>"],"\\&gt\\;\\(":[">("],"\\&lt\\;\\]":["<]"],"\\&lt\\;3":["<3"],":-?(?:7|L)":[":-7",":-L",":7",":L"],"[oO](_|\\.)[oO]":["o_o","O_O","o_O","O_o","o.o","O.O","o.O","O.o"],"\\;-?(p|P)":[";-p",";-P",";p",";P"],"\\;-?\\)":[";-)",";)"],"\\:-?(o|O)":[":-o",":-O",":o",":O"],"\\:-?(p|P)":[":-p",":-P",":p",":P"],"\\:-?(S|s)":[":-S",":-s",":s",":S"],"\\:-?[\\\\/]":[":-/",":-\\",":/",":\\"],"\\:-?[z|Z|\\|]":[":-|",":-Z",":-z",":|",":Z",":z"],"\\:-?\\(":[":-(",":("],"\\:-?\\)":[":-)",":)"],"\\:-?D":[":-D",":D"],"#-?[\\\\/]":["#-/","#-\\","#/","#\\"],"B-?\\)":["B-)","B)"],"R-?\\)":["R-)","R)"]};function d(e){for(var t={},n=0,i=e;n<i.length;n++){var r=i[n];if(r&&r.emotes)for(var a=0,s=r.emotes;a<s.length;a++){var d=s[a];if(d&&d.id&&d.token)for(var l=0,u=c[d.token]||[d.token];l<u.length;l++){var m=u[l];t[m]&&r.id===o||(t[m]={id:d.id,token:m})}}}return t}},"0JUI":function(e,t,n){},"0b9U":function(e,t,n){"use strict";var i=n("mrSG"),r=n("q1tI"),a=n("/7QA"),o=n("yR8l"),s=n("geRD"),c=n("PrJw"),d=n("sUnt"),l=n("k0nM"),u=n("4wKg"),m=n("N6NX"),p=function(e){function t(t){var n=e.call(this,t)||this;return n.markAllWhispersAsRead=function(){var e=Object(s.a)({markAllAsRead:!0});n.props.markAllWhispersAsRead&&(Object(c.i)(),n.props.markAllWhispersAsRead(e)),n.props.onMarkAllMessagesRead&&n.props.onMarkAllMessagesRead()},n.toggleDoNotDisturb=function(){n.state.doNotDisturb?(a.n.set("whisperDoNotDisturb",!1),Object(c.f)(),n.setState({doNotDisturb:!1})):(a.n.set("whisperDoNotDisturb",!0),Object(c.g)(),n.setState({doNotDisturb:!0}))},n.state={doNotDisturb:a.n.get("whisperDoNotDisturb",!1)},n}return Object(i.__extends)(t,e),t.prototype.render=function(){var e=this.state.doNotDisturb?Object(a.d)("Disable Do Not Disturb","ThreadsBoxSettings"):Object(a.d)("Enable Do Not Disturb","ThreadsBoxSettings"),t=Object(a.d)("Mark All Whispers as Read","ThreadsBoxSettings");return r.createElement(d.a,{className:"threads-box-settings"},r.createElement(l.a,{show:!0},r.createElement(u.a,{label:e,onClick:this.toggleDoNotDisturb,ariaLabel:e}),r.createElement(u.a,{label:t,onClick:this.markAllWhispersAsRead,ariaLabel:t})))},t=Object(i.__decorate)([Object(o.a)(m,{name:"markAllWhispersAsRead"})],t)}(r.Component);n.d(t,"a",(function(){return p}))},"1MDS":function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return p})),n.d(t,"b",(function(){return h}));var i=n("mrSG"),r=n("/7QA"),a=n("2xye"),o=n("oK83"),s=n("P5MF"),c=n("nR4f"),d=n("P6kH"),l={Unknown:"unknown",Chat:"chat",Room:"room",Whisper:"whisper",Vod:"vod"},u={Close:"close",ReportDropDown:"report_drop_down",Report:"report",Follow:"follow",Unfollow:"unfollow",Subscribe:"subscribe",ClickTryPrime:"click_try_prime",GoToChannel:"go_to_channel",Open:"open",ClickChannelName:"click_channel_name",CloseClickOtherEmote:"close_click_other_emote"},m={Available:"available",CreatorBanned:"creator_banned",LimitedTimeEmote:"limited_time_emote",GlobalEmote:"global_emote",Prime:"prime",Turbo:"turbo",OtherUnlockable:"other_unlockable"};function p(e){return Object(i.__awaiter)(this,void 0,void 0,(function(){var t,n,o,l,u,m,p,h,v,g,k,b,S,y,E,_;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:t={emoteID:e.emoticonID},n=null,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,r.p.apollo.client.query({query:c,variables:t})];case 2:return n=i.sent(),[3,4];case 3:return o=i.sent(),r.k.warn(o,"Failed to make query for emote info in EmoteCard reporting.",{emoteID:e.emoticonID}),[3,4];case 4:l=n&&n.data&&n.data.emote||null,n&&!l&&r.k.warn("Query for emote info in EmoteCard reporting returned no data.",{emoteID:e.emoticonID}),u=n&&n.data?Object(d.d)(n.data):d.a.Unknown,m=l&&l.subscriptionProduct&&l.subscriptionProduct.owner&&l.subscriptionProduct.owner.displayName||"",p=l&&l.subscriptionProduct&&l.subscriptionProduct.owner&&l.subscriptionProduct.owner.id||"",u===d.a.OWL2019&&(m=d.b,p=d.c),h={channelID:p},v=null,i.label=5;case 5:return i.trys.push([5,7,,8]),[4,r.p.apollo.client.query({query:s,variables:h})];case 6:return v=i.sent(),[3,8];case 7:return g=i.sent(),r.k.warn(g,"Failed to make query for channel info in EmoteCard reporting.",{channelID:p}),[3,8];case 8:return k=v&&v.data&&v.data.user||null,v&&!k&&r.k.warn("Query for channel info in EmoteCard reporting returned no data.",{channelID:p}),b=!!k&&!!k.hasPrime,S=k&&k.self,y=!!S&&!!S.subscriptionBenefit,E=!!S&&!!S.canPrimeSubscribe,_={emote_location:e.emoteLocation,emoticon_id:e.emoticonID,chat_channel:e.chatChannel,chat_channel_id:e.chatChannelID,emote_channel:m,emote_channel_id:p,referrer_user_id:e.referrerUserID,action:e.action,is_subscribed:y,is_subscribed_tier:S&&S.subscriptionBenefit&&S.subscriptionBenefit.tier||"",emote_tier:l&&l.subscriptionProduct&&l.subscriptionProduct.tier||"",emote_status:f(u),has_prime:b,can_subscribe:E,msg_id:e.msgID},r.o.track(a.SpadeEventType.EmoteCardInteraction,_),[2]}}))}))}function h(e){switch(e){case o.a.chat:return l.Chat;case o.a.whisper:return l.Whisper;case o.a.vod:return l.Vod;case o.a.room:return l.Room;case o.a.unknown:default:return l.Unknown}}function f(e){switch(e){case d.a.Prime:return m.Prime;case d.a.Turbo:return m.Turbo;case d.a.OWL2019:case d.a.Subscription:return m.Available;case d.a.LimitedTime:return m.LimitedTimeEmote;case d.a.Unavailable:return m.CreatorBanned;case d.a.Global:return m.GlobalEmote;case d.a.Unknown:default:return m.OtherUnlockable}}},"28vT":function(e,t,n){},"2Dht":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"WhisperThread"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"whisperThread"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"userLastMessageRead"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sentAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"unreadMessagesCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"messages"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"20"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cursor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nonce"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emotes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emoteID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"from"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"to"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"from"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"sentAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"editedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"deletedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:347}};n.loc.source={body:"query WhisperThread($id: ID!) {\nwhisperThread(id: $id) {\nid\nuserLastMessageRead {\nid\nsentAt\n__typename\n}\nunreadMessagesCount\nmessages(first: 20) {\nedges {\ncursor\nnode {\nid\nnonce\ncontent {\ncontent\nemotes {\nid\nemoteID\nsetID\nfrom\nto\n__typename\n}\n__typename\n}\nfrom {\nid\n}\nsentAt\neditedAt\ndeletedAt\n__typename\n}\n__typename\n}\n__typename\n}\n__typename\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function r(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.WhisperThread=function(e,t){var n={kind:e.kind,definitions:[r(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var a=i[t]||new Set,o=new Set,s=new Set;for(a.forEach((function(e){s.add(e)}));s.size>0;){var c=s;s=new Set,c.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=r(e,t);i&&n.definitions.push(i)})),n}(n,"WhisperThread")},"2zj6":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UnlockModifiedEmote"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UnlockChosenModifiedSubscriberEmoteInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"unlockChosenModifiedSubscriberEmote"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"balance"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:161}};n.loc.source={body:"mutation UnlockModifiedEmote($input: UnlockChosenModifiedSubscriberEmoteInput!) {\nunlockChosenModifiedSubscriberEmote(input: $input) {\nbalance\nerror {\ncode\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function r(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.UnlockModifiedEmote=function(e,t){var n={kind:e.kind,definitions:[r(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var a=i[t]||new Set,o=new Set,s=new Set;for(a.forEach((function(e){s.add(e)}));s.size>0;){var c=s;s=new Set,c.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=r(e,t);i&&n.definitions.push(i)})),n}(n,"UnlockModifiedEmote")},"35qb":function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"subscriptionProductPriceInfo"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PriceInfo"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currency"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"exponent"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"price"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isTaxInclusive"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tax"},arguments:[],directives:[]}]}}],loc:{start:0,end:118}};n.loc.source={body:"fragment subscriptionProductPriceInfo on PriceInfo {\ncurrency\nexponent\ntotal\ndescription\nprice\nisTaxInclusive\nid\ntax\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"3YIm":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SendWhisper"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"SendWhisperInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sendWhisper"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nonce"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emotes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emoteID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"from"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"to"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"from"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"sentAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"editedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"deletedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"thread"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"participants"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"whisperPermissions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"receive"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:352}};n.loc.source={body:"mutation SendWhisper($input: SendWhisperInput!) {\nsendWhisper(input: $input) {\nmessage {\nid\nnonce\ncontent {\ncontent\nemotes {\nid\nemoteID\nsetID\nfrom\nto\n__typename\n}\n__typename\n}\nfrom {\nid\n__typename\n}\nsentAt\neditedAt\ndeletedAt\nthread {\nid\nparticipants {\nid\nself {\nwhisperPermissions {\nreceive\n}\n}\n}\n}\n__typename\n}\nerror {\ncode\n__typename\n}\n__typename\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function r(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.SendWhisper=function(e,t){var n={kind:e.kind,definitions:[r(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var a=i[t]||new Set,o=new Set,s=new Set;for(a.forEach((function(e){s.add(e)}));s.size>0;){var c=s;s=new Set,c.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=r(e,t);i&&n.definitions.push(i)})),n}(n,"SendWhisper")},"3iFw":function(e,t,n){"use strict";n.r(t);n("t6r+");var i,r,a=n("/MKj"),o=n("XDQu"),s=n("CzFK"),c=n("l1Uh"),d=n("mrSG"),l=n("TSYQ"),u=n("w09P"),m=n("q1tI"),p=n("0dmp"),h=n("hbnN"),f=n("/7QA"),v=n("ZS2+"),g=n("yR8l"),k=n("eDVu"),b=n("0Log"),S=n("geRD"),y=n("/aPz"),E=n("u5aL"),_=n("8/mp"),C=n("eJ65"),N=n("yLwq"),D=n("f00E"),w=n("kz7j"),O=n("GnwI"),I=n("H/lO"),T=n("NZDK"),F=n("88lE"),j=n("0b9U"),P=n("A++4"),U=n("RKC5"),M=n("NMMG"),x=n("PrJw"),A=n("Ws8v"),R=n("hnjF"),L=n("sUnt"),W=n("HH5h"),B=n("+80q"),V=n("X2PJ"),G=n("wp5a"),q=n("i4Ys"),H=n("7uM4"),z=n("C7sF"),Q=n("XQbB"),K=n("7d/q"),X=n("ygYM"),Y=n("3Law"),$=(n("dNN/"),function(e){function t(t){var n=e.call(this,t)||this;return n.onMarkAllMessagesRead=function(){n.settingsMenu.toggleBalloon(!1)},n.renderUserSearchResult=function(e,t){var i=Object(U.p)(e.name),r=e.profile_image||Object(N.c)(e.objectID,30);return m.createElement("div",{key:"searchResult:"+e.objectID,onClick:n.handleUserSearchResultClick(e,t)},m.createElement(A.a,{className:"whispers-list-item",borderBottom:!0,padding:1,"data-a-target":"whisper-search-result-"+e.login,display:R.d.Flex,flexDirection:R.e.Row,flexWrap:R.f.NoWrap,fullWidth:!0,alignItems:R.b.Center},m.createElement(L.a,{margin:{right:.5},flexShrink:0},m.createElement(W.a,{size:30,src:r,alt:i,userLogin:e.login})),m.createElement(L.a,{fullWidth:!0,display:R.d.Flex,flexDirection:R.e.Column},m.createElement(B.a,{fontSize:V.d.Size5,bold:!0},e.login),m.createElement(L.a,null," "))))},n.saveSettingsMenuRef=function(e){return n.settingsMenu=e},n.handleConversationsClick=function(){n.state.open||(n.props.latencyTracking.resetCustomEvents(w.a.Whispers),n.whispersHistoryLatencyEvent=n.props.latencyTracking.registerCustomEvent({benchmark:200,group:w.a.Whispers,key:w.b.WhispersHistory,label:w.c.History,start:w.d.Registration})),n.setState((function(e){return{open:!e.open}}))},n.selectThread=function(e){n.handleClose(),n.clearSearchText(),n.props.selectThread(e)},n.handleClose=function(){n.setState({open:!1})},n.clearSearchText=function(){n.setState({searchText:"",searching:!1})},n.onSearchInputChange=function(e){return Object(d.__awaiter)(n,void 0,void 0,(function(){var t,n=this;return Object(d.__generator)(this,(function(i){return t=e.currentTarget.value,clearTimeout(this.inputTimeout),t&&0!==t.length?(this.setState({searchText:t,searching:!0}),this.inputTimeout=setTimeout((function(){n.search(n.state.searchText)}),200),[2]):(this.inputTimeout=0,this.clearSearchText(),[2])}))}))},n.handleUserSearchResultClick=function(e,t){return function(){var i=e.objectID;if(null!==n.props.currentUserID&&i!==n.props.currentUserID){n.handleClose(),n.clearSearchText();var r=Object(M.a)(n.props.currentUserID,i);Object(x.e)({threadID:r,targetUserlogin:e.login,searchResultRank:t}),Object(x.b)({searchResultRank:t,searchQuery:n.state.searchText,isConversation:!1}),n.props.selectThread(r)}}},n.filterExistingThreads=function(e){var t=e.toLowerCase();return n.props.orderedThreadIDs.filter((function(e){var i=Object(P.a)(n.props.threadsByID[e].participants,n.props.currentUserID);return!(!i||!i.displayName)&&i.displayName.toLowerCase().indexOf(t)>=0}))},n.searchClient=new T.a({appId:f.a.algoliaApplicationID,apiKey:f.a.algoliaAPIKey,apolloClient:f.p.apollo.client,logger:f.k,config:f.a,stats:f.p.stats}),n.state={open:!1,searchText:"",searching:!1},n}return Object(d.__extends)(t,e),t.prototype.render=function(){return m.createElement(E.a,{onClickOut:this.handleClose},m.createElement(V.f,{className:"whispers-threads-box__container "+(this.state.open?"whispers-threads-box__container--open":""),display:R.d.Flex,flexDirection:R.e.Column,flexWrap:R.f.NoWrap,borderTop:!0,borderRight:!0,borderLeft:!0,background:V.a.Base,position:R.j.Absolute,attachBottom:!0,attachRight:!0,"data-click-out-id":"threads-box","data-a-target":"threads-box-"+(this.state.open?"open":"closed"),borderRadius:{topLeft:V.b.Medium,topRight:V.b.Medium}},m.createElement("div",{"aria-label":Object(U.r)()},this.renderHeader(),this.renderList(),this.renderFooter())))},t.prototype.renderOpenCloseButton=function(){var e=null;if(this.props.unreadCount>0){var t=this.props.unreadCount>99?"99+":this.props.unreadCount.toString();e=m.createElement(L.a,{className:"whispers-threads-box__unread",position:R.j.Absolute},m.createElement(G.a,{"data-a-target":"whisper-unreads",label:t,type:G.b.Notification}))}return m.createElement(A.a,{position:R.j.Relative,background:V.a.Alt,display:R.d.Flex,alignItems:R.b.Center,justifyContent:R.h.Center},e,m.createElement(A.a,{background:V.a.Alt,display:R.d.Flex,fullWidth:!0},m.createElement(q.a,{ariaLabel:Object(U.a)(),onClick:this.handleConversationsClick,type:q.b.Alpha,"data-a-target":"whisper-box-button"},m.createElement(A.a,{display:R.d.Flex,padding:1},m.createElement(H.a,{asset:z.a.Whisper})))))},t.prototype.renderList=function(){var e,t=this;if(!this.state.open)return null;var n=null;""!==this.state.searchText&&(n=m.createElement(A.a,{key:"otherPeopleDivider",borderBottom:!0,padding:{x:1,y:.5}},Object(U.h)()));var i=null;if(this.state.searching?i=m.createElement(L.a,{display:R.d.Flex,flexDirection:R.e.Column,margin:{top:4},alignItems:R.b.Center},m.createElement(Q.a,{delay:0})):this.state.searchResults&&this.state.searchResults.users&&""!==this.state.searchText&&(i=this.state.searchResults.users.totalHits>0?this.state.searchResults.users.hits.filter((function(e){return!t.props.threadsByID[e.objectID]})).map(this.renderUserSearchResult):m.createElement(L.a,{display:R.d.Flex,flexDirection:R.e.Column,margin:{top:4},alignItems:R.b.Center},m.createElement(B.a,{color:V.c.Alt2},Object(U.c)()))),this.props.error)e=m.createElement(L.a,{margin:{x:"auto"},display:R.d.Flex,justifyContent:R.h.Center,alignItems:R.b.Center,fullHeight:!0},m.createElement(B.a,{color:V.c.Error},Object(U.i)()));else if(this.props.loading)e=m.createElement(Q.a,null);else{var r=this.props.orderedThreadIDs;""!==this.state.searchText&&(r=this.filterExistingThreads(this.state.searchText)),e=r.filter((function(e){return t.props.threadsByID[e]&&!t.props.threadsByID[e].archived})).map((function(e,n){var i=0===n?function(){t.props.latencyTracking.reportCustomEvent(t.whispersHistoryLatencyEvent)}:void 0,r=t.props.threadsByID[e],a=Object(P.a)(r.participants,t.props.currentUserID);return a?m.createElement(F.a,{key:"whisperThread:"+r.id,user:a,threadID:r.id,lastMessage:r.lastMessage,archiveThread:t.props.archiveThread,selectThread:t.selectThread,unreadMessageCount:r.unreadMessagesCount,muted:r.muted,avatarOnLoadCallback:i}):null}))}return m.createElement(_.b,{suppressScrollX:!0},m.createElement("div",{role:"list"},e,n,i,m.createElement(_.a,{enabled:this.state.open,loadMore:this.props.loadMore,pixelThreshold:200})))},t.prototype.renderHeader=function(){return this.state.open?m.createElement(A.a,{className:"whispers-threads-box__header","data-a-target":"whispers-threads-box__header",alignItems:R.b.Center,background:V.a.Alt,borderBottom:!0,color:V.c.Base,display:R.d.Flex,flexDirection:R.e.Row,flexGrow:0,flexShrink:0,padding:{y:.5,x:1},"data-click-hide-id":"threads-box-header"},m.createElement(R.g,{flexGrow:1,display:R.d.Flex},m.createElement("div",{id:"whispers-box-header"},m.createElement(B.a,{type:B.e.Span,bold:!0},Object(U.q)()))),m.createElement(C.a,{ref:this.saveSettingsMenuRef},m.createElement(K.a,{ariaLabel:Object(U.k)(),icon:z.a.Gear,"data-a-target":"whisper-settings-button"}),m.createElement(X.a,{size:X.c.Small,direction:X.b.BottomRight,offsetX:"0.5rem"},m.createElement(j.a,{onMarkAllMessagesRead:this.onMarkAllMessagesRead}))),m.createElement(K.a,{ariaLabel:Object(U.b)(),icon:z.a.Minimize,onClick:this.handleClose,"data-a-target":"whisper-close-button"})):null},t.prototype.renderFooter=function(){return this.state.open?m.createElement(A.a,{display:R.d.Flex,flexGrow:0,flexShrink:0,alignItems:R.b.Center,borderTop:!0,background:V.a.Alt},m.createElement(L.a,{flexGrow:1,padding:{top:.5,bottom:.5,left:1}},m.createElement(Y.a,{onChange:this.onSearchInputChange,value:this.state.searchText,placeholder:Object(U.j)(),id:"threads-box-filter",autoFocus:!0,"data-a-target":"whisper-search-input"})),this.renderOpenCloseButton()):this.renderOpenCloseButton()},t.prototype.search=function(e){return Object(d.__awaiter)(this,void 0,void 0,(function(){var t;return Object(d.__generator)(this,(function(n){switch(n.label){case 0:return e?[4,this.searchClient.queryForType(I.a.Users,e,D.b())]:[2];case 1:return t=n.sent(),this.setState({searchResults:t,searching:!1}),[2]}}))}))},t=Object(d.__decorate)([Object(O.withLatencyTracking)("WhisperCenter",{autoReportInteractive:!0})],t)}(m.Component)),J=n("szP+"),Z=n("MJbm"),ee=n("fvjX"),te=n("XDCx"),ne=n("kRBY"),ie=n("/HY+"),re=n("WSPL"),ae=n("ZDlU"),oe=n("x7UT"),se=n("8Ad5"),ce=n("Mj6i"),de=n("DMoW"),le=n("okS7"),ue=n("mmRu"),me=n("cpJf"),pe=n("DqQV"),he=n("fg2I"),fe=n("3rL5"),ve=n("bAm+"),ge=n("TOso"),ke=n("xJpr"),be=n("E6aA"),Se=(n("28vT"),n("Jpf8")),ye=n("4VGW");!function(e){e.Wrapper="thread__wrapper",e.StrangerNotice="stranger__warning"}(r||(r={}));var Ee=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={strangerWarningDismissed:!1},t.hasHadError=!1,t.onEmoticonClick=function(e){if(t.autocompleteInput){var n=t.autocompleteInput.getValue();n&&n.length>0&&!n.endsWith(" ")&&(n+=" "),n+=e+" ",t.autocompleteInput.setValue(n)}},t.onBlock=function(e){t.addNotification(Object(U.n)()),t.props.onBlock&&t.props.onBlock(e)},t.onUnblock=function(){t.addNotification(Object(U.o)())},t.loadMore=function(){return Object(d.__awaiter)(t,void 0,void 0,(function(){return Object(d.__generator)(this,(function(e){return this.props.data.loading||this.hadError?[2]:[2,this.props.loadMore()]}))}))},t.addNotification=function(e){t.props.notifyWhisperThread(t.props.threadID,e,t.getLastMessageID())},t.getLastMessageID=function(){if(t.props.data.whisperThread&&t.props.data.whisperThread.messages&&t.props.data.whisperThread.messages.edges[0])return t.props.data.whisperThread.messages.edges[0].node.id},t.shouldShowUnverifiedNotice=function(){return!!t.props.data.currentUser&&!t.props.data.currentUser.isEmailVerified},t.handleHeaderInteract=function(){t.props.collapsed?t.expand():t.collapse()},t.expand=function(){t.props.data.currentUser&&Object(x.h)(t.props.threadID),t.props.onExpand(t.props.threadID)},t.onClickOut=function(){t.props.focused&&t.props.onUnfocus(t.props.threadID)},t.handleClose=function(){t.props.data.currentUser&&Object(x.c)(t.props.threadID),t.props.onClose(t.props.threadID)},t.collapse=function(){t.props.data.currentUser&&Object(x.d)(t.props.threadID),t.props.onCollapse(t.props.threadID)},t.handleKeydown=function(e){if((e.charCode||e.keyCode)===se.a.Enter&&t.autocompleteInput){var n=t.autocompleteInput.getValue();t.autocompleteInput.setValue(""),t.sendWhisper(n)}},t.handleClick=function(){t.props.onFocus(t.props.threadID),t.markThreadMessagesAsRead()},t.onStrangerWarningConfirmation=function(){t.setState({strangerWarningDismissed:!0})},t.markThreadMessagesAsRead=function(){if(!t.props.data.loading&&!t.hadError&&t.props.data.whisperThread&&t.props.data.whisperThread.messages&&0!==t.props.data.whisperThread.messages.edges.length&&0!==t.props.data.whisperThread.unreadMessagesCount){var e=t.props.data.whisperThread&&+t.props.data.whisperThread.messages.edges[0].cursor;e&&!isNaN(e)||(e=0),Object(ve.a)({threadID:t.props.threadID,lastReadMessageID:t.props.data.whisperThread&&t.props.data.whisperThread.messages.edges[0].node.id||""},e,!1)}},t.sendWhisper=function(e){if(""!==e){t.props.latencyTracking.resetCustomEvents(w.a.Whispers),t.outgoingWhisperRenderedEvent=t.props.latencyTracking.registerCustomEvent({benchmark:150,group:w.a.Whispers,key:w.b.WhispersRenderSent,label:w.c.RenderSent,start:w.d.Registration}),t.outgoingWhisperMessage=e;var n=Object(M.b)(t.props.threadID,t.props.currentUserID);n?(t.props.data.currentUser&&t.interlocutor&&t.interlocutor.login&&Object(x.m)({threadID:t.props.threadID,targetUserLogin:t.interlocutor.login,inChannelChat:!1}),Object(ge.a)({currentUserID:t.props.currentUserID,emotes:t.props.emoteSetsData&&t.props.emoteSetsData.emoteMap||{},message:e,recipientUserID:n}).then((function(e){if(e.data&&e.data.sendWhisper&&e.data.sendWhisper.error){var n=void 0;switch(e.data.sendWhisper.error.code){case de.Ic.TARGET_RESTRICTED:n=Object(U.f)();break;case de.Ic.BODY_EMPTY:n=Object(U.e)();break;case de.Ic.TARGET_BANNED:n=Object(U.g)();break;default:n=Object(U.d)()}var i=void 0;t.props.data.whisperThread&&t.props.data.whisperThread.messages&&t.props.data.whisperThread.messages.edges.length>0&&(i=t.props.data.whisperThread.messages.edges[0].node.id),t.props.notifyWhisperThread(t.props.threadID,n,i)}}))):f.k.warn("Unable to parse whisper recipient ID.")}},t.setAutocompleteInnerComponentRef=function(e){t.textInput=e},t.setAutocompleteInputRef=function(e){return t.autocompleteInput=e},t.handleContentClick=function(){var e=document.getSelection();!t.textInput||e&&e.toString()||t.textInput.focus()},t.setContainerRef=function(e){t.autocompleteContainer=e},t.reportOutgoingWhisperRendered=function(e){t.outgoingWhisperRenderedEvent&&e===t.outgoingWhisperMessage&&t.props.latencyTracking.reportCustomEvent(t.outgoingWhisperRenderedEvent)},t.otherParticipant=function(){var e=t.props.data.whisperThread;if(e)return Object(P.a)(e.participants,t.props.currentUserID)},t.hasUnknownParticipant=function(){var e=t.otherParticipant();return!(e&&e.login)},t.isStrangerBlocked=function(){return!!(t.interlocutor&&t.interlocutor.id&&t.interlocutor.self&&t.interlocutor.self.whisperPermissions&&t.interlocutor.self.whisperPermissions.isStrangerBlocked)},t.shouldDisableInteractions=function(){return t.hasUnknownParticipant()},t}return Object(d.__extends)(t,e),Object.defineProperty(t.prototype,"hadError",{get:function(){return!!this.props.data.error||this.hasHadError},enumerable:!0,configurable:!0}),t.prototype.componentDidMount=function(){this.props.data.loading||this.markSuspendedUserThreadRead()},t.prototype.componentDidUpdate=function(e){var t=this;this.props.data.error&&(this.hasHadError=!0),this.props.data.error||this.props.data.loading||!this.props.data.whisperThread||this.props.reportThreadData(this.props.threadID,this.props.data.whisperThread),e.data.loading&&!this.props.data.loading&&this.markSuspendedUserThreadRead(),this.props.focused&&this.shouldShowUnverifiedNotice()&&this.markThreadMessagesAsRead();var n=e.data&&e.data.whisperThread&&e.data.whisperThread.messages&&e.data.whisperThread.messages.edges.length||0,i=this.props.data&&this.props.data.whisperThread&&this.props.data.whisperThread.messages&&this.props.data.whisperThread.messages.edges.length||0;this.isStrangerBlocked()&&n!==i&&Object(S.i)(Se,{id:this.props.threadID},(function(e){var n=e.whisperThread;if(n&&n.participants){var i=Object(P.a)(n.participants,t.props.currentUserID);i&&i.self&&i.self.whisperPermissions&&(i.self.whisperPermissions.isStrangerBlocked=!1)}return e}))},Object.defineProperty(t.prototype,"interlocutor",{get:function(){return this.otherParticipant()},enumerable:!0,configurable:!0}),t.prototype.render=function(){var e=l({"whispers-thread":!0,"whispers-thread--collapsed":this.props.collapsed,"whispers-thread--focused":this.props.focused});if(this.props.hidden)return null;var t,n=this.props.activityData.loading?void 0:this.props.activityData.user,i=n&&n.availability||void 0,a=n&&n.activity;return t=!this.state.strangerWarningDismissed&&this.interlocutor&&this.interlocutor.id&&this.interlocutor.self&&this.interlocutor.self.whisperPermissions&&this.interlocutor.self.whisperPermissions.receive===de.zd.NOT_PERMITTED?m.createElement(pe.a,{onStrangerWarningConfirmation:this.onStrangerWarningConfirmation,targetDisplayName:this.interlocutor.displayName,targetUserID:this.interlocutor.id}):this.renderMessageArea(),m.createElement(E.a,{onClickOut:this.onClickOut},m.createElement(A.a,{className:e,display:R.d.Flex,flexDirection:R.e.ColumnReverse,flexShrink:0,flexGrow:0,position:R.j.Relative,overflow:R.i.Hidden,background:V.a.Base,margin:{left:1},alignItems:R.b.Center,justifyContent:R.h.End,"data-test-selector":r.Wrapper,"data-a-target":"whisper-thread-"+(this.interlocutor&&this.interlocutor.login)+(this.props.collapsed?"-collapsed":""),elevation:3,borderRadius:{topLeft:V.b.Medium,topRight:V.b.Medium}},t,m.createElement(L.a,{fullWidth:!0,flexShrink:0,display:R.d.Flex,alignItems:R.b.Center,attachTop:!0,attachLeft:!0},m.createElement(he.a,{isHighlighted:!!(this.props.data.whisperThread&&this.props.data.whisperThread.unreadMessagesCount>0),isFocused:!!this.props.focused,isMuted:!!this.props.data.whisperThread&&this.props.data.whisperThread.isMuted,isCollapsed:this.props.collapsed,isLoading:this.props.data.loading||this.props.activityData.loading,interactionsDisabled:this.shouldDisableInteractions(),currentUser:this.props.data.currentUser,interlocutor:this.interlocutor,interlocutorAvailability:i,interlocutorActivity:a,spamInfo:this.props.data.whisperThread&&this.props.data.whisperThread.spamInfo,threadID:this.props.threadID,onHeaderInteract:this.handleHeaderInteract,onBlock:this.onBlock,onUnblock:this.onUnblock,onClose:this.handleClose,showReportUserModal:this.props.showReportUserModal}))))},t.prototype.markSuspendedUserThreadRead=function(){this.hasUnknownParticipant()&&this.markThreadMessagesAsRead()},t.prototype.renderMessageArea=function(){var e=this.props.emoteSetsData&&this.props.emoteSetsData.emoteSets||[],t=null;return t=this.isStrangerBlocked()?[m.createElement(B.a,{color:V.c.Alt2,key:"stranger-notification","data-test-selector":r.StrangerNotice},Object(U.m)())]:this.shouldShowUnverifiedNotice()?[m.createElement(be.a,{key:"unverified-notification"})]:[m.createElement(le.d,{componentRefDelegate:this.setAutocompleteInnerComponentRef,componentType:le.a.Input,containerElement:this.autocompleteContainer,disabled:this.shouldDisableInteractions(),htmlAutocomplete:"twitch-chat",iconRight:!0,key:"input",onClick:this.handleClick,onFocus:this.handleClick,onKeyDown:this.handleKeydown,refDelegate:this.setAutocompleteInputRef,suggestionSource:le.e.Whisper},m.createElement(le.f,{emotes:e})),m.createElement(ue.a,{key:"emote-picker",attachBottom:!0,attachRight:!0,inputRef:this.textInput,emotePickerSource:me.a.Whisper,offsetX:"1rem",onClickEmote:this.onEmoticonClick,padding:{x:1,bottom:1},position:R.j.Absolute,shouldCloseOnClickOut:!0,channelOwnerID:null})],[m.createElement(L.a,{attachBottom:!0,attachLeft:!0,attachRight:!0,fullWidth:!0,key:"whispers-input"},m.createElement(L.a,{fullWidth:!0,padding:{x:1,bottom:1},attachBottom:!0,attachLeft:!0},t)),m.createElement(R.g,{fullWidth:!0,attachLeft:!0,key:"whispers-content",flexGrow:1,overflow:R.i.Hidden},m.createElement("div",{className:"whispers-thread__content",onClick:this.handleContentClick},this.renderContent())),m.createElement(L.a,{refDelegate:this.setContainerRef,position:R.j.Absolute,className:"whispers-thread__autocomplete-container",key:"whispers-autocomplete-container"})]},t.prototype.renderContent=function(){return this.hadError?m.createElement(ae.PageError,{message:Object(U.l)()}):this.props.data.loading||this.props.activityData.loading||!this.props.data.whisperThread?m.createElement(L.a,{display:R.d.Flex,justifyContent:R.h.Center,alignItems:R.b.Center,margin:2,fullHeight:!0,flexGrow:1},m.createElement(Q.a,null)):m.createElement(fe.a,{thread:this.props.data.whisperThread,participantsByID:this.getUsersByID(this.props.data.whisperThread.participants),unreadMessagesCount:this.props.data.whisperThread.unreadMessagesCount,loadMore:this.loadMore,reportOutgoingWhisperRendered:this.reportOutgoingWhisperRendered,collapsed:this.props.collapsed,hasUnknownParticipant:this.hasUnknownParticipant()})},t.prototype.getUsersByID=function(e){for(var t={},n=0,i=e;n<i.length;n++){var r=i[n];r&&r.id&&(t[r.id]=r)}return t},t}(m.Component),_e=Object(ee.d)(Object(g.a)(ye,{options:function(e){return{variables:{targetUserID:Object(M.b)(e.threadID,e.currentUserID)||""},skip:!e.currentUserID||!e.threadID}},name:"activityData"}),Object(g.c)(Se,{options:function(e){return{variables:{id:e.threadID}}},props:function(e){return{data:e.data,loadMore:function(){var t="";return e.data.whisperThread&&e.data.whisperThread.messages&&e.data.whisperThread.messages.edges.length>0&&(t=e.data.whisperThread.messages.edges[e.data.whisperThread.messages.edges.length-1].cursor),e.data.fetchMore({query:Se,variables:Object(d.__assign)(Object(d.__assign)({},e.data.variables),{cursor:t}),updateQuery:function(e,t){var n=t.fetchMoreResult;if(!n||!n.whisperThread)return{whisperThread:null,currentUser:e.currentUser};if(!e.whisperThread||!e.whisperThread.messages)return{whisperThread:n.whisperThread,currentUser:e.currentUser};if(!n.whisperThread||!n.whisperThread.messages)return{whisperThread:e.whisperThread,currentUser:e.currentUser};var i=Object(d.__assign)(Object(d.__assign)({},n.whisperThread.messages),{edges:Object(S.c)(e.whisperThread.messages.edges,n.whisperThread.messages.edges)});return{whisperThread:Object(d.__assign)(Object(d.__assign)({},n.whisperThread),{messages:i}),currentUser:e.currentUser}}})}}}}),Object(oe.a)([{topic:function(e){return Object(y.Y)(e.currentUserID)},mapMessageTypesToProps:(i={},i[b.PubsubMessageType.WhisperReceived]="whisperReceived",i[b.PubsubMessageType.WhisperSent]="whisperSent",i),skipMessage:function(e,t){return!Object(ke.e)(e)&&!Object(ke.d)(e)||e.data_object.thread_id!==t.threadID}}]),Object(ce.a)(),Object(O.withLatencyTracking)("WhispersThread",{autoReportInteractive:!0}))(Ee);var Ce=Object(a.b)((function(e){return{isLoggedIn:Object(ne.f)(e)}}),(function(e){return Object(ee.b)({notifyWhisperThread:re.b,showReportUserModal:function(e){var t=Object(d.__rest)(e,[]);return Object(te.e)(ie.a,t)}},e)}))(_e),Ne=(n("J45U"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resizeAnimationHandle=null,t.renderThread=function(e){return e?m.createElement(Ce,{key:e.threadID,currentUserID:t.props.currentUserID,collapsed:e.collapsed,hidden:e.hidden,threadID:e.threadID,onBlock:t.onBlock,onCollapse:t.props.onCollapseThread,onClose:t.props.onCloseThread,onExpand:t.props.onExpandThread,onFocus:t.props.onFocusThread,onUnfocus:t.props.onUnfocusThread,focused:t.props.focusedThreadID===e.threadID,reportThreadData:t.props.reportThreadData}):null},t.onBlock=function(e){t.props.archiveThread(e),t.props.onBlockThread(e)},t.handleContentResize=function(){t.resizeAnimationHandle||(t.resizeAnimationHandle=requestAnimationFrame((function(){t.props.onResizeContent(),t.resizeAnimationHandle=null})))},t}return Object(d.__extends)(t,e),t.prototype.render=function(){var e=this,t=this.props.openedThreads.map((function(t){return e.renderThread(t)}));return m.createElement(L.a,{className:"whispers-open-threads",display:R.d.Flex,flexDirection:R.e.RowReverse,alignItems:R.b.End,position:R.j.Absolute,attachBottom:!0,attachLeft:!0,refDelegate:c.b},t,m.createElement(Z.a,{onResize:this.handleContentResize}))},t}(m.Component));var De=Object(a.b)((function(e){return{openedThreads:e.whispers.display.openedIDs.map((function(t){return Object(J.b)(e,t)})),focusedThreadID:e.whispers.display.focusedID}}),(function(e){return{onBlockThread:function(t){return e(s.h(t,Object(c.a)()))},onCloseThread:function(t){return e(s.h(t,Object(c.a)()))},onCollapseThread:function(t){return e(s.i(t,Object(c.a)()))},onExpandThread:function(t){return e(s.j(t,Object(c.a)()))},onFocusThread:function(t){return e(s.k(t,Object(c.a)()))},onUnfocusThread:function(t){return e(s.n(t,Object(c.a)()))},onResizeContent:function(){return e(s.m(Object(c.a)()))}}}),void 0,{areStatesEqual:function(e,t){return e.whispers.display===t.whispers.display}})(Ne),we=n("QAd9"),Oe=n("U1yz"),Ie=n("zOU0"),Te=n("R5eE"),Fe=n("Ideu"),je=n("WcC5"),Pe=n("PRj+"),Ue=(n("c/47"),v.a.wrap((function(){return n.e(77).then(n.bind(null,"eBce"))}),"DesktopTaskbarManager",{failSilently:!0,placeholder:null})),Me=function(e){function t(t){var n=e.call(this,t)||this;return n.erroredLoadingMore=!1,n.logger=f.k.withCategory("whispers"),n.getThreadsById=Object(h.a)((function(e){return Object(Ie.a)(e)})),n.getOrderedThreadsIds=Object(h.a)((function(e){return e.map((function(e){return e.id}))})),n.getThreadsFromData=Object(h.a)((function(e){return e&&e.whisperThreads&&e.whisperThreads.edges.map((function(e){return e.node}))||[]})),n.archiveThread=function(e){if(n.threadsByID[e]){var t=Object(S.b)({threadID:e,isArchived:!0},{updateWhisperThread:{thread:{__typename:"WhisperThread",id:e,isArchived:!0},__typename:"UpdateWhisperThreadPayload"}});n.props.archiveThread&&(n.props.closeThread(e),n.props.data.currentUser&&Object(x.a)(e),n.props.archiveThread(t))}},n.selectThread=function(e){n.props.openThread({threadID:e,collapsed:!1})},n.onNotificationInteracted=function(e){var t=/(.*)-whisper-body/.exec(e.actionID);if(t&&t.length>1){var i=t[1];n.selectThread(i)}},n.loadMore=function(){return Object(d.__awaiter)(n,void 0,void 0,(function(){var e;return Object(d.__generator)(this,(function(t){switch(t.label){case 0:if(this.props.data.loading||this.props.data.error||this.erroredLoadingMore)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.props.loadMore()];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),this.logger.warn("Load more whisper threads failed",{error:e}),this.erroredLoadingMore=!0,[3,4];case 4:return[2]}}))}))},n.handleThreadDataReport=function(e,t){n.threadsByID[e]||Object(S.i)(Pe,{cursor:void 0},(function(e){return e.currentUser&&e.currentUser.whisperThreads?u(e,(function(e){return e.currentUser.whisperThreads.edges}),(function(e){return Object(d.__spreadArrays)([{cursor:"0",node:Object(d.__assign)(Object(d.__assign)({},t),{isArchived:!1}),__typename:"WhisperThreadEdge"}],e)})):e}),void 0,n.props.client)},n.state={renderError:!1},n}return Object(d.__extends)(t,e),t.prototype.componentDidCatch=function(e,t){var n=this;this.setState({renderError:!0},(function(){f.p.stats.recordComponentError("Whispers"),n.logger.errorAndReport(e,"A unhandled exception occurred in the component hierarchy",{info:t})}))},t.prototype.componentDidMount=function(){f.p.integrations.notifications&&f.p.integrations.notifications.onNotificationInteracted(this.onNotificationInteracted)},t.prototype.render=function(){if(!this.props.data.currentUser||!this.props.data.currentUser.id||this.state.renderError||!this.props.isVisible)return null;var e=l({whispers:!0,"whispers--theatre-mode":this.props.theatreModeEnabled,"whispers--right-column-expanded-beside":this.props.rightColumnExpanded&&this.props.rightColumnPositionedBeside});return m.createElement(L.a,{className:e,position:R.j.Absolute,attachBottom:!0,attachLeft:!0,margin:{right:1},display:this.props.theatreModeEnabled&&this.props.rightColumnExpanded&&!this.props.rightColumnPositionedBeside?R.d.Hide:R.d.Block},m.createElement(De,{currentUserID:this.props.data.currentUser.id,reportThreadData:this.handleThreadDataReport,archiveThread:this.archiveThread}),m.createElement($,{currentUserID:this.props.data.currentUser.id,error:!!this.props.data.error,loading:this.props.data.loading,unreadCount:this.unreadCount,orderedThreadIDs:this.orderedThreadsIDs,threadsByID:this.threadsByID,selectThread:this.selectThread,archiveThread:this.archiveThread,loadMore:this.loadMore}),f.p.integrations.notifications&&f.p.integrations.notifications.setNotificationCount&&m.createElement(Ue,{unreadCount:this.unreadCount,setNotificationCount:f.p.integrations.notifications.setNotificationCount}))},Object.defineProperty(t.prototype,"threadsByID",{get:function(){var e=this.getThreadsFromData(this.props.data.currentUser);return this.getThreadsById(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"orderedThreadsIDs",{get:function(){var e=this.getThreadsFromData(this.props.data.currentUser);return this.getOrderedThreadsIds(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"unreadCount",{get:function(){return Object(we.a)(this.threadsByID)},enumerable:!0,configurable:!0}),t=Object(d.__decorate)([p.b,Object(g.c)(Pe,{props:function(e){return Object(d.__assign)(Object(d.__assign)({},e),{loadMore:function(){return e.data.fetchMore({query:Pe,variables:Object(d.__assign)(Object(d.__assign)({},e.data.variables),{cursor:e.data.currentUser&&e.data.currentUser.whisperThreads&&e.data.currentUser.whisperThreads.edges.length>0?e.data.currentUser.whisperThreads.edges[e.data.currentUser.whisperThreads.edges.length-1].cursor:null}),updateQuery:function(e,t){var n=t.fetchMoreResult;return n&&n.currentUser?e.currentUser&&e.currentUser.whisperThreads?n.currentUser.whisperThreads?{currentUser:Object(d.__assign)(Object(d.__assign)({},n.currentUser),{whisperThreads:Object(d.__assign)(Object(d.__assign)({},n.currentUser.whisperThreads),{edges:Object(S.c)(e.currentUser.whisperThreads.edges,n.currentUser.whisperThreads.edges)})})}:{currentUser:Object(d.__assign)(Object(d.__assign)({},n.currentUser),{whisperThreads:e.currentUser.whisperThreads})}:{currentUser:n.currentUser}:{currentUser:null}}})}})}}),Object(g.a)(je,{name:"archiveThread"}),Object(k.a)((function(e){return{query:Pe,types:[b.PubsubMessageType.WhisperDeleted,b.PubsubMessageType.WhisperEdited,b.PubsubMessageType.WhisperSent,b.PubsubMessageType.WhisperAllThreadsUpdate,b.PubsubMessageType.WhisperReceived,b.PubsubMessageType.WhisperThreadUpdate],variables:Object(d.__assign)({},e.data.variables),skip:!e.data.currentUser||void 0===e.data.currentUser.id,topic:Object(y.Y)(e.data.currentUser&&e.data.currentUser.id||""),mutator:function(t,n){if(!n.currentUser||!n.currentUser.whisperThreads)return n;if(Object(ke.e)(t)||Object(ke.d)(t)){if(Object(ke.d)(t)){var i=n.currentUser.whisperThreads.edges.find((function(e){return e.node.id===t.data_object.thread_id}));if(i){var r=i.node.participants.find((function(e){return!!e&&e.id===""+t.data_object.from_id}));r&&r.login&&(Object(x.l)({targetUserLogin:r.login,threadID:t.data_object.thread_id}),f.p.integrations.notifications&&r.profileImageURL&&f.p.integrations.notifications.send({body_md:"**"+r.displayName+"** "+t.data_object.body,thumbnail_url:r.profileImageURL,id:t.data_object.thread_id,actions:[{id:t.data_object.thread_id+"-whisper-body",type:Fe.NotificationsIntegrationNotificationActionType.Body}],created_at:Date.now(),updated_at:Date.now(),type:"whisper",read:!1}))}}return Object(Te.d)(t,n,e.focusedThreadID,e.openThread)}return Object(ke.b)(t)?Object(Te.b)(t,n):Object(ke.c)(t)?Object(Te.c)(t,n):Object(ke.f)(t)?Object(Te.e)(t,n,e.closeThread):Object(ke.a)(t)?Object(Te.a)(t,n):n},skipMessage:function(e,t){if(Object(ke.e)(e)){if(!t.currentUser||!t.currentUser.whisperThreads)return!1;var n=void 0;try{n=Object(Oe.a)(f.p.apollo.client.cache,e.data_object.thread_id,!0)}catch(e){return!1}if(n&&n.messages&&n.messages.edges.findIndex((function(t){return""!==t.node.nonce&&t.node.nonce===e.data_object.nonce}))>=0)return!0}return!1}}}))],t)}(m.Component);var xe=Object(a.b)((function(e){return{isVisible:Object(o.c)(e),rightColumnExpanded:e.ui.rightColumnExpanded,rightColumnPositionedBeside:e.ui.rightColumnPositionedBeside,theatreModeEnabled:e.ui.theatreModeEnabled,focusedThreadID:e.whispers.display.focusedID}}),(function(e){return{openThread:function(t){return e(s.l(t,Object(c.a)()))},closeThread:function(t){return e(s.h(t,Object(c.a)()))}}}))(Me);n.d(t,"Whispers",(function(){return xe}))},"3rL5":function(e,t,n){"use strict";var i=n("/MKj"),r=n("szP+"),a=n("mrSG"),o=n("q1tI"),s=n("/7QA"),c=n("8/mp"),d=n("HAa/"),l=n("4eMh"),u=n("eugE"),m=n("sUnt"),p=n("hnjF"),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={disableInfiniteTrigger:!0},t.loadMore=function(){return t.props.loadMore()},t.renderMessages=function(e){return e.map((function(e,n){return o.createElement(l.b,{message:e,reportOutgoingWhisperRendered:t.props.reportOutgoingWhisperRendered||void 0,key:t.generateMessageKey(e,n.toString())})}))},t.getMessages=function(){var e=t.props.unreadMessagesCount,n=t.notificationsFor();return t.props.thread.messages&&(n=n.concat(t.props.thread.messages.edges.map((function(e){return{type:u.a.Whisper,content:e.node.content.content||"",from:e.node.from&&e.node.from.id?t.props.participantsByID[+e.node.from.id]:null,emotes:e.node.content.emotes||[],id:e.node.id,nonce:e.node.nonce||"",sentAt:new Date(e.node.sentAt),editedAt:e.node.editedAt,deletedAt:e.node.deletedAt}})).reduce((function(n,i,r,a){if(t.notificationsFor(i.id).forEach((function(e){n.push(e)})),n.push(i),0==--e&&n.push(t.createNewMessagesIndicator()),r<a.length-1){var o=a[r+1];!i.deletedAt&&t.shouldAddTimestamp(i,o)&&n.push(t.createTimestampMessage(i))}return r!==a.length-1||i.deletedAt||n.push(t.createTimestampMessage(i)),n}),[]))),n.push(t.createWarningMessage()),n.reverse(),t.props.hasUnknownParticipant&&n.push(t.createInactiveUserMessage()),n},t.shouldAddTimestamp=function(e,t){return e.sentAt.valueOf()-t.sentAt.valueOf()>6e5||e.sentAt.toDateString()!==t.sentAt.toDateString()},t.createTimestampMessage=function(e){return{type:u.a.Timestamp,timestamp:new Date(e.sentAt)}},t.notificationsFor=function(e){return t.props.notifications.filter((function(t){return t.afterMessageID===e})).map(t.createNotificationLine)},t.createNotificationLine=function(e){return{type:u.a.Notification,content:e.content}},t.createNewMessagesIndicator=function(){return{type:u.a.NewMessages}},t.createWarningMessage=function(){return{type:u.a.Warning}},t.createInactiveUserMessage=function(){return{type:u.a.InactiveUserNotice}},t.saveScrollRef=function(e){return t.scroll=e},t.scrollToBottom=function(){t.scroll.scrollToBottom()},t}return Object(a.__extends)(t,e),t.prototype.componentDidMount=function(){this.scrollToBottom(),this.setState({disableInfiniteTrigger:!1})},t.prototype.getSnapshotBeforeUpdate=function(e){if(e.thread.messages&&this.props.thread.messages&&e.thread.messages.edges.length<this.props.thread.messages.edges.length){if(!this.scroll||!this.scroll.scrollContent)return;return this.scroll.scrollContent.scrollHeight}return null},t.prototype.componentDidUpdate=function(e,t,n){if(this.props.thread.messages&&e.thread.messages&&this.props.thread.messages.edges.length>e.thread.messages.edges.length)if(this.props.thread.messages.edges[0]&&e.thread.messages.edges[0]&&this.props.thread.messages.edges[0].cursor===e.thread.messages.edges[0].cursor&&this.props.thread.messages.edges[0].node.id===e.thread.messages.edges[0].node.id){if(this.scroll&&this.scroll.scrollContent&&n&&n!==this.scroll.scrollContent.scrollHeight){var i=this.scroll.scrollContent.scrollHeight-n;this.scroll.scrollContent.scrollTop=i}}else this.scrollToBottom();this.props.notifications.length>e.notifications.length&&this.scrollToBottom(),e.collapsed&&!this.props.collapsed&&this.scrollToBottom()},t.prototype.render=function(){var e=this.getMessages();return o.createElement(m.a,{fullHeight:!0,attachTop:!0,attachLeft:!0,attachRight:!0,position:p.j.Absolute},o.createElement(c.b,{scrollRef:this.saveScrollRef,suppressScrollX:!0},o.createElement(m.a,null,o.createElement(c.a,{enabled:!this.state.disableInfiniteTrigger,loadMore:this.loadMore,pixelThreshold:200,orientation:d.b.Down,contentLength:e.length}),this.renderMessages(e))))},t.prototype.generateMessageKey=function(e,t){switch(e.type){case u.a.NewMessages:case u.a.Warning:case u.a.InactiveUserNotice:return""+e.type;case u.a.Timestamp:return e.type+"-"+e.timestamp.getTime();case u.a.Whisper:return e.type+"-"+e.id;case u.a.Notification:return e.type+"-"+t;default:return s.k.warn("[ThreadMessages] Encountered an unknown message type."),t}},t}(o.Component);var f=Object(i.b)((function(e,t){return{notifications:Object(r.a)(e,t.thread.id)}}))(h);n.d(t,"a",(function(){return f}))},"3sMn":function(e,t,n){"use strict";var i=n("mrSG"),r=n("q1tI"),a=n("1rIY"),o=Object(a.a)("ChatConfigContext",{hideOnboardingPrompts:!1,hideChatInputButtons:!1,hideRoomsDeprecationNotice:!1,hideChatSettings:!1,isSettingsOpen:!1,updateChatConfigState:function(e){return null}}),s=o.context,c=o.withContext,d=function(e){function t(t){var n=e.call(this,t)||this;return n.updateChatConfigState=function(e){null===n.updateFrame&&(n.setState((function(t){return Object(i.__assign)(Object(i.__assign)({},t),e)})),n.updateFrame=setTimeout((function(){n.updateFrame=null}),0))},n.updateFrame=null,n.state={hideOnboardingPrompts:!1,hideChatInputButtons:!1,hideRoomsDeprecationNotice:!1,hideChatSettings:!1,isSettingsOpen:!1,updateChatConfigState:n.updateChatConfigState},n}return Object(i.__extends)(t,e),t.prototype.render=function(){return r.createElement(s.Provider,{value:this.state},this.props.children)},t}(r.Component);n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return d}))},"4VGW":function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Whispers_Thread_User_Activity"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"targetUserID"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"targetUserID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"chatColor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"70"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayBadges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"imageURL"},arguments:[],directives:[]}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"presenceFragment"},directives:[]}]}}]}}],loc:{start:0,end:256}};i.loc.source={body:'#import "twilight/common/queries/presence-fragment.gql"\nquery Whispers_Thread_User_Activity($targetUserID: ID) {\nuser(id: $targetUserID) {\nid\nchatColor\ndisplayName\nprofileImageURL(width: 70)\nlogin\ndisplayBadges {\nid\ntitle\nimageURL\n}\n...presenceFragment\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};i.definitions=i.definitions.concat(n("wsiY").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!r[t]&&(r[t]=!0,!0)})));var a={};function o(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),a[e.name.value]=t}})),e.exports=i,e.exports.Whispers_Thread_User_Activity=function(e,t){var n={kind:e.kind,definitions:[o(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var i=a[t]||new Set,r=new Set,s=new Set;for(i.forEach((function(e){s.add(e)}));s.size>0;){var c=s;s=new Set,c.forEach((function(e){r.has(e)||(r.add(e),(a[e]||new Set).forEach((function(e){s.add(e)})))}))}return r.forEach((function(t){var i=o(e,t);i&&n.definitions.push(i)})),n}(i,"Whispers_Thread_User_Activity")},"4eMh":function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return u}));var i=n("mrSG"),r=n("q1tI"),a=n("eugE"),o=n("Ws8v"),s=n("X2PJ"),c=n("sUnt"),d=(n("0JUI"),n("tQZM")),l="separator",u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.prototype.render=function(){var e=this.props.message;switch(e.type){case a.a.Timestamp:return r.createElement(o.a,{className:"thread-message__timestamp",color:s.c.Alt2,fontSize:s.d.Size7},Object(d.d)(e));case a.a.Warning:return r.createElement(o.a,{className:"thread-message__warning",color:s.c.Alt2},Object(d.e)());case a.a.InactiveUserNotice:return r.createElement(o.a,{className:"thread-message__inactive-user",color:s.c.Alt2},Object(d.a)());case a.a.Whisper:return this.props.reportOutgoingWhisperRendered&&this.props.reportOutgoingWhisperRendered(e.content),r.createElement(c.a,{className:"thread-message__message","data-a-target":"whisper-message","data-test-selector":"whisper-message"},Object(d.f)(e));case a.a.NewMessages:return r.createElement(o.a,{className:"thread-message__new-messages",color:s.c.OverlayAlt,fontSize:s.d.Size7},Object(d.b)());case a.a.Notification:return r.createElement(c.a,{className:"thread-message__notification"},Object(d.c)(e));default:return null}},t}(r.Component)},"4qQ0":function(e,t,n){"use strict";var i,r;n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r})),function(e){e.BitsViolation="bits_violation",e.ChatBanEvasion="chat_ban_evasion",e.Cheating="cheating",e.Gore="gore",e.Harassment="harassment",e.Harm="harm",e.HatefulConduct="hateful_conduct",e.Impersonation="impersonation",e.Miscategorized="miscategorized",e.OffensiveUsername="offensive_username",e.Other="other",e.Porn="porn",e.Prohibited="prohibited",e.SelfHarm="selfharm",e.SexualContent="sexual_content",e.SexualViolence="sexual_violence",e.Spam="spam",e.TerrorismMassViolence="terrorism_mass_violence",e.TosBanEvasion="tos_ban_evasion",e.Underaged="underaged"}(i||(i={})),function(e){e[e.Unsubmitted=0]="Unsubmitted",e[e.Success=1]="Success",e[e.FormError=2]="FormError",e[e.MutationError=3]="MutationError",e[e.UserError=4]="UserError"}(r||(r={}))},"60o1":function(e,t,n){"use strict";function i(e,t){var n=e,i=!1;return n?n.split("").map((function(e){return e.charCodeAt(0)>127})).reduce((function(e,t){return e||t}))&&(i=!0):n=t,{userDisplayName:n,isIntl:i}}n.d(t,"a",(function(){return i}))},"6j5V":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("RcPG");function r(e){return{type:i.a.Text,content:e}}},"7SjK":function(e,t,n){"use strict";var i=n("mrSG"),r=n("q1tI"),a=n("b5vT"),o=n("sUnt"),s=n("hnjF"),c=(n("VrOd"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClickEmote=function(e){t.props.onClickEmote&&t.props.onClickEmote(e,t.props.context)},t}return Object(i.__extends)(t,e),t.prototype.render=function(){var e=this,t=this.props.emotes.map((function(t,n){return r.createElement(o.a,{key:"emote-button-padder-"+t.id+"--"+n,padding:{x:e.props.spaced?.5:0}},r.createElement(a.a,{key:"emote-button-"+t.id+"--"+n,emote:t,isCriticalImage:0===n,locked:e.props.locked||t.isLocked,onClick:e.props.locked?void 0:e.handleClickEmote}))}));return r.createElement(o.a,{display:s.d.Flex,flexWrap:s.f.Wrap},t)},t}(r.PureComponent));n.d(t,"a",(function(){return c}))},"88lE":function(e,t,n){"use strict";var i=n("mrSG"),r=n("q1tI"),a=n("/7QA"),o=n("tQZM"),s=n("Ws8v"),c=n("hnjF"),d=n("sUnt"),l=n("HH5h"),u=n("+80q"),m=n("X2PJ"),p=n("7uM4"),h=n("C7sF"),f=n("7d/q"),v=(n("jPWu"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleThreadClick=function(){t.props.selectThread(t.props.threadID)},t.handleArchiveClick=function(e){e.stopPropagation(),t.props.archiveThread(t.props.threadID)},t}return Object(i.__extends)(t,e),t.prototype.render=function(){var e,t,n,i=this.props.user,v=this.props.lastMessage?Object(o.g)(this.props.lastMessage.content.content||"",this.props.lastMessage.content.emotes||[]):null,g=this.props.unreadMessageCount,k=Object(a.d)("Unknown","ThreadListItem");return i?((e=i.displayName||i.login)||(e=k),t=i.login||k,n=i.profileImageURL):(e=k,t=k,n=null),r.createElement("div",{onClick:this.handleThreadClick,role:"listitem"},r.createElement(s.a,{className:"whispers-list-item",borderBottom:!0,padding:1,display:c.d.Flex,flexDirection:c.e.Row,flexWrap:c.f.NoWrap,fullWidth:!0,alignItems:c.b.Center,"data-a-target":"whisper-with-"+t},r.createElement(d.a,{className:"whispers-list-item__avatar",margin:{right:.5},flexShrink:0},r.createElement(l.a,{size:30,alt:Object(a.d)("{interlocutorName}'s Avatar",{interlocutorName:e},"WhisperThreadListItem"),src:n,onLoad:this.props.avatarOnLoadCallback,userLogin:this.props.user&&this.props.user.login})),r.createElement(d.a,{fullWidth:!0,display:c.d.Inline},r.createElement(u.a,{fontSize:m.d.Size5,bold:!0,italic:e===k},e),r.createElement(d.a,{className:"whispers-list-item__last-message",ellipsis:!0},v)),r.createElement(d.a,{className:"whispers-list-item__unread-count",margin:{right:1},textAlign:c.l.Right},r.createElement(u.a,{bold:!0},g>0&&!this.props.muted?g:null),this.props.muted&&r.createElement(d.a,{display:c.d.Flex,alignItems:c.b.Center,justifyContent:c.h.Center},r.createElement(p.a,{type:p.b.Alt2,asset:h.a.WhisperMuted}))),r.createElement("div",{className:"whispers-list-item__archive"},r.createElement(f.a,{ariaLabel:Object(a.d)("Archive Thread","WhisperThreadListItem"),tabIndex:-1,icon:h.a.Close,"data-a-target":"whispers-list-item__archive-button",onClick:this.handleArchiveClick,"data-click-out-id":"whispers-list-item__archive-button"}))))},t}(r.Component));n.d(t,"a",(function(){return v}))},"8XBm":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UnlockRandomSubscriberEmote"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UnlockRandomSubscriberEmoteInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"unlockRandomSubscriberEmote"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"balance"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emote"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:173}};n.loc.source={body:"mutation UnlockRandomSubscriberEmote($input: UnlockRandomSubscriberEmoteInput!) {\nunlockRandomSubscriberEmote (input: $input) {\nbalance\nemote {\nid\ntoken\n}\nerror {\ncode\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function r(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.UnlockRandomSubscriberEmote=function(e,t){var n={kind:e.kind,definitions:[r(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var a=i[t]||new Set,o=new Set,s=new Set;for(a.forEach((function(e){s.add(e)}));s.size>0;){var c=s;s=new Set,c.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=r(e,t);i&&n.definitions.push(i)})),n}(n,"UnlockRandomSubscriberEmote")},"8jSG":function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"blockedUsers"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"blockedUsers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:56}};n.loc.source={body:"fragment blockedUsers on User {\nid\nblockedUsers {\nid\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"9KaG":function(e,t,n){},"A++4":function(e,t,n){"use strict";function i(e,t){return e.find((function(e){return!!e&&e.id!==t}))||void 0}n.d(t,"a",(function(){return i}))},A4KW:function(e,t,n){"use strict";var i=n("ALJo");n.d(t,"a",(function(){return i.a})),n.d(t,"b",(function(){return i.b}))},ALJo:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return l}));var i,r=n("q1tI"),a=n("fvjX"),o=n("yR8l"),s=n("YV90"),c=n("SyZi"),d=n("SCHm");!function(e){e.Small="channel-points-icon--small",e.Medium="channel-points-icon--medium",e.Large="channel-points-icon--large"}(i||(i={}));var l=Object(a.d)(Object(s.a)((function(e){return{isLoaded:e.isLoaded,pointIcon:e.pointIcon,pointName:e.pointName}})),Object(o.a)(d,{options:function(e){return{variables:{channelLogin:e.channelLogin}}},skip:function(e){return!e.channelLogin||e.isLoaded}}))((function(e){var t=null,n=null,i=e.data;return e.isLoaded?(t=e.pointIcon,n=e.pointName):i&&i.community&&i.community.channel&&i.community.channel.communityPointsSettings&&(t=i.community.channel.communityPointsSettings.image,n=i.community.channel.communityPointsSettings.name),r.createElement(c.a,{iconSize:e.iconSize,image:t,name:n})}))},BhFH:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("yR8l"),r=n("8jSG"),a=n("cMjZ"),o=n("kSkr");function s(){return Object(i.b)(o,{props:function(e){return{blockUserMutation:function(t,n,i,o){return e.mutate({variables:{input:{targetUserID:t,sourceContext:i,reason:n}},optimisticResponse:{blockUser:{__typename:"BlockUserPayload",targetUser:{__typename:"User",id:t}}},update:function(e){var n=e.readFragment({id:Object(a.a)(o),fragment:r});n&&(n.blockedUsers.push({id:t,__typename:"User"}),e.writeFragment({id:Object(a.a)(o),fragment:r,data:n}))}})}}}})}},CMUD:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Whispers_Tracking_Read"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"threadID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"whisperThread"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"threadID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"participants"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"whisperPermissions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"receive"},arguments:[],directives:[]}]}}]}}]}}]}}]}}],loc:{start:0,end:175}};n.loc.source={body:"query Whispers_Tracking_Read($threadID: ID!) {\ncurrentUser {\nid\nlogin\n}\nwhisperThread(id: $threadID) {\nid\nparticipants {\nid\nlogin\nself {\nwhisperPermissions {\nreceive\n}\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function r(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.Whispers_Tracking_Read=function(e,t){var n={kind:e.kind,definitions:[r(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var a=i[t]||new Set,o=new Set,s=new Set;for(a.forEach((function(e){s.add(e)}));s.size>0;){var c=s;s=new Set,c.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=r(e,t);i&&n.definitions.push(i)})),n}(n,"Whispers_Tracking_Read")},CNnA:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r}));var i=function(e){return{isCommerceDisabled:e.isWatchPartyActive}},r=function(e){return{isCommerceDisabled:e.isWatchPartyActive,disableCommerce:e.updateWatchPartyActive,allowChatOnPageDuringWatchParty:e.allowChatOnPageDuringWatchParty}}},CbHG:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChatFilterContextManager_User"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:68}};n.loc.source={body:"query ChatFilterContextManager_User {\ncurrentUser {\nid\ncreatedAt\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function r(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.ChatFilterContextManager_User=function(e,t){var n={kind:e.kind,definitions:[r(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var a=i[t]||new Set,o=new Set,s=new Set;for(a.forEach((function(e){s.add(e)}));s.size>0;){var c=s;s=new Set,c.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=r(e,t);i&&n.definitions.push(i)})),n}(n,"ChatFilterContextManager_User")},"DB+C":function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"EmotePicker_EmotePicker_UserSubscriptionProducts"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelOwnerID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"channelOwnerID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"28"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"subscriptionProducts"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"emotePickerUserSubscriptionProduct"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"cumulativeTenure"},name:{kind:"Name",value:"subscriptionTenure"},arguments:[{kind:"Argument",name:{kind:"Name",value:"tenureMethod"},value:{kind:"EnumValue",value:"CUMULATIVE"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"months"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"subscriptionBenefit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"platform"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:449}};i.loc.source={body:'#import "twilight/features/emote-picker/components/emote-picker-menu/user-subscription-product-fragment.gql"\nquery EmotePicker_EmotePicker_UserSubscriptionProducts($channelOwnerID: ID!) {\nuser(id: $channelOwnerID) {\nid\nlogin\ndisplayName\nprofileImageURL(width: 28)\nsubscriptionProducts {\n...emotePickerUserSubscriptionProduct\n}\nself {\ncumulativeTenure: subscriptionTenure(tenureMethod: CUMULATIVE) {\nmonths\n}\nsubscriptionBenefit {\nid\nplatform\n}\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};i.definitions=i.definitions.concat(n("ZhU4").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!r[t]&&(r[t]=!0,!0)})));var a={};function o(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),a[e.name.value]=t}})),e.exports=i,e.exports.EmotePicker_EmotePicker_UserSubscriptionProducts=function(e,t){var n={kind:e.kind,definitions:[o(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var i=a[t]||new Set,r=new Set,s=new Set;for(i.forEach((function(e){s.add(e)}));s.size>0;){var c=s;s=new Set,c.forEach((function(e){r.has(e)||(r.add(e),(a[e]||new Set).forEach((function(e){s.add(e)})))}))}return r.forEach((function(t){var i=o(e,t);i&&n.definitions.push(i)})),n}(i,"EmotePicker_EmotePicker_UserSubscriptionProducts")},DnOo:function(e,t,n){"use strict";var i=n("mrSG"),r=n("q1tI"),a=n("fvjX"),o=n("/7QA"),s=n("SDEh"),c=n("8EUQ"),d=n("GnwI"),l=n("br9A"),u=n("dEDE"),m=n("C7sF"),p=n("vCsY"),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(){t.openCheckout(),t.props.handleSubAction({action:t.props.overrideSubEventAction?t.props.overrideSubEventAction:l.a.ClickCheckout,checkoutButtonTier:t.props.tierPrice})},t.openCheckout=function(){t.props.isMobileCheckout||o.n.set(c.a.SUB_CHECKOUT__PRODUCT_KEY,t.props.productName)},t}return Object(i.__extends)(t,e),t.prototype.render=function(){if(this.props.isSubbedToTier){var e=Object(o.d)("Subscribed","SubTierButton");return r.createElement(u.a,{ariaLabel:e,"data-test-selector":"subscribe-button__subscribe-tier-button",disabled:!0,icon:m.a.Star},e)}var t;return t=this.props.customSubscribeNowMessage?this.props.customSubscribeNowMessage:Object(o.d)("Subscribe","SubTierButton"),r.createElement(u.a,Object(i.__assign)({ariaLabel:t+" "+this.props.tierPrice,"data-test-selector":"subscribe-button__subscribe-tier-button",icon:this.props.icon,linkTo:this.props.isMobileCheckout?this.props.url:void 0,onClick:this.handleClick,purchase:this.props.tierPrice},Object(p.a)(this.props),{fullWidth:this.props.fullWidth,targetBlank:!!Object(s.b)()||void 0}),t)},t}(r.Component),f=Object(a.d)(Object(d.withLatencyTracking)("SubTierButton",{autoReportInteractive:!0}))(h);n.d(t,"a",(function(){return f}))},DqQV:function(e,t,n){"use strict";var i,r=n("mrSG"),a=n("q1tI"),o=n("/7QA"),s=n("2xye"),c=n("sUnt"),d=n("hnjF"),l=n("+80q"),u=n("X2PJ"),m=n("dEDE");!function(e){e.StrangerWarningConfirmationButton="stranger-confirmation"}(i||(i={}));var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.componentDidMount=function(){var e,t;e={targetUserID:this.props.targetUserID},t={target_user_id:e.targetUserID},o.o.track(s.SpadeEventType.WhisperStrangerWarningImpression,t)},t.prototype.render=function(){var e;return e=this.props.targetDisplayName?Object(o.d)("You have blocked whispers from strangers. By sending a whisper to {username}, you will allow them to whisper you for 48 hours. You can disable their access again in whisper settings.",{username:this.props.targetDisplayName},"WhisperThread"):Object(o.d)("You have blocked whispers from strangers. By sending a whisper to this user, you will allow them to whisper you for 48 hours. You can disable their access again in whisper settings.","WhisperThread"),a.createElement(c.a,{attachBottom:!0,padding:1,position:d.j.Absolute},a.createElement(c.a,{padding:{bottom:1}},a.createElement(l.a,{color:u.c.Alt2,fontSize:u.d.Size6},e)),a.createElement(m.a,{onClick:this.props.onStrangerWarningConfirmation,"data-test-selector":i.StrangerWarningConfirmationButton},Object(o.d)("Got it!","WhisperThread")))},t}(a.Component);n.d(t,"a",(function(){return p}))},E6aA:function(e,t,n){"use strict";var i=n("q1tI"),r=n("/7QA"),a=n("tLDJ"),o=n("CGUg"),s=n("hnjF"),c=n("sUnt"),d=n("7uM4"),l=n("C7sF"),u=n("+80q"),m=n("Jsra"),p=function(){return i.createElement(i.Fragment,null,i.createElement(o.a,null,i.createElement(s.g,{margin:{y:1}},i.createElement("hr",null))),i.createElement(c.a,{display:s.d.Flex,flexDirection:s.e.Row},i.createElement(c.a,{alignItems:s.b.Start,margin:{right:.5}},i.createElement(d.a,{asset:l.a.Warning,type:d.b.Warn})),i.createElement(u.a,null,Object(r.d)("You must verify your email or phone number to send a whisper. <x:link>Get started here</x:link>",{"x:link":function(e){return i.createElement(m.a,{to:Object(a.kb)("/settings/security")},e)}},"WhisperThread"))))};n.d(t,"a",(function(){return p}))},Epr8:function(e,t,n){},GLn2:function(e,t,n){},GOKC:function(e,t,n){},Gu45:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"Thread_RevokeWhisperAccess"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdateWhisperThreadInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateWhisperThread"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"thread"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"participants"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"whisperPermissions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"receive"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}],loc:{start:0,end:187}};n.loc.source={body:"mutation Thread_RevokeWhisperAccess($input: UpdateWhisperThreadInput!) {\nupdateWhisperThread(input: $input) {\nthread {\nid\nparticipants {\nid\nself {\nwhisperPermissions {\nreceive\n}\n}\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function r(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.Thread_RevokeWhisperAccess=function(e,t){var n={kind:e.kind,definitions:[r(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var a=i[t]||new Set,o=new Set,s=new Set;for(a.forEach((function(e){s.add(e)}));s.size>0;){var c=s;s=new Set,c.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=r(e,t);i&&n.definitions.push(i)})),n}(n,"Thread_RevokeWhisperAccess")},GzyO:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return u})),n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return p}));var i=n("mrSG"),r=n("/7QA"),a=n("OpME"),o="twilight.emote_picker_history",s=24,c=[{id:"64138",token:"SeemsGood"},{id:"41",token:"Kreygasm"},{id:"245",token:"ResidentSleeper"},{id:"28087",token:"WutFace"},{id:"86",token:"BibleThump"},{id:"9",token:"<3"},{id:"58765",token:"NotLikeThis"},{id:"81274",token:"VoHiYo"},{id:"88",token:"PogChamp"},{id:"425618",token:"LUL"},{id:"25",token:"Kappa"},{id:"30259",token:"HeyGuys"}];function d(e){var t=h(),n=t[e.id];n?(n.uses++,n.lastUpdatedAt=Date.now()):t[e.id]={emote:e,lastUpdatedAt:Date.now(),uses:1},r.m.set(o,t)}function l(){var e=h();if(!(Object.keys(e).length>=s)){for(var t={},n=0;n<c.length;n++){var a=c[n];e[a.id]||(t[a.id]={emote:a,lastUpdatedAt:n,uses:0})}var d=Object(i.__assign)(Object(i.__assign)({},t),e);r.m.set(o,d)}}function u(){return Object(a.b)(c)}function m(e){var t=h(),n=[],i=!1;return Object.keys(t).forEach((function(r){var a=t[r];if(void 0!==a&&void 0!==e[a.emote.token]){var o=e[a.emote.token].id;o!==r&&(a.emote.id=o,t[o]=a,delete t[o],i=!0),n.push(a)}})),i&&r.m.set(o,t),n.sort((function(e,t){return e.uses>t.uses?-1:t.uses>e.uses?1:e.lastUpdatedAt>t.lastUpdatedAt?-1:t.lastUpdatedAt>e.lastUpdatedAt?1:0})),Object(a.b)(n.slice(0,24).map((function(e){return e.emote})))}function p(){var e=h(),t={};return Object.keys(e).forEach((function(n){void 0!==e[n]&&(t[e[n].emote.token]={count:e[n].uses})})),t}function h(){var e=r.m.get(o,{})||{};return e.undefined&&(delete e.undefined,r.m.set(o,e)),e}},HfAM:function(e,t,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"subProduct"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"SubscriptionProduct"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"price"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"priceInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"subscriptionProductPriceInfo"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tier"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"interval"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"unit"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emotes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"promotion"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"subscriptionProductPromotion"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"cumulativeTenure"},name:{kind:"Name",value:"subscriptionTenure"},arguments:[{kind:"Argument",name:{kind:"Name",value:"tenureMethod"},value:{kind:"EnumValue",value:"CUMULATIVE"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"months"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"benefit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tier"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"promotion"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"subscriptionProductPromotion"},directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subscriptionProducts"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tier"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"price"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emotes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"stream"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:648}};i.loc.source={body:'#import "twilight/features/subscribe-button/models/subscription-product-price-info.gql"\n#import "twilight/features/subscribe-button/models/subscription-product-promotion.gql"\nfragment subProduct on SubscriptionProduct {\nid\nurl\nprice\npriceInfo {\n...subscriptionProductPriceInfo\n}\nname\ntier\ninterval {\nunit\n}\nstate\nemotes {\nid\nsetID\ntoken\n}\npromotion {\n...subscriptionProductPromotion\n}\nself {\ncumulativeTenure: subscriptionTenure(tenureMethod: CUMULATIVE) {\nmonths\n}\nbenefit {\nid\ntier\n}\npromotion {\n...subscriptionProductPromotion\n}\n}\nowner {\nid\ndisplayName\nlogin\nsubscriptionProducts {\nid\ntier\nurl\nprice\nemotes {\nid\ntoken\n}\n}\nstream {\nid\ntype\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};function a(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!r[t]&&(r[t]=!0,!0)}))}i.definitions=i.definitions.concat(a(n("35qb").definitions)),i.definitions=i.definitions.concat(a(n("WJ1t").definitions)),e.exports=i},J45U:function(e,t,n){},JGCS:function(e,t,n){},Jpf8:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Whispers_Thread_WhisperThread"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"Cursor"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"whisperThread"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"userLastMessageRead"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sentAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"participants"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"chatColor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"70"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayBadges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"imageURL"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"whisperPermissions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"receive"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isStrangerBlocked"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"spamInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"lastMarkedNotSpamAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"likelihood"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"isMuted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isArchived"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"messages"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"20"}},{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cursor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nonce"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emotes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emoteID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"from"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"to"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"from"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"sentAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"editedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"deletedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"unreadMessagesCount"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"chatColor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isEmailVerified"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"70"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayBadges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"imageURL"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"blockedUsers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:805}};n.loc.source={body:"query Whispers_Thread_WhisperThread($id: ID! $cursor: Cursor) {\nwhisperThread(id: $id) {\nid\nuserLastMessageRead {\nid\nsentAt\n__typename\n}\nparticipants {\nid\nchatColor\ndisplayName\nprofileImageURL(width: 70)\nlogin\ndisplayBadges {\nid\ntitle\nimageURL\n}\nself {\nwhisperPermissions {\nreceive\nisStrangerBlocked\n}\n}\n__typename\n}\nspamInfo {\nlastMarkedNotSpamAt\nlikelihood\n__typename\n}\nisMuted\nisArchived\nmessages(first: 20 after: $cursor) {\nedges {\ncursor\nnode {\nid\nnonce\ncontent {\ncontent\nemotes {\nid\nemoteID\nsetID\nfrom\nto\n__typename\n}\n__typename\n}\nfrom {\nid\n__typename\n}\nsentAt\neditedAt\ndeletedAt\n__typename\n}\n__typename\n}\n__typename\n}\n__typename\nunreadMessagesCount\n}\ncurrentUser {\nid\nchatColor\ndisplayName\nisEmailVerified\nprofileImageURL(width: 70)\nlogin\ndisplayBadges {\nid\ntitle\nimageURL\n}\nblockedUsers {\nid\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function r(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.Whispers_Thread_WhisperThread=function(e,t){var n={kind:e.kind,definitions:[r(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var a=i[t]||new Set,o=new Set,s=new Set;for(a.forEach((function(e){s.add(e)}));s.size>0;){var c=s;s=new Set,c.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=r(e,t);i&&n.definitions.push(i)})),n}(n,"Whispers_Thread_WhisperThread")},Mj6i:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("mrSG"),r=n("yR8l"),a=n("0FG4"),o=n("S4w9");function s(){return Object(r.a)(o,{options:function(e){return{variables:{withOwner:!0}}},props:function(e){if(e.data){var t=e.data.currentUser&&e.data.currentUser.emoteSets||[],n=t&&Object(a.b)(t);return{emoteSetsData:Object(i.__assign)(Object(i.__assign)({},e.data),{currentUser:e.data.currentUser||null,emoteMap:n,emoteSets:t})}}return{}},skip:function(e){return!e.isLoggedIn}})}},MkkA:function(e,t,n){"use strict";var i=n("fBrF");n.d(t,"withWatchPartyContext",(function(){return i.b}));var r=n("yJn7");n.o(r,"mapWatchPartyContextToProviderProps")&&n.d(t,"mapWatchPartyContextToProviderProps",(function(){return r.mapWatchPartyContextToProviderProps})),n.o(r,"mapWatchPartyStateToChatProps")&&n.d(t,"mapWatchPartyStateToChatProps",(function(){return r.mapWatchPartyStateToChatProps})),n.o(r,"withWatchPartyContextManager")&&n.d(t,"withWatchPartyContextManager",(function(){return r.withWatchPartyContextManager}));var a=n("CNnA");n.d(t,"mapWatchPartyContextToProviderProps",(function(){return a.a})),n.d(t,"mapWatchPartyStateToChatProps",(function(){return a.b}));var o=n("t4UF");n.d(t,"withWatchPartyContextManager",(function(){return o.a}))},N6NX:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"Threads_MarkAllWhispersAsRead"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdateAllWhisperThreadsInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateAllWhisperThreads"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"count"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:130}};n.loc.source={body:"mutation Threads_MarkAllWhispersAsRead($input: UpdateAllWhisperThreadsInput!) {\nupdateAllWhisperThreads(input: $input) {\ncount\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function r(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.Threads_MarkAllWhispersAsRead=function(e,t){var n={kind:e.kind,definitions:[r(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var a=i[t]||new Set,o=new Set,s=new Set;for(a.forEach((function(e){s.add(e)}));s.size>0;){var c=s;s=new Set,c.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=r(e,t);i&&n.definitions.push(i)})),n}(n,"Threads_MarkAllWhispersAsRead")},NKxy:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"WhisperThread_SetThreadSpamStatus"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdateWhisperThreadInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateWhisperThread"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"thread"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"spamInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"lastMarkedNotSpamAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"likelihood"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:178}};n.loc.source={body:"mutation WhisperThread_SetThreadSpamStatus($input: UpdateWhisperThreadInput!) {\nupdateWhisperThread(input: $input) {\nthread {\nid\nspamInfo {\nlastMarkedNotSpamAt\nlikelihood\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function r(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.WhisperThread_SetThreadSpamStatus=function(e,t){var n={kind:e.kind,definitions:[r(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var a=i[t]||new Set,o=new Set,s=new Set;for(a.forEach((function(e){s.add(e)}));s.size>0;){var c=s;s=new Set,c.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=r(e,t);i&&n.definitions.push(i)})),n}(n,"WhisperThread_SetThreadSpamStatus")},OpME:function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return m})),n.d(t,"e",(function(){return p})),n.d(t,"d",(function(){return h}));var i=n("mrSG"),r=n("lZdE"),a=n("cpJf"),o={"B-?\\)":"B)","\\:-?[z|Z|\\|]":":|","\\:-?\\)":":)","\\:-?\\(":":(","\\:-?(p|P)":":P","\\;-?(p|P)":";P","\\:-?[\\\\/]":":/","\\;-?\\)":";)","R-?\\)":"R)",":>":":>","\\:\\&gt\\;":":>","[oO](_|\\.)[oO]":"O_o","\\:-?D":":D","\\:-?(o|O)":":O",">\\\\(":">(",":-?(?:7|L)":":7","\\:-?(S|s)":":S","#-?[\\\\/]":"#/","<\\]":"<]","<3":"<3","\\&lt\\;3":"<3","\\&lt\\;\\]":"<]","\\&gt\\;\\(":">("},s=["1.0","2.0","3.0"],c=new Set([457,33,42,0]);function d(e){for(var t=[],n=function(e){if(!e||null===e.id||null===e.token)return"continue";var n=o[e.token]||e.token,r=s.reduce((function(t,n){var i=t;return i&&(i=i.concat(", ")),i.concat("https://static-cdn.jtvnw.net/emoticons/v1/"+e.id+"/"+n+" "+n+"x")}),"");t.push(Object(i.__assign)(Object(i.__assign)({},e),{displayName:n,srcSet:r}))},r=0,a=e;r<a.length;r++){n(a[r])}return t}function l(e){return e.filter((function(e){return!!e&&!!e.id&&!!e.token})).sort((function(e,t){return parseInt(e.id,10)-parseInt(t.id,10)}))}function u(e){for(var t=[],n=0,i=e;n<i.length;n++){var r=i[n];if(r&&r.id&&r.emotes){for(var a={id:r.id,emotes:[]},o=0,s=r.emotes;o<s.length;o++){var c=s[o];c&&c.id&&c.token&&a.emotes.push(c)}t.push(a)}}return t}function m(e){for(var t=[],n=[],i=0,r=e;i<r.length;i++){var a=r[i];if(a&&a.id&&a.emotes){var o={id:a.id,emotes:d(l(a.emotes))};a.owner&&(o.owner=a.owner),c.has(parseInt(a.id,10))?t.push(o):n.push(o)}}return n.concat(t)}var p=function(e,t,n){var i=n||a.c,o=[],s=[],c=[],d=new RegExp("^"+Object(r.a)(t),"i");return e.forEach((function(e){i[e.token]?c.push(e):e.token.match(d)?o.push(e):s.push(e)})),o.sort((function(e,t){return e.token.localeCompare(t.token)})),s.sort((function(e,t){return e.token.localeCompare(t.token)})),c.sort((function(e,t){return i[t.token].count-i[e.token].count})),c.concat(o).concat(s)},h=function(e){var t={};return e.filter((function(e){return!t.hasOwnProperty(e.token)&&(t[e.token]=!0)}))}},P5MF:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Core_Services_Spade_EmoteCard_User"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"channelID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hasPrime"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"canPrimeSubscribe"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subscriptionBenefit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tier"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"purchasedWithPrime"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:176}};n.loc.source={body:"query Core_Services_Spade_EmoteCard_User($channelID: ID!) {\nuser(id: $channelID) {\nid\nhasPrime\nself {\ncanPrimeSubscribe\nsubscriptionBenefit {\nid\ntier\npurchasedWithPrime\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function r(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.Core_Services_Spade_EmoteCard_User=function(e,t){var n={kind:e.kind,definitions:[r(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var a=i[t]||new Set,o=new Set,s=new Set;for(a.forEach((function(e){s.add(e)}));s.size>0;){var c=s;s=new Set,c.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=r(e,t);i&&n.definitions.push(i)})),n}(n,"Core_Services_Spade_EmoteCard_User")},P6kH:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return h})),n.d(t,"e",(function(){return f}));var i,r=n("/7QA"),a=n("DMoW"),o=n("dGMd"),s="owl2019_emote_ids",c="OverwatchLeague",d="137512364",l="12658",u="324",m="139075904",p=5e8;function h(e){return e.emote.subscriptionProduct?e.emote.subscriptionProduct.id===l?i.Prime:e.emote.subscriptionProduct.id===u?i.Turbo:(t=e.emote.id,r.b.get(s,[]).includes(t)?i.OWL2019:e.emote.subscriptionProduct.owner&&e.emote.subscriptionProduct.owner.id?e.emote.subscriptionProduct.owner.id===m||e.emote.subscriptionProduct.state===a.Xc.INACTIVE?i.LimitedTime:i.Subscription:i.Unavailable):e.emote.setID===o.a?i.ChannelPoints:e.emote.setID&&f(e.emote.setID)?i.BitsTier:i.Global;var t}function f(e){return parseInt(e,10)>=p}!function(e){e[e.Unknown=0]="Unknown",e[e.Prime=1]="Prime",e[e.Turbo=2]="Turbo",e[e.OWL2019=3]="OWL2019",e[e.LimitedTime=4]="LimitedTime",e[e.ChannelPoints=5]="ChannelPoints",e[e.Unavailable=6]="Unavailable",e[e.Subscription=7]="Subscription",e[e.BitsTier=8]="BitsTier",e[e.Global=9]="Global"}(i||(i={}))},"PRj+":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Whispers_Whispers_UserWhisperThreads"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"cursor"}},type:{kind:"NamedType",name:{kind:"Name",value:"Cursor"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"whisperThreads"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"10"}},{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"cursor"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cursor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"participants"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"chatColor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"70"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"spamInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"lastMarkedNotSpamAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"likelihood"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"messages"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"20"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cursor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nonce"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sentAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"editedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"deletedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"from"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emotes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emoteID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"from"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"to"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"userLastMessageRead"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sentAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"isMuted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isArchived"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"unreadMessagesCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:639}};n.loc.source={body:"query Whispers_Whispers_UserWhisperThreads($cursor: Cursor) {\ncurrentUser {\nid\nlogin\nwhisperThreads(first: 10 after: $cursor) {\nedges {\ncursor\nnode {\nid\nparticipants {\nid\nchatColor\ndisplayName\nprofileImageURL(width: 70)\nlogin\n__typename\n}\nspamInfo {\nlastMarkedNotSpamAt\nlikelihood\n__typename\n}\nmessages(first: 20) {\nedges {\ncursor\nnode {\nid\nnonce\nsentAt\neditedAt\ndeletedAt\nfrom {\nid\n__typename\n}\ncontent {\ncontent\nemotes {\nid\nemoteID\nsetID\nfrom\nto\n__typename\n}\n__typename\n}\n__typename\n}\n__typename\n}\n__typename\n}\nuserLastMessageRead {\nid\nsentAt\n__typename\n}\nisMuted\nisArchived\nunreadMessagesCount\n__typename\n}\n__typename\n}\n__typename\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function r(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.Whispers_Whispers_UserWhisperThreads=function(e,t){var n={kind:e.kind,definitions:[r(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var a=i[t]||new Set,o=new Set,s=new Set;for(a.forEach((function(e){s.add(e)}));s.size>0;){var c=s;s=new Set,c.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=r(e,t);i&&n.definitions.push(i)})),n}(n,"Whispers_Whispers_UserWhisperThreads")},PrJw:function(e,t,n){"use strict";var i=n("vGFN");n.d(t,"a",(function(){return i.b})),n.d(t,"b",(function(){return i.c})),n.d(t,"c",(function(){return i.d})),n.d(t,"d",(function(){return i.e})),n.d(t,"e",(function(){return i.f})),n.d(t,"f",(function(){return i.g})),n.d(t,"g",(function(){return i.h})),n.d(t,"h",(function(){return i.i})),n.d(t,"i",(function(){return i.j})),n.d(t,"j",(function(){return i.k})),n.d(t,"k",(function(){return i.m})),n.d(t,"l",(function(){return i.p})),n.d(t,"m",(function(){return i.q}))},QAd9:function(e,t,n){"use strict";function i(e){return Object.keys(e).reduce((function(t,n){var i=e[n];return i.muted||i.archived?t:t+i.unreadMessagesCount}),0)}n.d(t,"a",(function(){return i}))},R5eE:function(e,t,n){"use strict";n.d(t,"d",(function(){return d})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return u})),n.d(t,"e",(function(){return m})),n.d(t,"a",(function(){return p}));var i=n("mrSG"),r=n("w09P"),a=n("/7QA"),o=n("xXlL"),s=n("bAm+"),c=n("xJpr");function d(e,t,n,d){if(!t.currentUser||!t.currentUser.whisperThreads)return t;var l=a.n.get("whisperDoNotDisturb",!1),u=t.currentUser.whisperThreads.edges.find((function(t){return t.node.id===e.data_object.thread_id}));if(u&&u.node.messages){var m=u,p=Object(o.c)(e);return m=r(m,(function(e){return e.node.messages.edges}),(function(e){return Object(i.__spreadArrays)([p],e)})),Object(c.d)(e)&&(e.data_object.thread_id!==n?m=r(m,(function(e){return e.node.unreadMessagesCount}),(function(e){return e+1})):Object(s.a)({threadID:e.data_object.thread_id,lastReadMessageID:e.data_object.message_id},e.data_object.id,!0),d({threadID:e.data_object.thread_id,collapsed:!0,hidden:l})),m=r(m,(function(e){return e.node.isArchived}),(function(){return!1})),r(t,(function(e){return e.currentUser.whisperThreads.edges}),(function(t){var n=t.filter((function(t){return t.node.id!==e.data_object.thread_id}));return Object(i.__spreadArrays)([m],n)}))}return d({threadID:e.data_object.thread_id,collapsed:!0,hidden:l}),t}function l(e,t){if(!t.currentUser||!t.currentUser.whisperThreads)return t;var n=t.currentUser.whisperThreads.edges.findIndex((function(t){return t.node.id===e.data_object.thread_id}));if(n>=0){var a=t.currentUser.whisperThreads.edges[n];if(a&&a.node.messages){var s=a.node.messages.edges.findIndex((function(t){return t.node.id===e.data_object.message_id}));if(s>=0)return r(t,(function(e,t){return e.currentUser.whisperThreads.edges[t.threadIndex].node.messages.edges[t.messageIndex].node}),(function(t){return t?Object(i.__assign)(Object(i.__assign)({},t),{deletedAt:new Date(1e3*e.data_object.deleted_at).toISOString(),content:Object(i.__assign)(Object(i.__assign)({},t.content),{content:e.data_object.body,emotes:Object(o.b)(e.data_object.tags.emotes)})}):t}),{threadIndex:n,messageIndex:s})}}return t}function u(e,t){if(!t.currentUser||!t.currentUser.whisperThreads)return t;var n=t.currentUser.whisperThreads.edges.findIndex((function(t){return t.node.id===e.data_object.thread_id}));if(n>=0){var a=t.currentUser.whisperThreads.edges[n];if(a.node.messages){var s=a.node.messages.edges.findIndex((function(t){return t.node.id===e.data_object.message_id}));if(s>=0)return r(t,(function(e,t){return e.currentUser.whisperThreads.edges[t.threadIndex].node.messages.edges[t.messageIndex].node}),(function(t){return Object(i.__assign)(Object(i.__assign)({},t),{editedAt:new Date(1e3*e.data_object.edited_at).toISOString(),content:Object(i.__assign)(Object(i.__assign)({},t.content),{content:e.data_object.body,emotes:Object(o.b)(e.data_object.tags.emotes)})})}),{threadIndex:n,messageIndex:s})}}return t}function m(e,t,n){if(!t.currentUser||!t.currentUser.whisperThreads)return t;var a=t.currentUser.whisperThreads.edges.findIndex((function(t){return t.node.id===e.data_object.id}));return a>=0?(!t.currentUser.whisperThreads.edges[a].node.isArchived&&e.data_object.archived&&n(e.data_object.id),r(t,(function(e,t){return e.currentUser.whisperThreads.edges[t.index].node}),(function(t){if(t.messages){var n=t.messages.edges[0].cursor,r=parseInt(n,10)-e.data_object.last_read;return Object(i.__assign)(Object(i.__assign)({},t),{unreadMessagesCount:r>=0?r:0,isMuted:e.data_object.muted,isArchived:e.data_object.archived})}return t}),{index:a})):t}function p(e,t){return t.currentUser&&t.currentUser.whisperThreads&&e.data_object.mark_all_read?r(t,(function(e){return e.currentUser.whisperThreads.edges}),(function(e){return e.map((function(e){return Object(i.__assign)(Object(i.__assign)({},e),{node:Object(i.__assign)(Object(i.__assign)({},e.node),{unreadMessagesCount:0})})}))})):t}},RKC5:function(e,t,n){"use strict";n.d(t,"n",(function(){return r})),n.d(t,"o",(function(){return a})),n.d(t,"m",(function(){return o})),n.d(t,"l",(function(){return s})),n.d(t,"f",(function(){return c})),n.d(t,"e",(function(){return d})),n.d(t,"g",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"r",(function(){return m})),n.d(t,"q",(function(){return p})),n.d(t,"a",(function(){return h})),n.d(t,"h",(function(){return f})),n.d(t,"c",(function(){return v})),n.d(t,"i",(function(){return g})),n.d(t,"p",(function(){return k})),n.d(t,"k",(function(){return b})),n.d(t,"b",(function(){return S})),n.d(t,"j",(function(){return y}));var i=n("/7QA");function r(){return Object(i.d)("User successfully blocked","whispers")}function a(){return Object(i.d)("User successfully unblocked","whispers")}function o(){return Object(i.d)('This user has turned on "Block Whispers from Strangers" in their privacy settings and must start a conversation with you first.',"WhisperThread")}function s(){return Object(i.d)("Sorry, something went wrong loading this conversation.","WhisperThread")}function c(){return Object(i.d)("Your whisper was not delivered because the recipient's settings prevent them from receiving it.","Thread")}function d(){return Object(i.d)("Your whisper was not delivered because it was empty.","Thread")}function l(){return Object(i.d)("Your whisper was not delivered because the recipient is suspended.","Thread")}function u(){return Object(i.d)("Your whisper was not delivered.","Thread")}function m(){return Object(i.d)("Whispers","WhisperThreadsBoxLabel")}function p(){return Object(i.d)("Whispers","WhisperThreadsBox")}function h(){return Object(i.d)("Close Threads","WhisperThreadsBox")}function f(){return Object(i.d)("Other People","WhispersThreadBox")}function v(){return Object(i.d)("No users found.","WhisperThreadsBox")}function g(){return Object(i.d)("There was a problem loading whispers.","WhisperThreadsBox")}function k(e){return Object(i.d)("{username}'s avatar",{username:e},"ThreadsBox")}function b(){return Object(i.d)("Settings","WhisperThreadsBox")}function S(){return Object(i.d)("Minimize","WhisperThreadsBox")}function y(){return Object(i.d)("Search for People","WhisperThreadsBox")}},Ro6I:function(e,t,n){},S4w9:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"UserEmotes"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"withOwner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emoteSets"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emotes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"withOwner"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"28"}}],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:188}};n.loc.source={body:"query UserEmotes ($withOwner: Boolean!) {\ncurrentUser {\nid\nemoteSets {\nid\nemotes {\nid\nsetID\ntoken\n}\nowner @include(if: $withOwner) {\nid\nlogin\ndisplayName\nprofileImageURL(width: 28)\n}\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function r(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.UserEmotes=function(e,t){var n={kind:e.kind,definitions:[r(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var a=i[t]||new Set,o=new Set,s=new Set;for(a.forEach((function(e){s.add(e)}));s.size>0;){var c=s;s=new Set,c.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=r(e,t);i&&n.definitions.push(i)})),n}(n,"UserEmotes")},SCHm:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CommunityPoints_Icon"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"community"},name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"channelLogin"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"pointCustomizationFragment"},directives:[]}]}}]}}],loc:{start:0,end:213}};i.loc.source={body:'#import "twilight/features/community-points/models/point-customization-fragment.gql"\nquery CommunityPoints_Icon($channelLogin: String!) {\ncommunity: user(login:$channelLogin) {\nid\n...pointCustomizationFragment\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};i.definitions=i.definitions.concat(n("XBQy").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!r[t]&&(r[t]=!0,!0)})));var a={};function o(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),a[e.name.value]=t}})),e.exports=i,e.exports.CommunityPoints_Icon=function(e,t){var n={kind:e.kind,definitions:[o(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var i=a[t]||new Set,r=new Set,s=new Set;for(i.forEach((function(e){s.add(e)}));s.size>0;){var c=s;s=new Set,c.forEach((function(e){r.has(e)||(r.add(e),(a[e]||new Set).forEach((function(e){s.add(e)})))}))}return r.forEach((function(t){var i=o(e,t);i&&n.definitions.push(i)})),n}(i,"CommunityPoints_Icon")},SceP:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ClipsChatCard_Clip"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"slug"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"clip"},arguments:[{kind:"Argument",name:{kind:"Name",value:"slug"},value:{kind:"Variable",name:{kind:"Name",value:"slug"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"thumbnailURL"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"curator"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"broadcaster"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:151}};n.loc.source={body:"query ClipsChatCard_Clip($slug: ID!) {\nclip(slug: $slug) {\nid\nthumbnailURL\ntitle\nslug\nurl\ncurator {\nid\ndisplayName\n}\nbroadcaster {\nid\ndisplayName\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function r(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.ClipsChatCard_Clip=function(e,t){var n={kind:e.kind,definitions:[r(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var a=i[t]||new Set,o=new Set,s=new Set;for(a.forEach((function(e){s.add(e)}));s.size>0;){var c=s;s=new Set,c.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=r(e,t);i&&n.definitions.push(i)})),n}(n,"ClipsChatCard_Clip")},SyZi:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n("q1tI"),r=n("ZGDZ"),a=n("XIEs"),o=n("nAiT"),s=n("7uM4"),c=n("C7sF"),d=n("uG/k"),l=n("sUnt"),u=n("ALJo"),m=(n("e9QR"),{"channel-points-icon--small":12,"channel-points-icon--medium":20,"channel-points-icon--large":50}),p=function(e){var t=e.iconSize||u.a.Medium,n=m[t],r=i.createElement(s.a,{asset:c.a.ChannelPoints,width:n,height:n});if(e.image){var p=h(n,e.image);r=i.createElement(d.a,{className:"channel-points-icon__image",alt:e.name||Object(o.a)(),src:p,srcSet:p===e.image.url?Object(a.a)(e.image):void 0})}return i.createElement(l.a,{className:"channel-points-icon "+t},r)},h=function(e,t){return e<=r.a.SMALL?t.url:e<=r.a.MEDIUM?t.url2x:e<=r.a.LARGE?t.url4x:t.url}},TOso:function(e,t,n){"use strict";var i=n("mrSG"),r=n("/7QA"),a=n("cMjZ"),o=n("geRD"),s=n("f00E"),c=n("DMoW"),d=n("w09P"),l=n("xXlL"),u=n("U1yz"),m=n("a1OF");var p=n("3YIm"),h=n("NMMG"),f=n("Vl9+");function v(e){var t=e.currentUserID,n=e.emotes,v=e.message,g=e.recipientUserID;if(""===t||""===v||""===g)return Promise.reject(new Error("Tried to send a whisper with nonsensical parameters."));var k=Object(s.c)(),b=Object(i.__assign)({mutation:p},Object(o.a)({message:v,nonce:k,recipientUserID:g})),S=Object(h.a)(t,g),y=Object(u.a)(r.p.apollo.client.cache,S,!0);if(y&&y.messages){var E=function(e,t){for(var n=[],i=/\S+/g,r=i.exec(e);r;){var a=r[0],o=t[a];if(o){var s=Object(m.c)(e.slice(0,r.index)),c=s?s.length:r.index;n.push({id:o.id,start:c,end:c+a.length-1})}r=i.exec(e)}return n}(v,n).map(l.a);b.optimisticResponse={sendWhisper:{__typename:"SendWhisperPayload",message:{content:{content:v,emotes:E,__typename:"MessageBody"},from:{id:t,__typename:"User"},id:k,nonce:k,sentAt:(new Date).toISOString(),deletedAt:null,editedAt:null,thread:{id:S,__typename:"WhisperThread",participants:[{id:t,__typename:"User",self:{__typename:"UserSelfConnection",whisperPermissions:{receive:c.zd.NOT_PERMITTED,__typename:"WhisperPermissions"}}},{id:g,__typename:"User",self:{__typename:"UserSelfConnection",whisperPermissions:{receive:c.zd.PERMITTED,__typename:"WhisperPermissions"}}}]},__typename:"WhisperMessage"},error:null}},b.update=function(e,t){if(t.data){var n=t.data;if(n.sendWhisper&&n.sendWhisper.message&&!n.sendWhisper.error){var i=n.sendWhisper.message,r=Object(u.a)(e,S);if(r&&r.messages){var o=r.messages.edges.findIndex((function(e){return e.node.id===k||e.node.nonce===k||e.node.id===i.id}));if(o<0){var s={cursor:(1+y.messages.edges.reduce((function(e,t){return Math.max(parseInt(t.cursor,10),e)}),0)).toString(),node:i,__typename:"WhisperMessageEdge"};r=d(r,(function(e){return e.messages.edges}),(function(e){return e.unshift(s),e}))}else r=d(r,(function(e){return e.messages.edges[o].node}),(function(){return i}));r.userLastMessageRead&&(r=d(r,(function(e){return e.userLastMessageRead.sentAt}),(function(){return i.sentAt}))),r.unreadMessagesCount=0,e.writeFragment({id:Object(a.a)(r),fragment:f,data:r})}}}}}return r.p.apollo.client.mutate(b)}n.d(t,"a",(function(){return v}))},TvOw:function(e,t,n){"use strict";var i,r;n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r})),function(e){e.Spam="spam",e.Harassment="harassment"}(i||(i={})),function(e){e.Spam="spam",e.Harassment="harassment",e.Other="other"}(r||(r={}))},Tznh:function(e,t,n){"use strict";var i,r,a=n("mrSG"),o=n("q1tI"),s=n("/MKj"),c=n("fvjX"),d=n("/7QA"),l=n("yR8l"),u=n("D7An"),m=n("kRBY"),p=n("1rIY"),h=n("+pBb"),f=n("CbHG");!function(e){e.Excluded="control",e.OptIn="opt-in",e.OptOut="opt-out"}(i||(i={})),function(e){e.FilteredMessage="chat_filter_message",e.Onboarding="onboarding",e.Other="other"}(r||(r={}));var v=Object(p.a)("ChatFilterContext",{chatFilterExperimentMembership:i.Excluded,chatFilterSettingsSource:r.Other,isShowingChatFilterSettings:!1,hideChatFilterSettings:function(){return null},showChatFilterSettings:function(){return null}}),g=v.context,k=v.withContext,b=function(e){function t(n){var a=e.call(this,n)||this;return a.hideChatFilterSettings=function(){a.setState({isShowingChatFilterSettings:!1})},a.showChatFilterSettings=function(e){a.setState({chatFilterSettingsSource:e||r.Other,isShowingChatFilterSettings:!0})},a.state={chatFilterExperimentMembership:i.Excluded,chatFilterSettingsSource:r.Other,isShowingChatFilterSettings:!1,hideChatFilterSettings:a.hideChatFilterSettings,showChatFilterSettings:a.showChatFilterSettings},t.assignmentForNewUsers=d.p.experiments.getAndTrackAssignment(u.c.ChatFiltersNewUsers),t.assignmentForOldUsers=d.p.experiments.getAndTrackAssignment(u.c.ChatFiltersExistingUsers),a}return Object(a.__extends)(t,e),t.getDerivedStateFromProps=function(e){switch(t.getExperimentMembership(e)){case i.OptIn:return void 0===e.viewerChatFilterEnabled&&e.disableViewerChatFilter(r.Other),{chatFilterExperimentMembership:i.OptIn};case i.OptOut:return void 0===e.viewerChatFilterEnabled&&e.enableViewerChatFilter(r.Other),{chatFilterExperimentMembership:i.OptOut};case i.Excluded:default:return{chatFilterExperimentMembership:i.Excluded}}},t.getExperimentMembership=function(e){if("off"===d.b.get("chat_filter_enabled","off"))return i.Excluded;if(!e.isLoggedIn||"en"!==e.languageCode)return i.Excluded;if(e.data&&e.data.currentUser&&e.data.currentUser.createdAt){var n=d.b.get("chat_filter_start","3000-01-01"),r=new Date(e.data.currentUser.createdAt)>=new Date(n)?t.assignmentForNewUsers:t.assignmentForOldUsers;switch(r){case i.Excluded:case i.OptIn:case i.OptOut:return r;default:return i.Excluded}}return i.Excluded},t.prototype.render=function(){return o.createElement(g.Provider,{value:this.state},this.props.children)},t}(o.Component);var S=Object(c.d)(Object(s.b)((function(e){return{isLoggedIn:Object(m.f)(e),languageCode:Object(m.b)(e),viewerChatFilterEnabled:e.chat.viewerChatFilterEnabled}}),(function(e){return Object(c.b)({disableViewerChatFilter:h.F,enableViewerChatFilter:h.K},e)})),Object(l.a)(f,{skip:function(e){return!e.isLoggedIn||"en"!==e.languageCode}}))(b);n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"d",(function(){return k})),n.d(t,"a",(function(){return S}))},U1yz:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("2Dht");function r(e,t,n){try{var r=e.readQuery({query:i,variables:{id:t}},n);return r?r.whisperThread:null}catch(e){return null}}},UUau:function(e,t,n){},VN3V:function(e,t,n){},"Vl9+":function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"thread"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"WhisperThread"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"messages"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"20"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"cursor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nonce"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emotes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emoteID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"from"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"to"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"deletedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"editedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sentAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"from"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"unreadMessagesCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"userLastMessageRead"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"sentAt"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:243}};n.loc.source={body:"fragment thread on WhisperThread {\nmessages(first: 20) {\nedges {\ncursor\nnode {\nid\nnonce\ncontent {\ncontent\nemotes {\nid\nemoteID\nsetID\nfrom\nto\n}\n}\ndeletedAt\neditedAt\nsentAt\nfrom {\nid\n}\n}\n}\n}\nunreadMessagesCount\nuserLastMessageRead {\nid\nsentAt\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},VrOd:function(e,t,n){},W1jp:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return d})),n.d(t,"f",(function(){return l})),n.d(t,"c",(function(){return u}));var i=n("/7QA"),r=n("DMoW"),a=n("XIEs");function o(e){return"CommunityPointsAutomaticReward"===e.__typename?e.backgroundColor||e.defaultBackgroundColor:e.backgroundColor}function s(e){return"CommunityPointsAutomaticReward"===e.__typename?e.cost||e.defaultCost:e.cost}function c(e){return e.image?{src:e.image.url,srcSet:Object(a.a)(e.image)}:{src:e.defaultImage.url,srcSet:Object(a.a)(e.defaultImage)}}function d(e){if("CommunityPointsCustomReward"===e.__typename)return e.title;switch(e.type){case r.U.SEND_HIGHLIGHTED_MESSAGE:return Object(i.d)("Highlight My Message","CommunityPointsRewards");case r.U.SINGLE_MESSAGE_BYPASS_SUB_MODE:return Object(i.d)("Send a Message in Sub-Only Mode","CommunityPointsRewards");case r.U.CHOSEN_SUB_EMOTE_UNLOCK:return Object(i.d)("Choose an Emote to Unlock","CommunityPointsRewards");case r.U.RANDOM_SUB_EMOTE_UNLOCK:return Object(i.d)("Unlock a Random Sub Emote","CommunityPointsRewards");case r.U.CHOSEN_MODIFIED_SUB_EMOTE_UNLOCK:return Object(i.d)("Modify a Single Emote","CommunityPointsRewards");default:return Object(i.d)("Reward","CommunityPointsRewards")}}function l(e){if("CommunityPointsCustomReward"===e.__typename)return!1;switch(e.type){case r.U.RANDOM_SUB_EMOTE_UNLOCK:case r.U.CHOSEN_SUB_EMOTE_UNLOCK:case r.U.CHOSEN_MODIFIED_SUB_EMOTE_UNLOCK:return!0;default:return!1}}function u(e){if("CommunityPointsCustomReward"===e.__typename)return e.prompt;switch(e.type){case r.U.SEND_HIGHLIGHTED_MESSAGE:return Object(i.d)("Write something special below and give it some glitz in chat!","CommunityPointsRewards");case r.U.SINGLE_MESSAGE_BYPASS_SUB_MODE:return Object(i.d)("Type your message below and sneakily bypass chat restrictions.","CommunityPointsRewards");case r.U.CHOSEN_SUB_EMOTE_UNLOCK:return Object(i.d)("Select an emote to unlock for 24 hours:","CommunityPointsRewards");case r.U.CHOSEN_MODIFIED_SUB_EMOTE_UNLOCK:return Object(i.d)("Select an emote to modify & unlock for 24 hours:","CommunityPointsRewards");case r.U.RANDOM_SUB_EMOTE_UNLOCK:return Object(i.d)("Click below to unlock one random emote to chat with for 24 hours!","CommunityPointsRewards");default:return Object(i.d)("Unlock this reward.","CommunityPointsRewards")}}},W8Fi:function(e,t,n){"use strict";n.d(t,"h",(function(){return a})),n.d(t,"f",(function(){return o})),n.d(t,"g",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return l})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return m}));var i=n("WgyX"),r=n("a5fV");function a(e){return e.some((function(e){return!Object(i.a)(e)&&(e.self?!!e.self.promotion:!!e.promotion)}))}function o(e){return e.some((function(e){return!!e.giftPromotion}))}function s(e){return e.some((function(e){return!!e.self&&!!e.self.paidUpgradePromotion}))}function c(e){return Object(r.a)(Object(r.d)(e.previewPrice.total,e.previewPrice.exponent),e.previewPrice.currency)}function d(e,t){var n;return(n=t&&"giftPromotion"in e?e.giftPromotion:function(e){return Object(i.a)(e)?null:e.self?e.self.promotion:e.promotion}(e))?c(n):e.price}function l(e,t){var n;return t?n=e.giftPromotion:e.self&&(n=e.self.promotion),n?Math.floor((e.priceInfo.price-n.previewPrice.price)/e.priceInfo.price*100):0}function u(e){return e.self&&e.self.paidUpgradePromotion?e.self.paidUpgradePromotion.newPrice:e.price}function m(e){return e.find((function(e){return!!e.self&&!!e.self.paidUpgradePromotion}))||null}},WJ1t:function(e,t,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"subscriptionProductPromotion"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"SubscriptionPromotion"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"newPrice"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"oldPrice"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"discountType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"discountValue"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"previewPrice"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"subscriptionProductPriceInfo"},directives:[]}]}}]}}],loc:{start:0,end:248}};i.loc.source={body:'#import "twilight/features/subscribe-button/models/subscription-product-price-info.gql"\nfragment subscriptionProductPromotion on SubscriptionPromotion {\nnewPrice\noldPrice\ndiscountType\ndiscountValue\npreviewPrice {\n...subscriptionProductPriceInfo\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};i.definitions=i.definitions.concat(n("35qb").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!r[t]&&(r[t]=!0,!0)}))),e.exports=i},WSPL:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));var i="whisperNotifications.WHISPER_THREAD_NOTIFIED";function r(e,t,n){return{type:i,threadID:e,afterMessageID:n,content:t}}},WcC5:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"Thread_ArchiveThread"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdateWhisperThreadInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateWhisperThread"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"thread"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isArchived"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:132}};n.loc.source={body:"mutation Thread_ArchiveThread($input: UpdateWhisperThreadInput!) {\nupdateWhisperThread(input: $input) {\nthread {\nid\nisArchived\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function r(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.Thread_ArchiveThread=function(e,t){var n={kind:e.kind,definitions:[r(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var a=i[t]||new Set,o=new Set,s=new Set;for(a.forEach((function(e){s.add(e)}));s.size>0;){var c=s;s=new Set,c.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=r(e,t);i&&n.definitions.push(i)})),n}(n,"Thread_ArchiveThread")},Wcon:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"Whispers_MarkThreadMessageRead"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdateWhisperThreadInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateWhisperThread"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"thread"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"unreadMessagesCount"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:151}};n.loc.source={body:"mutation Whispers_MarkThreadMessageRead($input: UpdateWhisperThreadInput!) {\nupdateWhisperThread(input: $input) {\nthread {\nid\nunreadMessagesCount\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function r(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.Whispers_MarkThreadMessageRead=function(e,t){var n={kind:e.kind,definitions:[r(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var a=i[t]||new Set,o=new Set,s=new Set;for(a.forEach((function(e){s.add(e)}));s.size>0;){var c=s;s=new Set,c.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=r(e,t);i&&n.definitions.push(i)})),n}(n,"Whispers_MarkThreadMessageRead")},WgyX:function(e,t,n){"use strict";function i(e){return!("priceInfo"in e)}n.d(t,"a",(function(){return i}))},XBQy:function(e,t,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"pointCustomizationFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"channel"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"communityPointsSettings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"pointsImageFragment"},directives:[]}]}}]}}]}}]}}],loc:{start:0,end:206}};i.loc.source={body:'#import "twilight/features/community-points/models/points-image-fragment.gql"\nfragment pointCustomizationFragment on User {\nchannel {\nid\ncommunityPointsSettings {\nname\nimage {\n...pointsImageFragment\n}\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};i.definitions=i.definitions.concat(n("r+cx").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!r[t]&&(r[t]=!0,!0)}))),e.exports=i},XIEs:function(e,t,n){"use strict";function i(e){return{"1x":e.url,"2x":e.url2x,"4x":e.url4x}}n.d(t,"a",(function(){return i}))},XQnt:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"EmotePicker_SubUpsell_PriceInfo"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"channelID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"channelID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subscriptionProducts"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"emotePickerSubUpsellPriceInfoSubscriptionProduct"},directives:[]}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"emotePickerSubUpsellPriceInfoSubscriptionProduct"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"SubscriptionProduct"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"emotePickerUserSubscriptionProduct"},directives:[]},{kind:"Field",name:{kind:"Name",value:"priceInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"subscriptionProductPriceInfo"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"promotion"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"emotePickerSubUpsellPromotionInfo"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"paidUpgradePromotion"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"emotePickerSubUpsellPromotionInfo"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"promotion"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"emotePickerSubUpsellPromotionInfo"},directives:[]}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"emotePickerSubUpsellPromotionInfo"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"SubscriptionPromotion"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"newPrice"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"oldPrice"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"discountType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"discountValue"},arguments:[],directives:[]}]}}],loc:{start:0,end:819}};i.loc.source={body:'#import "twilight/features/emote-picker/components/emote-picker-menu/user-subscription-product-fragment.gql"\n#import "twilight/features/subscribe-button/models/subscription-product-price-info.gql"\nquery EmotePicker_SubUpsell_PriceInfo($channelID: ID!) {\nuser(id: $channelID) {\nid\nsubscriptionProducts {\n...emotePickerSubUpsellPriceInfoSubscriptionProduct\n}\n}\n}\nfragment emotePickerSubUpsellPriceInfoSubscriptionProduct on SubscriptionProduct {\n...emotePickerUserSubscriptionProduct\npriceInfo {\n...subscriptionProductPriceInfo\n}\npromotion {\n...emotePickerSubUpsellPromotionInfo\n}\nself {\npaidUpgradePromotion {\n...emotePickerSubUpsellPromotionInfo\n}\npromotion {\n...emotePickerSubUpsellPromotionInfo\n}\n}\n}\nfragment emotePickerSubUpsellPromotionInfo on SubscriptionPromotion {\nnewPrice\noldPrice\ndiscountType\ndiscountValue\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};function a(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!r[t]&&(r[t]=!0,!0)}))}i.definitions=i.definitions.concat(a(n("ZhU4").definitions)),i.definitions=i.definitions.concat(a(n("35qb").definitions));var o={};function s(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),o[e.name.value]=t}})),e.exports=i,e.exports.EmotePicker_SubUpsell_PriceInfo=function(e,t){var n={kind:e.kind,definitions:[s(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var i=o[t]||new Set,r=new Set,a=new Set;for(i.forEach((function(e){a.add(e)}));a.size>0;){var c=a;a=new Set,c.forEach((function(e){r.has(e)||(r.add(e),(o[e]||new Set).forEach((function(e){a.add(e)})))}))}return r.forEach((function(t){var i=s(e,t);i&&n.definitions.push(i)})),n}(i,"EmotePicker_SubUpsell_PriceInfo")},XRPh:function(e,t,n){"use strict";var i=n("/MKj"),r=n("fvjX"),a=n("kRBY"),o=n("fezU"),s=n("mrSG"),c=n("q1tI"),d=n("/7QA"),l=n("D7An"),u=n("j0ar"),m="emote_card",p="emote_card_whitelist";var h=n("oK83"),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.emoteClickHandler=function(e){t.props.emote.emoteID&&t.props.onEmoteClick({channelID:t.props.channelID||"",channelLogin:t.props.channelLogin||"",emoteID:t.props.emote.emoteID,emoteCode:t.props.emote.alt||"",sourceID:t.props.sourceID||"",emoteSourceType:t.props.sourceType?t.props.sourceType:h.a.unknown,referrerID:t.props.referrerID||"",initialTopOffset:e.currentTarget.getBoundingClientRect().bottom})},t}return Object(s.__extends)(t,e),t.prototype.render=function(){var e,t,n=this.props.emote.alt||"";return this.props.emote.cheerAmount&&(n+=" "+this.props.emote.cheerAmount.toString(),e=c.createElement("strong",{className:"chat-line__message--cheer-amount",style:{color:this.props.emote.cheerColor}},this.props.emote.cheerAmount)),t=c.createElement(u.a,{alt:n,cheerText:e,className:"chat-line__message--emote",srcKey:"1x",srcSet:this.props.emote.images}),this.props.emote.cheerAmount||this.props.disableCard||!function(e){var t=d.b.get(m,"off");if("on"===t)return!0;if("staff"===t&&e&&e.roles&&e.roles.isStaff)return!0;var n=d.b.get(p,[]);return!!("whitelist"===t&&e&&e.id&&n.includes(e.id))}(this.props.user)||"treatment"!==d.p.experiments.getAndTrackAssignment(l.c.EmoteCard)?t:c.createElement("div",{onClick:this.emoteClickHandler,className:"chat-line__message--emote-button","data-test-selector":"emote-button"},t)},t}(c.Component);var v=Object(r.d)(Object(i.b)((function(e){return{user:Object(a.e)(e)}})),Object(o.b)((function(e){return{onEmoteClick:e.onShowEmoteCard}})))(f);v.displayName="Emote",n.d(t,"a",(function(){return v}))},YV90:function(e,t,n){"use strict";var i=n("ZaoE");n.d(t,"a",(function(){return i.b}))},ZGDZ:function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){e[e.SMALL=28]="SMALL",e[e.MEDIUM=56]="MEDIUM",e[e.LARGE=112]="LARGE"}(i||(i={}))},ZaoE:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o}));var i=n("1rIY"),r=Object(i.a)("ChannelPointsContext",{activeMultipliers:[],automaticRewards:[],balance:0,channelID:null,channelLogin:null,customRewards:[],displayName:null,emoteVariants:[],isChannelPointsEnabled:!1,isChannelPointsFeatureFlagOn:!1,isCurrentUserModerator:!1,isLoaded:!1,pointIcon:null,pointName:null,raidPointAmount:0,rewardMap:{},earning:null}),a=r.context,o=r.withContext},ZhU4:function(e,t,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"emotePickerUserSubscriptionProduct"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"SubscriptionProduct"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emoteSetID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"price"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tier"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emotes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"subscriptionProductEmote"},directives:[]}]}}]}}],loc:{start:0,end:226}};i.loc.source={body:'#import "twilight/features/subscribe-button/models/subscription-product-emote.gql"\nfragment emotePickerUserSubscriptionProduct on SubscriptionProduct {\nid\nemoteSetID\nname\nprice\ntier\nurl\nemotes {\n...subscriptionProductEmote\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};i.definitions=i.definitions.concat(n("dq0Q").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!r[t]&&(r[t]=!0,!0)}))),e.exports=i},ZtEv:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"e",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"f",(function(){return c}));var i,r,a,o,s=n("0Log");n.d(t,"d",(function(){return s.ModerationActions})),function(e){e[e.Message=0]="Message",e[e.ExtensionMessage=1]="ExtensionMessage",e[e.Moderation=2]="Moderation",e[e.ModerationAction=3]="ModerationAction",e[e.TargetedModerationAction=4]="TargetedModerationAction",e[e.AutoMod=5]="AutoMod",e[e.SubscriberOnlyMode=6]="SubscriberOnlyMode",e[e.FollowerOnlyMode=7]="FollowerOnlyMode",e[e.SlowMode=8]="SlowMode",e[e.EmoteOnlyMode=9]="EmoteOnlyMode",e[e.R9KMode=10]="R9KMode",e[e.Connected=11]="Connected",e[e.Disconnected=12]="Disconnected",e[e.Reconnect=13]="Reconnect",e[e.Hosting=14]="Hosting",e[e.Unhost=15]="Unhost",e[e.Hosted=16]="Hosted",e[e.Subscription=17]="Subscription",e[e.Resubscription=18]="Resubscription",e[e.GiftPaidUpgrade=19]="GiftPaidUpgrade",e[e.AnonGiftPaidUpgrade=20]="AnonGiftPaidUpgrade",e[e.PrimePaidUpgrade=21]="PrimePaidUpgrade",e[e.PrimeCommunityGiftReceivedEvent=22]="PrimeCommunityGiftReceivedEvent",e[e.ExtendSubscription=23]="ExtendSubscription",e[e.SubGift=24]="SubGift",e[e.AnonSubGift=25]="AnonSubGift",e[e.Clear=26]="Clear",e[e.RoomMods=27]="RoomMods",e[e.RoomState=28]="RoomState",e[e.Raid=29]="Raid",e[e.Unraid=30]="Unraid",e[e.Ritual=31]="Ritual",e[e.Notice=32]="Notice",e[e.Info=33]="Info",e[e.BadgesUpdated=34]="BadgesUpdated",e[e.Purchase=35]="Purchase",e[e.BitsCharity=36]="BitsCharity",e[e.CrateGift=37]="CrateGift",e[e.RewardGift=38]="RewardGift",e[e.SubMysteryGift=39]="SubMysteryGift",e[e.AnonSubMysteryGift=40]="AnonSubMysteryGift",e[e.StandardPayForward=41]="StandardPayForward",e[e.CommunityPayForward=42]="CommunityPayForward",e[e.FirstCheerMessage=43]="FirstCheerMessage",e[e.BitsBadgeTierMessage=44]="BitsBadgeTierMessage",e[e.InlinePrivateCallout=45]="InlinePrivateCallout",e[e.ChannelPointsReward=46]="ChannelPointsReward"}(i||(i={})),function(e){e[e.Post=0]="Post",e[e.Action=1]="Action",e[e.PostWithMention=2]="PostWithMention"}(r||(r={})),function(e){e[e.Ban=0]="Ban",e[e.Timeout=1]="Timeout",e[e.Delete=2]="Delete"}(a||(a={})),function(e){e[e.MessageRejectedPrompt=0]="MessageRejectedPrompt",e[e.CheerMessageRejectedPrompt=1]="CheerMessageRejectedPrompt",e[e.MessageRejected=2]="MessageRejected",e[e.MessageAllowed=3]="MessageAllowed",e[e.MessageDenied=4]="MessageDenied",e[e.CheerMessageDenied=5]="CheerMessageDenied",e[e.CheerMessageTimeout=6]="CheerMessageTimeout",e[e.MessageModApproved=7]="MessageModApproved",e[e.MessageModDenied=8]="MessageModDenied"}(o||(o={}));var c=new Set(["usage_clear","usage_commercial","usage_host","usage_unhost","usage_raid","usage_unraid","usage_slow_on","usage_slow_off","usage_followers_on","usage_followers_off","usage_emote_only_on","usage_emote_only_off","usage_subs_on","usage_subs_off","usage_r9k_on","usage_r9k_off","unrecognized_cmd"])},a1OF:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return m})),n.d(t,"e",(function(){return p})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return f}));var i=n("mrSG"),r=n("/7QA"),a=n("oe5X"),o=n("0FG4"),s=n("kRBY"),c=n("60o1"),d=["#FF0000","#0000FF","#008000","#B22222","#FF7F50","#9ACD32","#FF4500","#2E8B57","#DAA520","#D2691E","#5F9EA0","#1E90FF","#FF69B4","#8A2BE2","#00FF7F"],l={};function u(e,t,n,r,a,o,s){void 0===r&&(r=null),void 0===a&&(a=!1),void 0===o&&(o=!1),void 0===s&&(s=!1);var d=Object(c.a)(t.displayName,t.username);return{badges:t.badges||{},badgeDynamicData:t.badgeDynamicData||{},bits:t.bits,user:Object(i.__assign)(Object(i.__assign)({},d),{userLogin:t.username,userID:t.userID,userType:t.userType,color:t.color||m(t.userID)}),messageParts:p(e,t.emotes||{},t.bits,n,t.username,r||void 0),deleted:a,banned:s,hidden:o,timestamp:Date.now()}}function m(e,t){return void 0===t&&(t=15),"number"!=typeof l[e]&&(l[e]=Math.floor(Math.random()*t)),d[l[e]]}function p(e,t,n,i,c,d){var l=Object(s.e)(r.p.store.getState()),u={cheers:n?i:void 0,emotes:{type:o.a.Position,map:t},links:{parseClips:!0,parseVods:!0},mentions:{senderLogin:c,sessionUser:l},flags:d};return Object(a.a)(e,u)}function h(e){return e.match(/[^\uD800-\uDFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDFFF]/g)}function f(e,t){return"https://static-cdn.jtvnw.net/emoticons/v1/"+e+"/"+Math.min(Math.ceil(t),3)+".0"}},a5fV:function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"a",(function(){return s})),n.d(t,"e",(function(){return c})),n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return l}));var i=n("/7QA"),r=n("WgyX"),a=n("W8Fi");function o(e,t){return e/Math.pow(10,t)}function s(e,t){return Object(i.f)(e,{style:"currency",currency:t})}function c(e,t){return void 0===t&&(t=!1),Object(a.h)([e])||Object(a.f)([e])?Object(a.d)(e,t):d(e)}function d(e){return!Object(r.a)(e)&&e.priceInfo?s(o(e.priceInfo.total,e.priceInfo.exponent),e.priceInfo.currency):e.price}function l(e,t){return t?Object(a.a)(t):s(o(e.total,e.exponent),e.currency)}},b5vT:function(e,t,n){"use strict";var i=n("TSYQ"),r=n("q1tI"),a=n("/7QA"),o=n("GnwI"),s=n("Ws8v"),c=n("hnjF"),d=n("X2PJ"),l=n("7uM4"),u=n("C7sF"),m=n("b7S+"),p=(n("GOKC"),r.createElement(s.a,{alignItems:c.b.Center,background:d.a.Overlay,borderRadius:d.b.Small,className:"emote-button__lock",color:d.c.Overlay,"data-test-selector":"emote-button-lock",display:c.d.InlineFlex,justifyContent:c.h.Center,position:c.j.Absolute,zIndex:c.o.Above},r.createElement(l.a,{asset:u.a.Lock,height:10,width:10}))),h=function(e){var t=i("emote-button__link",{"emote-button__link--locked":!e.onClick}),n=e.emote,s=n.displayName,d=n.srcSet;if(!d)return null;var l=d.split(" ")[0],u=r.createElement("img",{className:"emote-picker__image",src:l,srcSet:d,alt:s});if(e.isCriticalImage){for(var h={},f=0,v=d.split(",");f<v.length;f++){var g=v[f].trim().split(" "),k=g[1],b=g[0];h[k]=b}u=r.createElement(o.CriticalImage,{className:"emote-picker__emote-image",src:l,srcSet:h,alt:s||""})}return r.createElement("div",{className:"emote-button"},r.createElement(m.a,{label:s||Object(a.d)("Emote","EmoteButton"),direction:m.c.Bottom},r.createElement(c.g,{display:c.d.Flex,alignItems:c.b.Center,justifyContent:c.h.Center},r.createElement("button",{"data-test-selector":"emote-button-clickable",className:t,"aria-label":s,name:s,onClick:e.onClick?e.onClick.bind(null,e.emote):void 0,"data-a-target":s},r.createElement("figure",null,e.locked?p:null,u)))))};n.d(t,"a",(function(){return h}))},"bAm+":function(e,t,n){"use strict";var i,r=n("mrSG"),a=n("/7QA"),o=n("geRD"),s=n("Wcon"),c=n("DMoW"),d=n("L9xt"),l=n("CMUD");function u(e){var t=function(e){try{return a.p.apollo.client.readQuery({query:l,variables:{threadID:e}})}catch(e){return a.k.warn("Could not find cached whisper thread data:",e),null}}(e.threadID);if(t){var n=t.currentUser,r=t.whisperThread;if(n&&n.id&&n.login&&r){var o=r.participants.find((function(e){return!!e&&e.id!==n.id}));if(o&&o.self&&o.self.whisperPermissions){var s={conversation_id:e.threadID,message_id:null,message_uuid:e.messageID,read_mode:e.automatic?i.Focus:i.Manual,recipient_id:n.id,recipient_login:n.login,sender_id:o.id,sender_login:o.login,sender_temp_permitted:o.self.whisperPermissions.receive===c.zd.TEMPORARY};a.o.track(d.SpadeEventType.WhisperRead,s)}else a.k.warn("Failed to find whisper sender in cache.")}else a.k.warn("Failed to find required data in cache.")}}!function(e){e.Focus="focus read",e.Manual="manual read"}(i||(i={})),n.d(t,"a",(function(){return p}));var m={};function p(e,t,n){var i=m[e.threadID];if(i){if(i.lastReadCursorID>=t)return;clearTimeout(i.timeoutHandle)}var c=setTimeout((function(){var t=Object(r.__assign)({mutation:s},Object(o.b)({threadID:e.threadID,lastReadMessageID:e.lastReadMessageID},{updateWhisperThread:{thread:{__typename:"WhisperThread",id:e.threadID,unreadMessagesCount:0},__typename:"UpdateWhisperThreadPayload"}}));a.p.apollo.client.mutate(t),delete m[e.threadID],u({automatic:n,messageID:e.lastReadMessageID,threadID:e.threadID})}),250);m[e.threadID]={timeoutHandle:c,lastReadCursorID:t}}},"c/47":function(e,t,n){},cMjZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("K/JX");function r(e){return e&&Object(i.c)(e)||""}},cpJf:function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return a})),function(e){e.Chat="stream_chat",e.Feeds="feeds",e.Room="chatroom",e.Whisper="whisper",e.VodChat="vod-chat"}(i||(i={}));var r={TriHard:{count:196568036},Kappa:{count:192158118},"4Head":{count:155758710},PogChamp:{count:151485090},cmonBruh:{count:146352878},BibleThump:{count:56472964},WutFace:{count:45069031},Kreygasm:{count:41387580},DansGame:{count:38097659},hi5F:{count:34986404},SMOrc:{count:34734484},KappaPride:{count:34262839},VoHiYo:{count:27886434},SwiftRage:{count:24561900},ResidentSleeper:{count:24438298},EleGiggle:{count:19891526},FailFish:{count:19118343},NotLikeThis:{count:18802905},Keepo:{count:18351415},BabyRage:{count:18220906},MingLee:{count:18026207},pbfSSH:{count:16911241},forsenE:{count:14960299},HeyGuys:{count:14851569},ANELE:{count:14648986},PJSalt:{count:14438861}},a=["354","49106","4339","48","25","55338","70433","1902","68856","81103","76171","27509"]},cys1:function(e,t,n){"use strict";var i,r=n("q1tI"),a=n("/7QA"),o=n("gvGA"),s=n("5zf8"),c=n("4rCz"),d=n("mrSG"),l=n("yR8l"),u=n("+GjP"),m=n("2xye"),p=n("PL8s"),h=n("+80q"),f=n("X2PJ"),v=n("Ws8v"),g=n("hnjF"),k=n("sUnt"),b=n("i4Ys"),S=n("L/cU"),y=n("fPaz"),E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={hasImageLoadingError:!1},t.handleImageError=function(){t.setState({hasImageLoadingError:!0})},t}return Object(d.__extends)(t,e),t.prototype.render=function(){var e=a.a.defaultStreamPreviewURL;return!this.state.hasImageLoadingError&&this.props.imageURL&&(e=this.props.imageURL),r.createElement(S.a,{aspect:y.c.Aspect16x9,alt:this.props.altText,src:e,onError:this.handleImageError})},t}(r.Component),_=(n("Epr8"),"https://static-cdn.jtvnw.net/emoticons/v1/58765/2.0"),C={ERROR:"chat-card-error",TITLE:"chat-card-title",DESCRIPTION:"chat-card-description"},N=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderErrorCard=function(){var e=r.createElement("img",{"data-test-selector":C.ERROR,src:_,className:"chat-card__error-img",alt:""});return t.renderCardContent(e,t.props.error)},t.renderCardContent=function(e,t){var n,i;return t?(n=r.createElement(h.a,{bold:!0,"data-test-selector":C.TITLE,title:t.title},t.title),i=r.createElement(h.a,{color:f.c.Alt2,"data-test-selector":C.DESCRIPTION},t.description)):(e=r.createElement(p.a,{overlay:!0}),n=r.createElement(p.a,{width:180}),i=r.createElement(p.a,{width:120})),r.createElement(v.a,{display:g.d.Flex,flexWrap:g.f.NoWrap,padding:.5},r.createElement(v.a,{className:"chat-card__preview-img",background:f.a.Alt2,display:g.d.Flex,alignItems:g.b.Center,justifyContent:g.h.Center,flexShrink:0},e),r.createElement(k.a,{display:g.d.Flex,alignItems:g.b.Center,overflow:g.i.Hidden},r.createElement(k.a,{padding:{left:1},fullWidth:!0},r.createElement(k.a,{className:"chat-card__title",ellipsis:!0},n),r.createElement(k.a,{ellipsis:!0},i))))},t}return Object(d.__extends)(t,e),t.prototype.render=function(){var e;if(this.props.error)e=this.renderErrorCard();else if(this.props.data){var t=Object(u.g)(this.props.data.contentURL,{tt_medium:m.PageviewMedium.Chat,tt_content:m.PageviewContent.ChatCard}),n=r.createElement(E,{altText:this.props.data.title,key:this.props.data.previewImageURL,imageURL:this.props.data.previewImageURL});e=r.createElement(v.a,{background:f.a.Base,borderRadius:f.b.Medium,display:g.d.Flex,fullWidth:!0},r.createElement(b.a,{linkTo:t,targetBlank:!0,type:b.b.Alpha,borderRadius:f.b.Medium},this.renderCardContent(n,{title:this.props.data.title,description:this.props.data.description})))}else e=this.renderCardContent();return r.createElement(v.a,{borderRadius:f.b.Medium,elevation:1},e)},t}(r.Component),D=n("SceP"),w={isTimedOut:!1},O=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=w,t.timeoutID=null,t}return Object(d.__extends)(t,e),t.getDerivedStateFromProps=function(e,t){return e.data.clip&&t.isTimedOut?{isTimedOut:!1}:null},t.prototype.componentDidMount=function(){var e=this;this.props.data.clip||(this.timeoutID=setTimeout((function(){e.setState({isTimedOut:!0})}),5e3))},t.prototype.componentDidUpdate=function(e){!e.data.clip&&this.props.data.clip&&this.timeoutID&&(clearTimeout(this.timeoutID),this.timeoutID=null)},t.prototype.render=function(){var e=this.props.data,t=e.clip,n=e.error,i=e.loading;return n||this.state.isTimedOut?r.createElement(N,{error:{title:Object(a.d)("Something went wrong","ClipsChatCard"),description:Object(a.d)("We couldn't find that Clip","ClipsChatCard")}}):i||!t?r.createElement(N,null):r.createElement(N,{data:{title:t.title||(t.broadcaster&&t.broadcaster.displayName?Object(a.d)("Clip of {broadcaster}",{broadcaster:t.broadcaster.displayName},"ClipsChatCard"):""),description:t.curator&&t.curator.displayName?Object(a.d)("Clipped by {curator}",{curator:t.curator.displayName},"ClipsChatCard"):"",previewImageURL:t.thumbnailURL,contentURL:t.url}})},t}(r.Component),I=Object(l.a)(D,{options:function(e){return{variables:{slug:e.slug},notifyOnNetworkStatusChange:!0,fetchPolicy:e.forceNetworkRequest?"cache-first":"cache-only"}}})(O),T=n("TSYQ"),F=n("gTu3"),j=(n("lpj/"),(i={})[F.a.Default]="",i[F.a.Recipient]="mention-fragment--recipient",i[F.a.Sender]="mention-fragment--sender",i),P=function(e){var t=e.isAtMention?"@":"",n=T("mention-fragment",j[e.currentUserMentionRelation]);return r.createElement("span",{className:n,"data-a-target":"chat-message-mention"},""+t+e.recipient)};P.displayName="MentionFragment";var U,M=n("QVaV"),x=n("sU0Q"),A=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(d.__extends)(t,e),t.prototype.render=function(){var e=this.props.data,t=e.video,n=e.error;if(e.loading||!t)return r.createElement(N,null);if(n||!t.owner||!t.owner.login||!t.publishedAt||!t.title)return r.createElement(N,{error:{title:Object(a.d)("Something went wrong","VideoChatCard"),description:Object(a.d)("We couldn't find that video","VideoChatCard")}});var i=r.createElement(h.a,null,Object(a.c)(new Date(t.publishedAt),"medium"),r.createElement("span",null," · "),Object(M.a)(t.owner.login,t.owner.displayName));return r.createElement(N,{data:{title:t.title,description:i,previewImageURL:t.previewThumbnailURL,contentURL:this.props.url}})},t}(r.Component),R=Object(l.a)(x,{options:function(e){return{variables:{videoID:e.id},notifyOnNetworkStatusChange:!0,fetchPolicy:"cache-first"}}})(A),L=n("ZtEv"),W=n("RcPG"),B=n("Jsra"),V=n("x0+1"),G=n("XRPh"),q=n("u5aL"),H=n("fvjX"),z=n("3sMn"),Q=n("Tznh"),K=n("VJH5"),X=n("dEDE"),Y=n("akKH"),$=n("y0tB");!function(e){e.CancelButton="flagged-fragment-cancel",e.ConfirmButton="flagged-fragment-confirm",e.FeedbackButton="flagged-fragment-feedback",e.FeedbackNo="flagged-fragment-no",e.FeedbackYes="flagged-fragment-yes",e.SettingsLink="flagged-fragment-settings",e.Title="flagged-fragment-title"}(U||(U={}));var J=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={feedbackSelection:null,textShown:!1},t.hasTrackedImpression=!1,t.showSettings=function(){t.props.showChatFilterSettings(Q.c.FilteredMessage),t.props.updateChatConfigState({isSettingsOpen:!0}),t.props.onDismissBalloon()},t.showText=function(){t.props.onShowText(),t.setState({textShown:!0}),a.o.track(m.SpadeEventType.ChatFilterMessageInteraction,t.getCommonTrackingProps())},t.onAffirmativeFeedbackSelected=function(){t.setState({feedbackSelection:!0})},t.onNegativeFeedbackSelected=function(){t.setState({feedbackSelection:!1})},t.onSubmit=function(){t.props.onDismissBalloon(),a.o.track(m.SpadeEventType.ChatFilterFeedbackInteraction,Object(d.__assign)(Object(d.__assign)({},t.getCommonTrackingProps()),{value:t.state.feedbackSelection?t.getAffirmativeText():t.getNegativeText()}))},t}return Object(d.__extends)(t,e),t.prototype.render=function(){var e=this,t=Object(a.d)("Cancel","FlaggedFragmentBalloonContent");return this.state.textShown?r.createElement(k.a,{padding:1},r.createElement(Y.a,{label:Object(a.d)("Help improve our filters. Was this message correctly hidden?","FlaggedFragmentBalloonContent")},r.createElement($.a,{label:this.getAffirmativeText(),name:"flagged-fragment-feedback",onChange:this.onAffirmativeFeedbackSelected,"data-test-selector":U.FeedbackYes}),r.createElement($.a,{label:this.getNegativeText(),name:"flagged-fragment-feedback",onChange:this.onNegativeFeedbackSelected,"data-test-selector":U.FeedbackNo})),r.createElement(k.a,{display:g.d.Flex,justifyContent:g.h.End},r.createElement(k.a,{margin:{right:1}},r.createElement(X.a,{onClick:this.props.onDismissBalloon,type:X.d.Secondary,"data-test-selector":U.CancelButton},t)),r.createElement(X.a,{disabled:null===this.state.feedbackSelection,onClick:this.onSubmit,"data-test-selector":U.FeedbackButton},Object(a.d)("Submit","FlaggedFragmentBalloonContent")))):(this.hasTrackedImpression||(a.o.track(m.SpadeEventType.ChatFilterMessageImpression,this.getCommonTrackingProps()),this.hasTrackedImpression=!0),r.createElement(k.a,{padding:1},r.createElement(h.a,{bold:!0,type:h.e.H6,"data-test-selector":U.Title},this.getCategoryTitle()),Object(a.d)("Would you like to see this message? It has been hidden for you based on your <x:link>Chat Filter settings</x:link>.",{"x:link":function(t){return r.createElement(B.a,{onClick:e.showSettings,"data-test-selector":U.SettingsLink},t)}},"FlaggedFragmentBalloonContent"),r.createElement(k.a,{display:g.d.Flex,justifyContent:g.h.End},r.createElement(k.a,{margin:{right:1}},r.createElement(X.a,{onClick:this.props.onDismissBalloon,type:X.d.Secondary,"data-test-selector":U.CancelButton},t)),r.createElement(X.a,{onClick:this.showText,"data-test-selector":U.ConfirmButton},Object(a.d)("Show Message","FlaggedFragmentBalloonContent")))))},t.prototype.getCategoryTitle=function(){var e=this.props.messagePart.categories;return 1!==Object.values(e).filter((function(e){return!!e})).length?Object(a.d)("Message Blocked","FlaggedFragmentBalloonContent"):e[K.a.Aggressive]?Object(a.d)("Hostile Message Blocked","FlaggedFragmentBalloonContent"):e[K.a.Identity]?Object(a.d)("Discriminatory Message Blocked","FlaggedFragmentBalloonContent"):e[K.a.Sexual]?Object(a.d)("Sexually Explicit Message Blocked","FlaggedFragmentBalloonContent"):Object(a.d)("Profanity Blocked","FlaggedFragmentBalloonContent")},t.prototype.getAffirmativeText=function(){return Object(a.d)("Yes","FlaggedFragmentBalloonContent")},t.prototype.getNegativeText=function(){return Object(a.d)("No","FlaggedFragmentBalloonContent")},t.prototype.getCommonTrackingProps=function(){var e=this.props.messagePart;return{channel_id:this.props.channelID||"",channel:this.props.channelLogin||"",msg_uuid:this.props.messageID||"",word:e.originalText,aggressive_language_detected:!!e.categories[K.a.Aggressive],explicit_language_detected:!!e.categories[K.a.Sexual],identity_language_detected:!!e.categories[K.a.Identity],profane_language_detected:!!e.categories[K.a.Profanity]}},t}(r.Component);var Z,ee=Object(H.d)(Object(Q.d)((function(e){return e})),Object(z.b)((function(e){return{updateChatConfigState:function(t){return e.updateChatConfigState(t)},isSettingsOpen:e.isSettingsOpen}})))(J),te=(n("VN3V"),function(e){var t,n=e.content,i=e.highlightType,a=T("text-fragment",((t={})["text-fragment--moderated-highlight"]=i===W.a.ModeratedText,t));return r.createElement("span",{className:a,"data-a-target":"chat-message-text"},n)}),ne=n("ygYM");n("UUau");!function(e){e.Balloon="flagged-fragment-balloon",e.Container="flagged-fragment-container",e.Target="flagged-fragment-span"}(Z||(Z={}));var ie=function(e){function t(t){var n=e.call(this,t)||this;return n.state={active:!1,balloonDirection:ne.b.TopCenter,balloonTailOffset:0,balloonXOffset:0,displayed:!1},n.setTopRef=function(e){n.topRef=e},n.setBalloonContentRef=function(e){n.balloonContentRef=e,n.state.active&&n.setState(Object(d.__assign)({},n.getBalloonState()))},n.onClickOut=function(){n.setState({active:!1})},n.onClick=function(){n.setState({active:!0})},n.onShowText=function(){n.setState({displayed:!0},(function(){n.setState(Object(d.__assign)({},n.getBalloonState()))}))},n.onDismissBalloon=function(){n.setState({active:!1})},n.placeholder=new Array(t.messagePart.length+1).join("*"),n}return Object(d.__extends)(t,e),t.prototype.render=function(){return this.state.active?r.createElement("span",{ref:this.setTopRef,"data-test-selector":Z.Container},r.createElement(g.g,{display:g.d.Inline,position:g.j.Relative},r.createElement(q.a,{onClickOut:this.onClickOut},this.renderContent(),r.createElement(ne.a,{direction:this.state.balloonDirection,offsetX:this.state.balloonXOffset+"px",show:!0,size:ne.c.Medium,tailOffset:this.state.balloonTailOffset},r.createElement("span",{ref:this.setBalloonContentRef,"data-test-selector":Z.Balloon}),r.createElement(ee,Object(d.__assign)({},this.props,{onDismissBalloon:this.onDismissBalloon,onShowText:this.onShowText})))))):r.createElement("span",{ref:this.setTopRef,"data-test-selector":Z.Container},this.renderContent())},t.prototype.renderContent=function(){var e={"flagged-fragment":!(this.state.displayed&&!this.state.active),"flagged-fragment--active":this.state.active};return this.state.displayed?r.createElement("span",{className:T(e),"data-test-selector":Z.Target},oe(this.props.messagePart.content)):r.createElement("span",{className:T(e),onClick:this.onClick,"data-test-selector":Z.Target},r.createElement(te,{content:this.placeholder}))},t.prototype.getBalloonState=function(){if(this.balloonContentRef&&this.topRef&&this.topRef.offsetParent){var e=this.topRef.offsetParent.getBoundingClientRect(),t=this.balloonContentRef.getBoundingClientRect(),n=this.state.balloonDirection;t.top<e.top&&(n=ne.b.BottomCenter);var i=e.left+20,r=t.left,a=this.state.balloonXOffset-(r-i);return{balloonDirection:n,balloonTailOffset:e.width/2-a-20,balloonXOffset:a}}return{balloonDirection:ne.b.TopCenter,balloonTailOffset:0,balloonXOffset:0}},t}(r.Component),re=(n("Ro6I"),function(e){var t=e.displayText,n=e.url,i=e.highlighted;return r.createElement(B.a,{className:T("link-fragment",{"link-fragment--highlighted":i}),linkTo:n,targetBlank:!0,rel:"noreferrer noopener"},t)});function ae(e,t,n,i){void 0===n&&(n=!1),void 0===i&&(i=!1);var a=t.content,o=a.displayText,s=a.url;return i?r.createElement(te,{key:"message-span-"+e,content:o}):r.createElement(re,{key:e+"-link",highlighted:n,displayText:o,url:s})}function oe(e,t,n){void 0===t&&(t={}),void 0===n&&(n=!1);var i=null,a=e.reduce((function(a,s,c){var d=[];switch(c>0&&e[c-1].type!==W.a.Text&&s.type!==W.a.Text&&d.push(" "),s.type){case W.a.Text:case W.a.ModeratedText:var l=s.content,u=s.type;d.push(r.createElement(te,{key:c,content:l,highlightType:u}));break;case W.a.FlaggedSegment:d.push(r.createElement(ie,{key:c,channelID:t.chatChannelID,channelLogin:t.chatChannelLogin,messageID:t.messageSourceID,messagePart:s}));break;case W.a.CurrentUserHighlight:d.push(r.createElement(P,{isAtMention:!1,currentUserMentionRelation:F.a.Recipient,recipient:s.content,key:c}));break;case W.a.Mention:d.push(r.createElement(P,{isAtMention:!0,currentUserMentionRelation:s.content.currentUserMentionRelation,recipient:s.content.recipient,key:c}));break;case W.a.Emote:d.push(r.createElement(G.a,{key:c,emote:s.content,channelID:t.chatChannelID,channelLogin:t.chatChannelLogin,sourceID:t.messageSourceID,sourceType:t.emoteSourceType,referrerID:t.messageAuthorID,disableCard:n}));break;case W.a.Link:d.push(ae(c,s,t.isHighlighted,t.disableLinks));break;case W.a.ClipLink:i||t.disableChatCard||(i=r.createElement(o.a,{key:c+"-ErrorBoundary"},r.createElement(I,{slug:s.content.slug,forceNetworkRequest:t.forceClipsNetworkRequest}))),d.push(ae(c,s,t.isHighlighted,t.disableLinks));break;case W.a.VideoLink:i||t.disableChatCard||(i=r.createElement(R,{key:c,id:s.content.id,url:s.content.url})),d.push(ae(c,s,t.isHighlighted,t.disableLinks))}return a.concat(d)}),[]);return i&&(a=a.concat(i)),a}function se(e){if(e.moderationType===L.e.Delete){var t=e,n=t.userLogin,i=t.body;return r.createElement(V.a,{targetLogin:n,messageBody:i})}if((e=e).moderationType===L.e.Ban)return e.reason?r.createElement("span",{className:"chat-line__moderation--ban-with-reason"},Object(a.d)("{userLogin} has been banned. Reason: {reason}",{userLogin:e.userLogin,reason:e.reason},"ChatLine")):r.createElement("span",{className:"chat-line__moderation--ban"},Object(a.d)("{userLogin} is now banned from this channel.",{userLogin:e.userLogin},"ChatLine"));if(e.reason&&e.duration){var o=Object(a.d)("{userLogin} has been timed out for {duration} seconds. Reason: {reason}",{duration:e.duration,reason:e.reason,userLogin:e.userLogin},"ChatLine");return r.createElement("span",{className:"chat-line__moderation--timeout-with-reason"},o)}return e.duration?r.createElement("span",{className:"chat-line__moderation--timeout"},Object(a.d)("{userLogin} has been timed out for {duration} seconds.",{userLogin:e.userLogin,duration:e.duration},"ChatLine")):void 0}function ce(e){var t=e.daysLeft;0===t&&(t=e.hoursLeft);var n,i={bitsTotal:r.createElement("strong",null,Object(c.f)(e.total,{style:"currency",currency:"USD"})),charityName:r.createElement("strong",null,e.charityName),learnMoreURL:r.createElement(B.a,{linkTo:e.learnMore,targetBlank:!0},e.learnMore),hashtag:r.createElement("strong",null,e.hashtag),timeRemaining:Object(c.f)(t)};return r.createElement("span",null,0===e.daysLeft?(n=i,Object(a.d)("{bitsTotal} total raised so far for {charityName}! {timeRemaining} more hours to show support. Cheer and include {hashtag}. Learn More at {learnMoreURL}",{bitsTotal:n.bitsTotal,charityName:n.charityName,timeRemaining:n.timeRemaining,hashtag:n.hashtag,learnMoreURL:n.learnMoreURL},"ChatLine")):function(e){return Object(a.d)("{bitsTotal} total raised so far for {charityName}! {timeRemaining} more days to show support. Cheer and include {hashtag}. Learn More at {learnMoreURL}",{bitsTotal:e.bitsTotal,charityName:e.charityName,timeRemaining:e.timeRemaining,hashtag:e.hashtag,learnMoreURL:e.learnMoreURL},"ChatLine")}(i))}function de(e){var t=e.enabled?Object(a.d)("This room is now in slow mode. You may send messages every {length} seconds.",{length:e.length},"ChatLine"):Object(a.d)("This room is no longer in slow mode.","ChatLine");return r.createElement("span",null,t)}function le(e){var t;if(e.length>0){var n=e.join(", ");t=Object(a.d)("The moderators of this channel are: {moderatorList}",{moderatorList:n},"ChatLine")}else t=Object(a.d)("There are no moderators of this channel.","ChatLine");return r.createElement("span",null,t)}function ue(e){if(e.enabled){var t=0===e.length?Object(a.d)("This room is in followers-only mode.","ChatLine"):Object(a.d)("This room is now in {length} followers-only mode.",{length:Object(s.b)(60*e.length)},"ChatLine");return r.createElement("span",null,t)}return r.createElement("span",null,Object(a.d)("This room is no longer in followers-only mode.","ChatLine"))}function me(e){return e.enabled?r.createElement("span",null,Object(a.d)("This room is now in emote-only mode.","ChatLine")):r.createElement("span",null,Object(a.d)("This room is no longer in emote-only mode.","ChatLine"))}function pe(e){var t=e.enabled?Object(a.d)("This room is now in subscriber-only mode.","ChatLine"):Object(a.d)("This room is no longer in subscriber-only mode.","ChatLine");return r.createElement("span",null,t)}function he(e){return e.enabled?r.createElement("span",null,Object(a.d)("This room is now in unique-chat mode.","ChatLine")):r.createElement("span",null,Object(a.d)("This room is no longer in unique-chat mode.","ChatLine"))}function fe(e){return e.isAutohost?Object(a.d)("{host} is now auto hosting you for up to {viewerCount, number} viewers.",{host:e.hostingChannel,viewerCount:e.viewerCount},"ChatLine"):e.viewerCount<=2?Object(a.d)("{host} is now hosting you.",{host:e.hostingChannel},"ChatLine"):Object(a.d)("{host} is now hosting you for up to {viewerCount, number} viewers.",{host:e.hostingChannel,viewerCount:e.viewerCount},"ChatLine")}function ve(e,t){void 0===t&&(t=!1);var n=t?e.getHours():e.getHours()%12;t||0!==n||(n=12);var i=n.toString(),r=e.getMinutes(),a=r.toString();return r<10&&(a="0"+a),t&&n<10&&(i="0"+i),i+":"+a}function ge(e,t){return void 0===t&&(t=!1),r.createElement("span",{key:"timestamp",className:"chat-line__timestamp","data-a-target":"chat-timestamp","data-test-selector":"chat-timestamp"},ve(new Date(e),t))}function ke(e){return r.createElement("span",{key:"timestamp",className:"chat-line__timestamp","data-a-target":"chat-timestamp","data-test-selector":"chat-timestamp"},function(e,t){void 0===t&&(t={});var n=a.p.intl.getLanguageCode()||"en";return Intl.DateTimeFormat(n,t).format(e)}(new Date(e),{hour:"numeric",minute:"numeric"}))}n.d(t,"f",(function(){return oe})),n.d(t,"g",(function(){return se})),n.d(t,"b",(function(){return ce})),n.d(t,"j",(function(){return de})),n.d(t,"i",(function(){return le})),n.d(t,"d",(function(){return ue})),n.d(t,"c",(function(){return me})),n.d(t,"k",(function(){return pe})),n.d(t,"h",(function(){return he})),n.d(t,"e",(function(){return fe})),n.d(t,"a",(function(){return ve})),n.d(t,"l",(function(){return ge})),n.d(t,"m",(function(){return ke}))},dGMd:function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return g})),n.d(t,"e",(function(){return k})),n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return S})),n.d(t,"f",(function(){return y}));var i=n("mrSG"),r=n("w09P"),a=n("q1tI"),o=n("/7QA"),s=n("S4w9"),c=n("geRD"),d=n("g+79"),l=n("W1jp"),u=n("zdrs"),m=n("2zj6"),p=n("8XBm"),h="300238151",f="436872863",v="channel_points";function g(e){return{icon:a.createElement(d.a,{data:e.reward,size:d.b.ExtraSmall}),title:Object(o.d)("Share Your New Emote","EmoteReward"),body:Object(o.d)("That's a fancy emote you've got there. Share it! You can also get some more.","EmoteReward"),inputValue:e.inputValue,disableCommands:!0}}function k(e,t,n){return o.p.apollo.client.mutate(Object(i.__assign)({mutation:p},Object(c.a)({channelID:e,cost:Object(l.b)(t),transactionID:n})))}function b(e,t,n,r){return o.p.apollo.client.mutate(Object(i.__assign)({mutation:u},Object(c.a)({channelID:e,emoteID:n,cost:Object(l.b)(t),transactionID:r})))}function S(e,t,n,r){return o.p.apollo.client.mutate(Object(i.__assign)({mutation:m},Object(c.a)({channelID:e,emoteID:n,cost:Object(l.b)(t),transactionID:r})))}function y(e){Object(c.i)(s,{withOwner:!0},(function(t){return r(t,(function(e){return e.currentUser.emoteSets}),(function(t){var n=t.filter((function(e){return e.id===h})).length>0;return t=n?t.map((function(t){if(t.id===h){var n=Object(i.__assign)(Object(i.__assign)({},e),{setID:h,__typename:"Emote"});return r(t,(function(e){return e.emotes}),(function(t){return t?-1!==t.findIndex((function(t){return t&&t.id===e.id}))?t:Object(i.__spreadArrays)(t,[n]):[n]}))}return t})):Object(i.__spreadArrays)(t,[{id:h,emotes:[Object(i.__assign)(Object(i.__assign)({},e),{setID:h,__typename:"Emote"})],__typename:"EmoteSet",owner:{__typename:"User",id:f,login:v,displayName:null,profileImageURL:null}}])}))}))}},"dNN/":function(e,t,n){},dq0Q:function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"subscriptionProductEmote"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Emote"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]}]}}],loc:{start:0,end:61}};n.loc.source={body:"fragment subscriptionProductEmote on Emote {\nid\nsetID\ntoken\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},"dr/4":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"Thread_SetMuteThread"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdateWhisperThreadInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateWhisperThread"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"thread"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isMuted"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:129}};n.loc.source={body:"mutation Thread_SetMuteThread($input: UpdateWhisperThreadInput!) {\nupdateWhisperThread(input: $input) {\nthread {\nid\nisMuted\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function r(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.Thread_SetMuteThread=function(e,t){var n={kind:e.kind,definitions:[r(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var a=i[t]||new Set,o=new Set,s=new Set;for(a.forEach((function(e){s.add(e)}));s.size>0;){var c=s;s=new Set,c.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=r(e,t);i&&n.definitions.push(i)})),n}(n,"Thread_SetMuteThread")},e9QR:function(e,t,n){},eugE:function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){e[e.Timestamp=0]="Timestamp",e[e.Whisper=1]="Whisper",e[e.Warning=2]="Warning",e[e.InactiveUserNotice=3]="InactiveUserNotice",e[e.NewMessages=4]="NewMessages",e[e.Notification=5]="Notification"}(i||(i={}))},fBrF:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return d}));var i,r=n("mrSG"),a=n("q1tI"),o=n("1rIY"),s=(i=Object(o.a)("WatchPartyContext",{isWatchPartyActive:!1,canChatOnPageDuringWatchParty:!1,updateWatchPartyActive:function(){return null},allowChatOnPageDuringWatchParty:function(){return null}})).context,c=i.withContext,d=function(e){function t(t){var n=e.call(this,t)||this;return n.updateWatchPartyActive=function(e){n.setState({isWatchPartyActive:e})},n.allowChatOnPageDuringWatchParty=function(e){n.setState({canChatOnPageDuringWatchParty:e})},n.state={isWatchPartyActive:!1,canChatOnPageDuringWatchParty:!1,allowChatOnPageDuringWatchParty:n.allowChatOnPageDuringWatchParty,updateWatchPartyActive:n.updateWatchPartyActive},n}return Object(r.__extends)(t,e),t.prototype.render=function(){return a.createElement(s.Provider,{value:this.state},this.props.children)},t}(a.Component)},fbdC:function(e,t,n){"use strict";var i,r=n("/MKj"),a=n("fvjX"),o=n("XDCx"),s=n("mrSG"),c=n("q1tI"),d=n("/7QA"),l=n("cZKs"),u=n("Ws8v"),m=n("X2PJ"),p=n("hnjF"),h=n("sUnt"),f=n("dEDE");!function(e){e.Message="confirmation-modal__message",e.ConfirmButton="confirmation-modal__confirm-button"}(i||(i={}));var v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleCancelClick=function(){t.props.closeModal(),t.props.onCloseModal&&t.props.onCloseModal()},t.renderConfirmButton=function(){return c.cloneElement(t.props.confirmButton,{onClick:t.handleConfirmClick,"data-test-selector":i.ConfirmButton})},t.handleConfirmClick=function(){t.props.closeModal(),t.props.onConfirmClick()},t}return Object(s.__extends)(t,e),t.prototype.render=function(){return c.createElement(u.a,{background:m.a.Base,padding:{x:3,top:3,bottom:2},display:p.d.Flex,flexDirection:p.e.Column},c.createElement(h.a,{"data-test-selector":i.Message},this.props.message),c.createElement(h.a,{display:p.d.Flex,flexDirection:p.e.Row,justifyContent:p.h.Center,padding:{top:2}},c.createElement(h.a,{padding:{right:.5}},c.createElement(f.a,{type:f.d.Text,onClick:this.handleCancelClick},Object(d.d)("Cancel","SettingsConfirmationModal"))),c.createElement(h.a,{padding:{left:.5}},this.renderConfirmButton())),c.createElement(l.a,{onClose:this.props.onCloseModal}))},t}(c.Component);var g=Object(r.b)(null,(function(e){return Object(a.b)({closeModal:o.d},e)}))(v);n.d(t,"a",(function(){return g}))},fezU:function(e,t,n){"use strict";var i=n("mrSG"),r=n("q1tI"),a=n("1rIY"),o=n("1MDS"),s=n("oK83"),c=Object(a.a)("ViewerCardContext",{viewerCardOptions:null,onShowViewerCard:function(){return null},onShowExtensionMessageCard:function(){return null},onShowEmoteCard:function(){return null},hideViewerCard:function(){return null}}),d=c.context,l=c.withContext,u=function(e){function t(t){var n=e.call(this,t)||this;return n.onShowViewerCard=function(e,t,i,r){n.setState((function(n){var a=n.viewerCardOptions;return a&&a.targetID===e?{viewerCardOptions:null}:{viewerCardOptions:{viewerCardType:s.c.Viewer,initialTopOffset:r,sourceID:i,sourceType:t,targetID:e}}}))},n.onShowExtensionMessageCard=function(e,t,i,r){n.setState((function(n){var a=n.viewerCardOptions;return a&&a.viewerCardType===s.c.Extension&&a.targetID===e?{viewerCardOptions:null}:{viewerCardOptions:{viewerCardType:s.c.Extension,initialTopOffset:r,sourceID:i,targetID:e,extensionVersion:t}}}))},n.onShowEmoteCard=function(e){n.setState((function(t){var n=t.viewerCardOptions;return n&&n.viewerCardType===s.c.Emote&&n.emoteID===e.emoteID?{viewerCardOptions:null}:{viewerCardOptions:{viewerCardType:s.c.Emote,initialTopOffset:e.initialTopOffset||0,sourceID:e.sourceID,emoteSourceType:e.emoteSourceType,targetID:e.referrerID,emoteID:e.emoteID,emoteCode:e.emoteCode}}})),Object(o.c)({emoteLocation:Object(o.b)(e.emoteSourceType),emoticonID:e.emoteID,chatChannel:e.channelLogin,chatChannelID:e.channelID?e.channelID:"",referrerUserID:e.referrerID,action:o.a.Open,msgID:e.sourceID})},n.hideViewerCard=function(){n.setState({viewerCardOptions:null})},n.state={viewerCardOptions:null,onShowViewerCard:n.onShowViewerCard,onShowExtensionMessageCard:n.onShowExtensionMessageCard,onShowEmoteCard:n.onShowEmoteCard,hideViewerCard:n.hideViewerCard},n}return Object(i.__extends)(t,e),t.prototype.render=function(){return r.createElement(d.Provider,{value:this.state},this.props.children)},t}(r.Component);n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return u}))},fg2I:function(e,t,n){"use strict";var i=n("mrSG"),r=n("TSYQ"),a=n("q1tI"),o=n("fvjX"),s=n("/7QA"),c=n("eJ65"),d=n("8Ad5"),l=n("BhFH"),u=n("EvYO"),m=n("D7An"),p=n("DMoW"),h=n("TvOw"),f=n("2xye"),v=n("m98o"),g=n("as+V"),k=n("/MKj"),b=n("yR8l"),S=n("iS14"),y=n("geRD"),E=n("lZZ2"),_=n("tLDJ"),C=n("0tEc"),N=n("/rr3"),D=n("J71B"),w=n("4qQ0"),O=n("CzFK"),I=n("l1Uh"),T=n("PrJw"),F=n("4wKg"),j=n("sUnt"),P=n("k0nM"),U=n("G9mL"),M=n("Gu45"),x=n("dr/4"),A="whispers-report-user-button",R=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderReportButton=function(){var e=t.props.displayName||t.props.login,n=Object(s.d)("Report {displayName}",{displayName:e},"ThreadSettings");return a.createElement(F.a,{label:n,ariaLabel:n,onClick:t.reportUser,"data-test-selector":A})},t.toggleMutethread=function(){var e=!t.props.isMuted,n=Object(y.b)({threadID:t.props.threadID,isMuted:!t.props.isMuted},{updateWhisperThread:{thread:{id:t.props.threadID,isMuted:e,__typename:"WhisperThread"},__typename:"UpdateWhisperThreadPayload"}});e?Object(T.j)(t.props.threadID):Object(T.k)(t.props.threadID),t.props.setMuteThread(n)},t.onRevokeButtonClicked=function(){return Object(i.__awaiter)(t,void 0,void 0,(function(){var e;return Object(i.__generator)(this,(function(t){switch(t.label){case 0:e=Object(i.__assign)({},Object(y.a)({threadID:this.props.threadID,removeWhitelist:!0})),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.props.revokeWhisperAccess(e)];case 2:return t.sent(),[3,4];case 3:return t.sent(),[2];case 4:return this.props.onCloseThread(this.props.threadID),[2]}}))}))},t.reportUser=function(){var e=t.props.displayName||t.props.login;t.props.showReportUserModal({onClose:t.onReportModalClose,reportContext:{contentType:p.tc.WHISPER_REPORT,targetUserID:t.props.userID,contentID:t.props.threadID},title:Object(s.d)("Report {displayName}",{displayName:e},"ReportUserModal")})},t.onReportModalClose=function(e,n){e===w.b.Success&&n&&t.props.onBlock&&t.props.onBlock(t.props.threadID)},t.blockUser=function(){t.props.currentUser&&t.props.showBlockModal({context:p.s.WHISPER,currentUserData:t.props.currentUser,displayName:t.props.displayName||t.props.login,login:t.props.login,onBlock:function(){return t.props.onBlock(t.props.threadID)},reason:h.a.Other,userID:t.props.userID})},t.unblockUser=function(){t.props.currentUser&&(t.props.unblockUserMutation(t.props.userID,t.props.currentUser),t.props.onUnblock&&t.props.onUnblock(t.props.threadID))},t}return Object(i.__extends)(t,e),t.prototype.render=function(){var e=this.props.displayName||this.props.login,t=this.props.isMuted?Object(s.d)("Turn Notifications On","ThreadSettings"):Object(s.d)("Turn Notifications Off","ThreadSettings"),n=Object(s.d)("Go to {displayName}'s Channel",{displayName:e},"ThreadSettings");return a.createElement(j.a,null,a.createElement(P.a,{show:!0},a.createElement(F.a,{label:t,onClick:this.toggleMutethread,ariaLabel:t}),a.createElement(U.a,null),a.createElement(C.a,{friendButtonUIType:N.a.WhisperSettings,requestContext:D.a.Conversation,targetID:this.props.userID}),this.renderRevokeButton(),this.renderBlockButton(),this.renderReportButton(),a.createElement(F.a,{label:n,linkTo:Object(_.kb)(this.props.login),ariaLabel:n})))},t.prototype.renderRevokeButton=function(){return this.props.hasTemporaryWhisperAccess?a.createElement(F.a,{label:Object(s.d)("Revoke Whisper Access","ThreadSettings"),onClick:this.onRevokeButtonClicked,"data-test-selector":"whispers-revoke-access-button"}):null},t.prototype.renderBlockButton=function(){var e,t,n=this.props.displayName||this.props.login;return this.isBlocked?(e=Object(s.d)("Unblock {displayName}",{displayName:n},"ThreadSettings"),t=this.unblockUser):(e=Object(s.d)("Block {displayName}",{displayName:n},"ThreadSettings"),t=this.blockUser),a.createElement(F.a,{label:e,ariaLabel:e,onClick:t,"data-test-selector":"whispers-block-user-button"})},Object.defineProperty(t.prototype,"isBlocked",{get:function(){var e=this;return!!(this.props.currentUser&&this.props.currentUser.blockedUsers&&this.props.currentUser.blockedUsers.find((function(t){return!!t&&t.id===e.props.userID})))},enumerable:!0,configurable:!0}),t}(a.Component);var L=Object(o.d)(Object(k.b)(null,(function(e){return{onCloseThread:function(t){return e(Object(O.h)(t,Object(I.a)()))}}})),Object(b.a)(M,{name:"revokeWhisperAccess"}),Object(b.a)(x,{name:"setMuteThread"}),E.a,Object(S.a)())(R),W=n("IZXT"),B=n("pORx");var V=n("NKxy");var G=n("796b");function q(e){switch(e){case p.i.ONLINE:return G.b.Online;case p.i.AWAY:case p.i.IDLE:return G.b.Away;case p.i.BUSY:return G.b.Busy;case p.i.OFFLINE:default:return G.b.Offline}}var H=n("vGFN"),z=n("Ws8v"),Q=n("X2PJ"),K=n("hnjF"),X=n("+80q"),Y=n("dEDE"),$=n("PL8s"),J=n("7d/q"),Z=n("C7sF"),ee=n("Jsra"),te=n("ygYM"),ne=(n("hRS0"),"report-as-spam-button"),ie="mark-not-spam-button",re="dismiss-prompt-button",ae="spam-prompt-pending-target",oe="spam-prompt-reported-target",se={__typename:"User",displayName:"???",chatColor:null,profileImageURL:null,login:"???",displayBadges:[],id:"",self:null},ce=function(e){function t(t){var n=e.call(this,t)||this;n.renderPotentialSpamPrompt=function(){if(n.props.spamInfo&&n.props.spamInfo.likelihood!==p.Ad.LOW&&null===n.props.spamInfo.lastMarkedNotSpamAt){if("pending"===n.state.potentialSpamResolution)return a.createElement(j.a,{"data-a-target":ae,className:"thread-header__potential-spam-prompt",attachRight:!0,attachLeft:!0,attachTop:!0},a.createElement(z.a,{background:Q.a.Alt2,padding:.5,elevation:2},a.createElement(j.a,{display:K.d.InlineBlock,margin:.5},a.createElement(X.a,{type:X.e.Span,fontSize:Q.d.Size6,color:Q.c.Alt2},Object(s.d)("It looks like this conversation triggered our spam detector. If it is spam, please report it!","ThreadHeader"))),a.createElement(j.a,{display:K.d.InlineBlock,margin:.5},a.createElement(Y.a,{"data-a-target":ne,type:Y.d.Alert,onClick:n.reportSpam,size:Y.b.Small},Object(s.d)("Report spam","ThreadHeader"))),a.createElement(j.a,{display:K.d.InlineBlock,margin:.5},a.createElement(Y.a,{"data-a-target":ie,onClick:n.markNotSpam,size:Y.b.Small},Object(s.d)("This is not spam","ThreadHeader")))));if("reported"===n.state.potentialSpamResolution&&n.interlocutor.displayName)return a.createElement(j.a,{"data-a-target":oe,className:"thread-header__potential-spam-prompt",attachRight:!0,attachLeft:!0,attachTop:!0},a.createElement(z.a,{background:Q.a.Alt2,padding:.5,elevation:2},a.createElement(j.a,{display:K.d.InlineBlock,margin:.5},a.createElement(X.a,{type:X.e.Span,fontSize:Q.d.Size6,color:Q.c.Alt2},Object(s.d)("Thank you for helping us fight spam. We've blocked {user} from sending you further whispers. You can undo this from the Whisper Settings Menu.",{user:n.interlocutor.displayName},"ThreadHeader"))),a.createElement(j.a,{display:K.d.InlineBlock,margin:.5},a.createElement(Y.a,{"data-a-target":re,type:Y.d.Text,onClick:n.dismissSpamPrompt,size:Y.b.Small},Object(s.d)("Dismiss","ThreadHeader")))))}return null},n.reportSpam=function(){n.interlocutor.id&&n.interlocutor.login&&(n.props.reportUserMutation(n.interlocutor.id,h.b.Spam,n.props.threadID),n.props.blockUserMutation(n.interlocutor.id,h.a.Other,p.s.WHISPER,n.props.currentUser||void 0),n.props.setThreadSpamStatusMutation(n.props.threadID,!0),Object(H.l)(n.interlocutor.login,H.a.SpamPropmt),n.setState({potentialSpamResolution:"reported"}))},n.markNotSpam=function(){n.props.setThreadSpamStatusMutation(n.props.threadID,!1),Object(H.o)(n.props.threadID),n.setState({potentialSpamResolution:"dismissed"})},n.dismissSpamPrompt=function(){n.props.onBlock&&n.props.onBlock(n.props.threadID),Object(H.n)(n.props.threadID),n.setState({potentialSpamResolution:"dismissed"})},n.onSettingsClick=function(e){e.stopPropagation()},n.onHeaderActivate=function(e){e.target===e.currentTarget&&(e.charCode!==d.a.Enter&&e.charCode!==d.a.Space||(n.props.onHeaderInteract(),e.stopPropagation()))},n.onFocus=function(){n.setState({isElementFocused:!0})},n.onBlur=function(){n.setState({isElementFocused:!1})},n.onJoinClick=function(e){n.onPresenceClick(u.a.WhisperHeaderButton,e)},n.onActivityClick=function(e){n.onPresenceClick(u.a.WhisperHeaderLink,e)},n.onPresenceClick=function(e,t){t.stopPropagation(),n.props.interlocutor&&n.props.interlocutorActivity&&n.props.interlocutor.login?Object(u.b)({context:e,friendActivity:n.props.interlocutorActivity,friendLogin:n.props.interlocutor.login}):s.k.warn("[ThreadHeader] Attempted to track presence click without required data.")};var i=s.p.experiments.getAndTrackAssignment(m.c.ExtendedPresence);return n.state={potentialSpamResolution:"pending",hasExtendedRichPresence:"variant_a"===i,isElementFocused:!1},n}return Object(i.__extends)(t,e),t.prototype.render=function(){var e=this.props.isHighlighted&&!this.state.isElementFocused,t=r({"thread-header__title-bar-container":!0,"thread-header__title-bar-container--highlighted":this.props.isHighlighted,"thread-header__title-bar-container--focused":this.props.isFocused}),n=r({"thread-header":!0,"thread-header--collapsed":this.props.isCollapsed}),i=r({"thread-header__display-name--highlighted":this.props.isHighlighted}),o=Object(s.d)("Close","WhisperThreadHeader"),d=Object(s.d)("Settings","WhisperThreadHeader");if(this.props.isLoading||!this.props.currentUser||!this.interlocutor)return a.createElement(j.a,{className:t,display:K.d.Flex,justifyContent:K.h.Between,fullWidth:!0,alignItems:K.b.Center,padding:{y:.5,x:1},flexShrink:0,flexGrow:0,flexWrap:K.f.NoWrap},a.createElement($.a,{height:20,width:80}),a.createElement(j.a,{display:K.d.Flex},a.createElement(J.a,{ariaLabel:o,icon:Z.a.Close,"data-a-target":"whispers-thread__close-button-"+this.props.threadID,onClick:this.props.onClose})));var l=null,u=null,m=null,h=null;if(this.props.interlocutorActivity){var k=this.props.interlocutorAvailability,b=this.props.interlocutorActivity;if(u=a.createElement(j.a,{margin:{left:1},display:K.d.Flex,alignItems:K.b.Center},a.createElement(G.a,{status:q(k||p.i.OFFLINE)})),b){var S={activity:b,availability:this.state.hasExtendedRichPresence?k:void 0},y=Object(v.b)(S,!0),E=null,_=Object(v.c)(this.interlocutor.login,b);if(_&&(E={pathname:_,state:{content:f.PageviewContent.Presence,medium:f.PageviewMedium.Whispers}}),E){var C=r({"thread-header__activity-link--highlighted":this.props.isHighlighted});m=a.createElement(ee.a,{className:C,title:Object(v.b)(S)||"",onClick:this.onActivityClick,to:E,"data-test-selector":"whispers-thread__presence-link"},y)}else m=y;this.props.isCollapsed||(h=a.createElement(g.a,{availability:k||p.i.OFFLINE,link:E,onClick:this.onJoinClick,shouldHollowOverlay:this.props.isHighlighted,margin:{right:.5}}))}}!this.props.isCollapsed&&this.props.currentUser&&this.interlocutor.login&&this.interlocutor.id&&!this.props.interactionsDisabled&&(l=a.createElement(c.a,null,a.createElement(J.a,{ariaLabel:d,icon:Z.a.Gear,overlay:e}),a.createElement(te.a,{direction:te.b.BottomRight,offsetX:"0.5rem",size:te.c.Small},a.createElement(L,{login:this.interlocutor.login,displayName:this.interlocutor.displayName,currentUser:this.props.currentUser,userID:this.interlocutor.id,isMuted:this.props.isMuted,threadID:this.props.threadID,onBlock:this.props.onBlock,onUnblock:this.props.onUnblock,showReportUserModal:this.props.showReportUserModal,hasTemporaryWhisperAccess:!!this.interlocutor.self&&!!this.interlocutor.self.whisperPermissions&&this.interlocutor.self.whisperPermissions.receive===p.zd.TEMPORARY}))));var N=this.interlocutor.displayBadges.map((function(e){return e?a.createElement(K.g,{key:e.id,flexShrink:0,margin:{right:.5}},a.createElement("img",{alt:e.title,title:e.title,className:"thread-header__badge",src:e.imageURL})):null}));return a.createElement(j.a,{className:n,position:K.j.Relative,fullWidth:!0},a.createElement("div",{className:"thread-header__click-area",onClick:this.props.onHeaderInteract,onKeyPress:this.onHeaderActivate,onFocus:this.onFocus,onBlur:this.onBlur,"data-a-target":"thread-header__click-area",tabIndex:0},a.createElement(j.a,{className:t,fullWidth:!0,padding:{x:1,y:.5},alignItems:K.b.Center,flexGrow:1,display:K.d.Flex,"data-a-target":"whisper-thread-title-bar-"+(this.interlocutor&&this.interlocutor.login),"data-click-out-id":"thread-expand-close",flexWrap:K.f.NoWrap},a.createElement(j.a,{display:K.d.Flex,flexDirection:K.e.Column,flexGrow:1,fullHeight:!0,overflow:K.i.Hidden},a.createElement(j.a,{display:K.d.Flex,flexGrow:1,alignItems:K.b.Center,flexWrap:K.f.NoWrap,padding:{right:1},ellipsis:!0},N,a.createElement(X.a,{className:i,type:X.e.Span,bold:!0,ellipsis:!0},this.interlocutor.displayName?this.interlocutor.displayName:se.displayName),u),a.createElement(z.a,{className:"thread-header__activity",color:this.props.isHighlighted?Q.c.Overlay:Q.c.Base,padding:{right:1},ellipsis:!0},m)),a.createElement(j.a,{display:K.d.Flex,flexShrink:0,flexDirection:K.e.Row,alignItems:K.b.Center},h,a.createElement("div",{onClick:this.onSettingsClick},l),a.createElement(J.a,{ariaLabel:o,icon:Z.a.Close,"data-a-target":"thread-close-button-"+(this.interlocutor&&this.interlocutor.login),"data-test-selector":"thread-header__close-button-"+this.props.threadID,onClick:this.props.onClose,overlay:e})))),this.renderPotentialSpamPrompt())},Object.defineProperty(t.prototype,"interlocutor",{get:function(){return this.props.interlocutor||se},enumerable:!0,configurable:!0}),t}(a.Component),de=Object(o.d)(Object(l.a)(),function(){var e=this;return Object(b.a)(B,{props:function(t){return{reportUserMutation:function(n,r,a){return Object(i.__awaiter)(e,void 0,void 0,(function(){var e;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:if(!t.mutate)return[3,4];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,t.mutate({variables:{input:{targetID:n,reason:r,contentID:a,content:p.tc.WHISPER_REPORT,description:"Submitted using the report spam button",extra:""}}})];case 2:return i.sent(),[3,4];case 3:return e=i.sent(),Object(W.d)()?s.k.warn("Unable to report user"):s.k.errorAndReport(e,"Unable to report user"),[3,4];case 4:return[2]}}))}))}}}})}(),function(){var e=this;return Object(b.a)(V,{props:function(t){return{setThreadSpamStatusMutation:function(n,r){return Object(i.__awaiter)(e,void 0,void 0,(function(){var e;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:if(!t.mutate)return[3,4];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,t.mutate({variables:{input:{threadID:n,isSpam:r}}})];case 2:return i.sent(),[3,4];case 3:return e=i.sent(),Object(W.d)()?s.k.warn("Unable to modify threads spam status user"):s.k.errorAndReport(e,"Unable to modify threads spam status user"),[3,4];case 4:return[2]}}))}))}}}})}())(ce);n.d(t,"a",(function(){return de}))},"g+79":function(e,t,n){"use strict";var i,r,a=n("mrSG"),o=n("TSYQ"),s=n("q1tI"),c=n("4rCz"),d=n("A4KW"),l=n("W1jp"),u=n("X2PJ"),m=n("hnjF"),p=n("uG/k"),h=n("Ws8v"),f=n("sUnt"),v=n("+80q");n("rCSd");!function(e){e.Cost="cost"}(i||(i={})),function(e){e.ExtraSmall="reward-icon--extra-small",e.Small="reward-icon--small",e.Medium="reward-icon--medium",e.Large="reward-icon--large"}(r||(r={}));var g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a.__extends)(t,e),t.prototype.render=function(){var e,t=o(((e={"reward-icon":!0})[this.props.size||r.Medium]=!0,e));return s.createElement(u.f,{alignItems:m.b.Center,className:t,borderRadius:u.b.Medium,display:m.d.Flex,flexDirection:m.e.Column,justifyContent:m.h.Center,position:m.j.Relative},s.createElement("div",{style:this.customStyles},this.icon,this.cost))},Object.defineProperty(t.prototype,"customStyles",{get:function(){var e=Object(l.a)(this.props.data);return e?{backgroundColor:e}:{}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"icon",{get:function(){var e=Object(l.d)(this.props.data),t=o({"reward-icon__image":!0,"reward-icon__image--raised":!!this.props.showCost&&this.props.size===r.Large,"reward-icon__image--extra-small":this.props.size===r.ExtraSmall});return s.createElement(p.a,Object(a.__assign)({alt:Object(l.e)(this.props.data),className:t},e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cost",{get:function(){return this.props.showCost&&this.props.size===r.Large?s.createElement(h.a,{attachBottom:!0,alignItems:m.b.Center,borderRadius:u.b.Small,className:"reward-icon__cost",margin:{y:1},padding:{x:.5},position:m.j.Absolute,"data-test-selector":i.Cost,justifyContent:m.h.Center,display:m.d.Flex,color:u.c.Overlay},s.createElement(f.a,{margin:{right:.5}},s.createElement(d.b,{channelLogin:this.props.channelLogin,iconSize:d.a.Small})),s.createElement(v.a,{fontSize:u.d.Size7},Object(c.f)(Object(l.b)(this.props.data)))):null},enumerable:!0,configurable:!0}),t}(s.Component);n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return g}))},gDzh:function(e,t,n){},gTu3:function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){e[e.Default=0]="Default",e[e.Recipient=1]="Recipient",e[e.Sender=2]="Sender"}(i||(i={}))},hRS0:function(e,t,n){},i6WW:function(e,t,n){"use strict";var i=n("RcPG"),r=new RegExp("(?:^|\\s)(?:https?://)?clips.twitch.tv/(\\w+)(?:/)?(\\w+)?(?:/edit)?(?:$|\\s)?"),a=new RegExp("(?:^|\\s)(?:https?:\\/\\/)?(?:www\\.)?twitch\\.tv\\/(\\w+)\\/clip\\/(\\w+)(?:$|\\s)?");var o=new RegExp("(?:^|\\s)(?:https?://)?(?:(?:www|go).)?twitch.tv/videos/(\\d+)(?:$|\\s)?");n.d(t,"a",(function(){return c}));var s=/^(?:(https?:\/\/)?((?:[\w#%\-+=:~]+\.)+[a-z]{2,8}(?:\/[\w./#%&@()\-+=:?~]*)?))$/;function c(e,t){void 0===t&&(t={});var n=e.match(s);if(!n)return null;var c=""+(n[1]||"https://")+n[2];if(t.parseClips&&function(e){void 0===e&&(e="");var t=r.test(e)&&!e.includes("clips.twitch.tv/2017/"),n=a.test(e);return t||n}(c)){var d=function(e){void 0===e&&(e="");var t=e.match(r);if(t&&t.length>0&&void 0!==t.index)return t[1];var n=e.match(a);return n&&n.length>0&&void 0!==n.index?n[2]:""}(c);if("create"!==d)return{type:i.a.ClipLink,content:{slug:d,url:c,displayText:e}}}if(t.parseVods&&function(e){return void 0===e&&(e=""),o.test(e)}(c)){var l=function(e){void 0===e&&(e="");var t=e.match(o);return null===t?"":t&&t.length>0&&void 0!==t.index?t[1]:""}(c);return{type:i.a.VideoLink,content:{id:l,url:c,displayText:e}}}return{type:i.a.Link,content:{displayText:e,url:c}}}},iS14:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("mrSG"),r=n("yR8l"),a=n("8jSG"),o=n("cMjZ"),s=n("zixI");function c(){var e=this;return Object(r.a)(s,{props:function(t){return{unblockUserMutation:function(n,r){return Object(i.__awaiter)(e,void 0,Promise,(function(){var e;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return t.mutate?[4,t.mutate({variables:{input:{targetUserID:n}},optimisticResponse:{unblockUser:{__typename:"UnblockUserPayload",targetUser:{__typename:"User",id:n}}},update:function(e){var t=e.readFragment({id:Object(o.a)(r),fragment:a});t&&(t.blockedUsers=t.blockedUsers.filter((function(e){return null!==e&&e.id!==n})),e.writeFragment({id:Object(o.a)(r),fragment:a,data:t}))}})]:[3,2];case 1:if(!(e=i.sent()))throw new Error("unblockUserMutation did not resolve with data");return[2,e];case 2:throw new Error("unblockUserMutation is not ready")}}))}))}}}})}},j0ar:function(e,t,n){"use strict";var i=n("mrSG"),r=n("TSYQ"),a=n("q1tI"),o=n("x1M1"),s=n("hnjF"),c=n("+80q"),d=n("PL8s"),l=n("b7S+"),u=(n("9KaG"),function(e){function t(t){var n=e.call(this,t)||this;return n.onImageLoad=function(){n.setState({imageLoaded:!0})},n.onMouseOver=function(){n.setState({isHovering:!0})},n.onMouseOut=function(){n.setState({isHovering:!1})},n.renderImage=function(){var e=null,t=r("chat-image",{"chat-image__animated":!!n.props.cheerText&&n.state.imageLoaded},n.props.className);if(n.props.srcSet.themed)e=a.createElement(s.g,{display:n.state.imageLoaded?s.d.InlineBlock:s.d.Hide},a.createElement(o.a,{alt:n.props.alt,className:t,defaultRes:n.props.srcKey,onLoad:n.onImageLoad,onMouseOver:n.onMouseOver,onMouseOut:n.onMouseOut,sources:n.props.srcSet}));else{for(var i=[],c=0,d=Object.keys(n.props.srcSet.sources);c<d.length;c++){var l=d[c];i.push(n.props.srcSet.sources[l]+" "+l)}e=a.createElement(s.g,{display:n.state.imageLoaded?s.d.InlineBlock:s.d.Hide},a.createElement("img",{className:t,onLoad:n.onImageLoad,onMouseOver:n.onMouseOver,onMouseOut:n.onMouseOut,src:n.props.srcSet.sources[n.props.srcKey],srcSet:i.join(","),alt:n.props.alt}))}return e},n.renderPlaceholder=function(){return n.state.imageLoaded?null:a.createElement(s.g,{display:s.d.InlineBlock},a.createElement(c.a,{type:c.e.Span,className:"chat-image__placeholder",align:s.m.Top},a.createElement(d.a,{height:28,width:28})))},n.state={imageLoaded:!1,isHovering:!1},n}return Object(i.__extends)(t,e),t.prototype.render=function(){var e;return e=this.state.isHovering&&this.state.imageLoaded?a.createElement(l.a,{direction:this.props.tooltipDirection||l.c.Top,label:this.props.alt,display:s.d.Inline,offsetY:"0.9rem","data-a-target":"emote-name"},this.renderPlaceholder(),this.renderImage(),this.props.cheerText):a.createElement("span",{"data-a-target":"emote-name"},this.renderPlaceholder(),this.renderImage(),this.props.cheerText),this.props.cheerText?a.createElement(c.a,{type:c.e.Span,noWrap:!0},e):e},t}(a.Component));n.d(t,"a",(function(){return u}))},jPWu:function(e,t,n){},kPBf:function(e,t){},kSkr:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"BlockUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"BlockUserInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"blockUser"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"targetUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:94}};n.loc.source={body:"mutation BlockUser($input: BlockUserInput!) {\nblockUser(input: $input) {\ntargetUser {\nid\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function r(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.BlockUser=function(e,t){var n={kind:e.kind,definitions:[r(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var a=i[t]||new Set,o=new Set,s=new Set;for(a.forEach((function(e){s.add(e)}));s.size>0;){var c=s;s=new Set,c.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=r(e,t);i&&n.definitions.push(i)})),n}(n,"BlockUser")},lZZ2:function(e,t,n){"use strict";var i=n("mrSG"),r=n("q1tI"),a=n("/MKj"),o=n("fvjX"),s=n("/7QA"),c=n("fbdC"),d=n("BhFH"),l=n("QVaV"),u=n("XDCx"),m=n("dEDE"),p=n("Ws8v"),h=n("hnjF"),f=n("+80q"),v=n("X2PJ"),g=n("CGUg"),k=n("sUnt");var b=Object(o.d)(Object(d.a)(),Object(a.b)(null,(function(e){return Object(o.b)({showConfirmationModal:function(e){var t=Object(i.__rest)(e,[]);return Object(u.e)(c.a,t)}},e)})),(function(e){return function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={error:!1},e.showBlockModal=function(t){return e.props.showConfirmationModal({confirmButton:e.renderBlockButton(),onConfirmClick:function(){return Object(i.__awaiter)(e,void 0,void 0,(function(){var e=this;return Object(i.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.props.blockUserMutation(t.userID,t.reason,t.context,t.currentUserData)];case 1:return n.sent(),[3,3];case 2:return n.sent(),this.setState({error:!0},(function(){return e.showBlockModal(t)})),[2];case 3:return t.onBlock&&t.onBlock(),[2]}}))}))},message:e.renderMessage(t.login,t.displayName),onCloseModal:function(){return e.setState({error:!1})}})},e}return Object(i.__extends)(n,t),n.prototype.render=function(){return r.createElement(e,Object(i.__assign)({},this.props,{showBlockModal:this.showBlockModal}))},n.prototype.renderBlockButton=function(){return r.createElement(m.a,{type:m.d.Alert},Object(s.d)("Block","BlockModal"))},n.prototype.renderMessage=function(e,t){var n=Object(l.a)(e,t,!0);return r.createElement(r.Fragment,null,r.createElement(p.a,{borderBottom:!0,padding:{bottom:2},textAlign:h.l.Center},r.createElement(f.a,{bold:!0,type:f.e.H4},Object(s.d)("Block {displayName}?",{displayName:n},"BlockModal"))),r.createElement(p.a,{color:v.c.Alt2,padding:{top:2}},r.createElement(g.a,{baseFontSize:v.d.Size6},r.createElement("p",null,Object(s.d)("Blocking {displayName} will:",{displayName:n},"BlockModal")),r.createElement("ul",null,r.createElement("li",null,Object(s.d)("Prevent them from sending you whispers","BlockModal")),r.createElement("li",null,Object(s.d)("Prevent them from hosting you","BlockModal")),r.createElement("li",null,Object(s.d)("Prevent them from adding you as a friend","BlockModal")),r.createElement("li",null,Object(s.d)("Prevent them from purchasing gift subs for other users in your channel","BlockModal")),r.createElement("li",null,Object(s.d)("Filter their messages out of chats you don’t moderate","BlockModal"))))),this.state.error&&r.createElement(k.a,{padding:{x:3,top:2},margin:{x:3,y:0}},r.createElement(f.a,{fontSize:v.d.Size6,color:v.c.Error},Object(s.d)("There was an unexpected error while blocking this user. Please try again.","BlockModal"))))},n}(r.Component)}));n.d(t,"a",(function(){return b}))},lZdE:function(e,t,n){"use strict";function i(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}n.d(t,"a",(function(){return i}))},"lpj/":function(e,t,n){},mBWp:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Whispers_Tracking_CurrentUser"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hasTurbo"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"availability"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:86}};n.loc.source={body:"query Whispers_Tracking_CurrentUser {\ncurrentUser {\nid\nhasTurbo\navailability\nlogin\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function r(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.Whispers_Tracking_CurrentUser=function(e,t){var n={kind:e.kind,definitions:[r(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var a=i[t]||new Set,o=new Set,s=new Set;for(a.forEach((function(e){s.add(e)}));s.size>0;){var c=s;s=new Set,c.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=r(e,t);i&&n.definitions.push(i)})),n}(n,"Whispers_Tracking_CurrentUser")},mmRu:function(e,t,n){"use strict";var i=n("/MKj"),r=n("mrSG"),a=n("q1tI"),o=n("u5aL"),s=n("/7QA"),c=n("7d/q"),d=n("C7sF"),l=function(e){return a.createElement(c.a,{icon:d.a.Emoticons,ariaLabel:Object(s.d)("Emote picker","EmotePickerButton"),type:e.isActive?c.c.Primary:c.c.Secondary,onClick:e.onClick,"data-a-target":"emote-picker-button"})},u=n("fvjX"),m=n("hbnN"),p=n("yR8l"),h=n("x7UT"),f=n("Mj6i"),v=n("OMdY"),g=n("1/iK"),k=n("kRBY"),b=n("+pBb"),S=n("P6kH"),y=n("w1PT"),E=n("8EUQ"),_=n("KriR"),C=n("GzyO"),N=n("OpME"),D=function(e){var t={};e.forEach((function(e){var n;e.owner&&e.owner.id&&(t[e.owner.id]?(n=t[e.owner.id].emotes).push.apply(n,e.emotes):t[e.owner.id]=Object(r.__assign)(Object(r.__assign)({},e),{emotes:e.emotes.slice()}))}));var n=Object.keys(t),i=[];return n.forEach((function(e){i.push(t[e])})),i},w=function(e,t){return t.reduce((function(t,n){if(null===n.emotes||null===n.emoteSetID)return t;var i=Object(N.b)(n.emotes);return t.concat(i.map((function(t){return Object(r.__assign)(Object(r.__assign)({},t),{isLocked:!e.has(parseInt(n.emoteSetID,10))})})))}),[])},O=function(e){return e.tier&&!isNaN(parseInt(e.tier,10))?parseInt(e.tier,10)/1e3:1},I=n("GnwI"),T=n("br9A"),F=n("MkkA"),j=n("8/mp"),P=n("wUQP"),U=n("2xye"),M=n("dGMd"),x=n("7SjK"),A=n("sUnt"),R=n("hnjF"),L=n("Ws8v"),W=n("+80q"),B=n("X2PJ"),V=function(e){var t=null;return e.img&&(t=a.createElement(a.Fragment,null,e.img,a.createElement(A.a,{padding:{right:.5}}))),a.createElement(A.a,{position:R.j.Relative,padding:{x:1,top:.5,bottom:1}},a.createElement(L.a,{alignItems:R.b.Center,display:R.d.Flex,padding:{x:1,y:.5},className:"emote-grid-section__header-title"},t,a.createElement(W.a,{align:R.m.Middle,bold:!0,color:B.c.Alt},e.label)),a.createElement(x.a,{context:e.context,emotes:e.emotes,onClickEmote:e.onClickEmote,spaced:!0}))},G=n("4VQm"),q=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.checkVisible=function(e,n){t.props.checkVisible(e,n)},t}return Object(r.__extends)(t,e),t.prototype.componentDidMount=function(){this.unregister=this.props.registerReceiver(this)},t.prototype.componentWillUnmount=function(){this.unregister&&this.unregister()},t.prototype.render=function(){return a.createElement(a.Fragment,null,this.props.children)},t}(a.Component),H=Object(G.d)((function(e){return{registerReceiver:e.registerReceiver}}))(q),z=n("i4Ys"),Q=n("7uM4"),K=function(e){return a.createElement(A.a,{position:R.j.Relative},a.createElement(z.a,{"data-a-target":e.label,onClick:e.onClick,blurAfterClick:!0,selected:e.isActive},a.createElement(A.a,{padding:1,display:R.d.InlineFlex},a.createElement(Q.a,{asset:e.icon}))))},X=n("DnOo"),Y=n("a5fV"),$=n("dEDE"),J=n("uG/k"),Z=n("CGUg"),ee=(n("GLn2"),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=e.channelSubEmotes,n=e.channelSubscriptionProducts,i=e.subUpsellClickedEmote,o=n.find((function(e){return e.emoteSetID===i.setID}));if(o||(o=n.find((function(e){var t;return!!(null===(t=e.emotes)||void 0===t?void 0:t.some((function(e){return e&&e.id===i.id})))}))),!o)return null;var c={};t.forEach((function(e){if(e.isLocked&&null!==e.setID&&void 0!==e.setID){var t=n.find((function(t){return t.emoteSetID===e.setID}));t&&(c[t.emoteSetID]=t)}}));var l=O(o),u=Object(s.d)("Subscribe at Tier {tierNumber}",{tierNumber:l},"EmotePickerCard"),m=[],p=[];t.forEach((function(e){var t=c[e.setID];t&&(O(t)<=l?p.push(Object(r.__assign)(Object(r.__assign)({},e),{isLocked:!1})):m.push(e))})),m.sort((function(e,t){var n=c[e.setID],i=c[t.setID],r=O(n);return O(i)-r}));var h=m.concat(p),f=o.price.toString()||"";"productInfo"in o&&(o.priceInfo||o.promotion)&&(f=Object(Y.e)(o));var v=p.length>1?Object(s.d)("{numUnlocked} Emotes Included",{numUnlocked:p.length},"EmotePickerCard"):Object(s.d)("1 Emote Included","EmotePickerCard");return a.createElement(A.a,{className:"emote-sub-upsell"},a.createElement(L.a,{padding:{top:.5}},a.createElement($.a,{type:$.d.Text,icon:d.a.AngleLeft,onClick:this.props.onBackClick,size:$.b.Small},Object(s.d)("Back","EmotePickerCard"))),a.createElement(L.a,{display:R.d.Flex,padding:{x:2,bottom:1}},a.createElement(A.a,{flexGrow:0,flexShrink:0,padding:{top:.5}},a.createElement(J.a,{src:this.getBigImageSrc(i.srcSet),alt:i.displayName||""})),a.createElement(A.a,{flexGrow:1,flexShrink:1,padding:{left:1}},a.createElement(W.a,{bold:!0},this.renderCopyHeader(l.toString())),a.createElement(W.a,null,this.renderCopyBody(l.toString(),p.length)))),a.createElement(A.a,{display:R.d.Flex,alignItems:R.b.Center,justifyContent:R.h.Center,padding:{x:2}},a.createElement(X.a,{customSubscribeNowMessage:u,isSubbedToTier:!1,fullWidth:!0,tierPrice:f,handleSubAction:this.props.handleSubAction,productName:o.name,url:o.url})),a.createElement(Z.a,null,a.createElement("hr",{className:"emote-sub-upsell__divider"})),a.createElement(j.b,{className:"emote-sub-upsell__content"},a.createElement(A.a,null,a.createElement(A.a,{padding:{x:2}},a.createElement(W.a,{bold:!0},v)),a.createElement(A.a,{padding:{x:1,top:.5,bottom:3}},a.createElement(x.a,{emotes:h,spaced:!0,onClickEmote:this.props.onClickEmote})))))},t.prototype.renderCopyHeader=function(e){return Object(s.d)("{channelDisplayName} - Tier {tierNumber} Subscription",{tierNumber:e,channelDisplayName:this.props.channelDisplayName},"EmotePickerCard")},t.prototype.renderCopyBody=function(e,t){return 1===t?Object(s.d)("To unlock 1 emote and more subscriber benefits, subscribe at Tier {tierNumber}",{tierNumber:e},"EmotePickerCard"):Object(s.d)("To unlock {numEmotes} emotes and more subscriber benefits, subscribe at Tier {tierNumber}.",{tierNumber:e,numEmotes:t},"EmotePickercard")},t.prototype.getBigImageSrc=function(e){var t=e.split(" ");return 6===t.length?t[2]:t[0]},t}(a.Component));var te,ne=n("XQnt"),ie=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.componentDidUpdate=function(e){this.props.data&&(!this.props.data.loading||this.props.data.error)&&e.data&&e.data.loading&&this.props.latencyTracking.reportInteractive()},t.prototype.render=function(){return a.createElement(ee,{channelDisplayName:this.props.channelDisplayName,channelSubEmotes:this.props.channelSubEmotes,channelSubscriptionProducts:this.subscriptionProducts,handleSubAction:this.props.handleSubAction,onBackClick:this.props.onBackClick,onClickEmote:this.props.onClickEmote,subUpsellClickedEmote:this.props.subUpsellClickedEmote})},Object.defineProperty(t.prototype,"subscriptionProducts",{get:function(){return this.props.data&&this.props.data.user&&this.props.data.user.subscriptionProducts?Object(v.b)(this.props.data.user.subscriptionProducts):this.props.channelSubscriptionProducts},enumerable:!0,configurable:!0}),t}(a.Component),re=Object(u.d)(Object(p.a)(ne,{options:function(e){return{variables:{channelID:e.channelID}}}}),Object(I.withLatencyTracking)("EmoteSubUpsell"))(ie);!function(e){e.FrequentlyUsed="frequently_used",e.CurrentChannel="current_channel",e.OtherChannel="other_subbed_channel",e.Unlocked="unlocked",e.Global="global"}(te||(te={}));var ae,oe=n("ygYM"),se=n("3Law"),ce=n("XQbB"),de=n("HH5h");n("JGCS");!function(e){e.FrequentlyUsedEmotes="FREQUENTLY_USED_EMOTES",e.ChannelEmotes="CHANNEL_EMOTES",e.AllEmotes="ALL_EMOTES"}(ae||(ae={}));var le=function(e){function t(t){var n=e.call(this,t)||this;return n.isChannelPointsEnabled=Object(P.c)("copo_enabled"),n.onTabNavClick=function(e){if(n.scroll&&n.scroll.scrollContent&&e.currentTarget.getAttribute("data-a-target")){var t=e.currentTarget.getAttribute("data-a-target"),i=ae.FrequentlyUsedEmotes;switch(t){case ae.FrequentlyUsedEmotes:n.frequentlyUsedEmotesRef&&(n.scroll.scrollContent.scrollTop=n.frequentlyUsedEmotesRef.offsetTop,i=ae.FrequentlyUsedEmotes);break;case ae.ChannelEmotes:n.channelEmotesRef&&(n.scroll.scrollContent.scrollTop=n.channelEmotesRef.offsetTop,i=ae.ChannelEmotes);break;case ae.AllEmotes:n.allEmotesRef&&(n.scroll.scrollContent.scrollTop=n.allEmotesRef.offsetTop,i=ae.AllEmotes)}n.setState({selectedNavTab:i})}},n.onClickEmote=function(e,t){if(n.props.onClickEmote&&!e.isLocked){n.props.onClickEmote(e.displayName||e.token,e.id);var i={channel_id:n.props.channelID||void 0,chatroom_id:n.props.roomID,context:t,emote_picker_sid:n.props.emotePickerSessionID,emote_id:e.id,emoticon_set_id:e.setID,generated_by:n.props.emotePickerSource};s.o.track(U.SpadeEventType.EmotePickerClickthrough,i)}else e.isLocked&&!n.props.isCommerceDisabled&&n.onClickLockedEmote(e)},n.saveScrollRef=function(e){return n.scroll=e},n.saveAllEmotesRef=function(e){return n.allEmotesRef=e},n.saveChannelEmotesRef=function(e){return n.channelEmotesRef=e},n.saveFrequentlyUsedEmotesRef=function(e){return n.frequentlyUsedEmotesRef=e},n.checkVisible=function(e,t){if(t){n.state.hasUserInteracted||n.setState({hasUserInteracted:!0});var i=n.state.selectedNavTab,r=n.allEmotesRef&&t.offset>=n.allEmotesRef.offsetTop;i=n.channelEmotesRef&&t.offset>=n.channelEmotesRef.offsetTop&&!r?ae.ChannelEmotes:r?ae.AllEmotes:ae.FrequentlyUsedEmotes,n.state.selectedNavTab!==i&&n.setState({selectedNavTab:i})}},n.onClickLockedEmote=function(e){n.setState({subUpsellClickedEmote:e})},n.onBackClick=function(){n.setState({subUpsellClickedEmote:null,selectedNavTab:ae.FrequentlyUsedEmotes})},n.handleFilterChange=function(e){var t=e.target.value,i=t.toLowerCase();n.setState({filter:i,inputValue:t,filteredEmotes:n.filterEmoteSets(n.props.allEmoteSets,i),selectedNavTab:ae.FrequentlyUsedEmotes})},n.filterEmoteSets=function(e,t){var n=[];e.forEach((function(e){e.emotes.filter((function(e){return!(!e.displayName||!e.displayName.toLowerCase().includes(t))||e.token.toLowerCase().includes(t)})).forEach((function(t){t.setID=e.id,n.push(t)}))}));var i=Object(C.e)(),r=0===Object.keys(i).length?void 0:i,a=Object(N.e)(n,t,r);return Object(N.d)(a)},n.state={filter:"",filteredEmotes:[],hasUserInteracted:!1,inputValue:"",selectedNavTab:ae.FrequentlyUsedEmotes,subUpsellClickedEmote:null},n}return Object(r.__extends)(t,e),t.prototype.componentDidMount=function(){if(this.props.emotePickerSessionID&&this.props.channelID){var e={channel_id:this.props.channelID,emote_picker_sid:this.props.emotePickerSessionID,generated_by:this.props.emotePickerSource,chatroom_id:this.props.roomID};s.o.track(U.SpadeEventType.ViewedEmotePicker,e)}},t.prototype.componentDidUpdate=function(e){if(this.props.channelID&&this.props.emotePickerSessionID&&!e.emotePickerSessionID){var t={channel_id:this.props.channelID,emote_picker_sid:this.props.emotePickerSessionID,generated_by:this.props.emotePickerSource,chatroom_id:this.props.roomID};s.o.track(U.SpadeEventType.ViewedEmotePicker,t)}},t.prototype.render=function(){return a.createElement(oe.a,{"data-a-target":"emote-picker",direction:this.props.direction?this.props.direction:oe.b.TopRight,size:this.props.size?this.props.size:oe.c.Medium,noTail:!0,show:!0,offsetX:this.props.offsetX},a.createElement(A.a,{className:"emote-picker"},this.renderView()))},t.prototype.renderView=function(){var e=null;null===this.state.subUpsellClickedEmote&&(e=a.createElement(a.Fragment,null,this.renderTopContent(),this.renderTabContent()));var t=null;return null!==this.props.channelDisplayName&&null!==this.props.channelID&&null!==this.state.subUpsellClickedEmote&&(t=a.createElement(re,{channelDisplayName:this.props.channelDisplayName,channelSubEmotes:this.props.channelSubEmotes,channelID:this.props.channelID,channelSubscriptionProducts:this.props.channelSubscriptionProducts,handleSubAction:this.props.handleSubAction,onBackClick:this.onBackClick,onClickEmote:this.onClickLockedEmote,ownedSetIDs:this.props.ownedSetIDs,subUpsellClickedEmote:this.state.subUpsellClickedEmote})),a.createElement(a.Fragment,null,t,e)},t.prototype.renderTopContent=function(){return a.createElement(A.a,{padding:{top:3,x:2}},a.createElement(A.a,{position:R.j.Absolute,padding:{top:.5,right:.5},attachRight:!0,attachTop:!0},a.createElement(c.a,{ariaLabel:Object(s.d)("Close emote picker","EmotePickerClose"),blurAfterClick:!0,"data-test-selector":"emote-picker-close",icon:d.a.Close,onClick:this.props.onClickClose,size:c.b.Small,type:c.c.Secondary})),a.createElement(se.a,{autoFocus:!0,onChange:this.handleFilterChange,placeholder:Object(s.d)("Search for Emotes","EmotePickerCard"),value:this.state.inputValue}))},t.prototype.renderTabContent=function(){return this.props.gqlError?a.createElement(A.a,null,a.createElement(W.a,{"data-test-selector":"emote-picker-menu-error-text",color:B.c.Error},Object(s.d)("Unable to load available emotes.","EmotePickerCard"))):this.props.loading?a.createElement(A.a,{alignItems:R.b.Center,display:R.d.Flex,fullHeight:!0,fullWidth:!0,justifyContent:R.h.Center,padding:1},a.createElement(ce.a,null)):""!==this.state.filter?this.renderSearchContent():a.createElement(a.Fragment,null,a.createElement(j.b,{scrollRef:this.saveScrollRef,className:"emote-picker__tab-content",contentClassName:"emote-picker__scroll-container"},a.createElement(A.a,{padding:{bottom:5}},a.createElement(H,{checkVisible:this.checkVisible},this.getFrequentlyUsedEmoteGrid(),this.isChannelPointsEnabled&&this.getCurrentChannelUnlockedEmoteGrid(),this.getCurrentChannelEmoteGrid(),this.getOtherSubEmoteGrids(),this.getResidualEmoteGrids()))),this.renderTabNav())},t.prototype.getFrequentlyUsedEmoteGrid=function(){return 0===this.props.frequentlyUsedEmotes.length?null:a.createElement(A.a,{className:"emote-picker__content-block",refDelegate:this.saveFrequentlyUsedEmotesRef},a.createElement(V,{context:te.FrequentlyUsed,emotes:this.props.frequentlyUsedEmotes,label:Object(s.d)("Frequently Used","EmotePickerCard"),onClickEmote:this.onClickEmote}))},t.prototype.getCurrentChannelEmoteGrid=function(){return 0===this.props.sortedChannelEmotes.length||null===this.props.channelDisplayName?null:a.createElement(A.a,{className:this.props.isLoggedIn?"emote-picker__content-block":void 0,refDelegate:this.saveChannelEmotesRef},a.createElement(V,{context:te.CurrentChannel,emotes:this.props.sortedChannelEmotes,img:a.createElement(de.a,{src:this.props.channelProfileImageURL,size:30,alt:this.props.channelDisplayName,userLogin:this.props.channelLogin}),label:this.props.channelDisplayName,onClickEmote:this.onClickEmote}))},t.prototype.getCurrentChannelUnlockedEmoteGrid=function(){var e=this.props.allEmoteSets.find((function(e){return e.id===M.a}));return e&&null!==this.props.channelDisplayName?a.createElement(A.a,{className:this.props.isLoggedIn?"emote-picker__content-block":void 0,refDelegate:this.saveChannelEmotesRef},a.createElement(V,{context:te.CurrentChannel,emotes:e.emotes,label:Object(s.d)("Unlocked with Channel Points","EmotePickerCard"),onClickEmote:this.onClickEmote})):null},t.prototype.getOtherSubEmoteGrids=function(){var e=this;if(!this.props.isLoggedIn)return null;var t=[];return this.props.otherChannelEmoteSets.forEach((function(n){n.owner&&n.owner.displayName&&n.emotes.length>0&&t.push(a.createElement(A.a,{key:"emote-grid--"+n.id+"-emotes",className:"emote-picker__content-block"},a.createElement(V,{context:te.OtherChannel,emotes:n.emotes,img:a.createElement(de.a,{src:n.owner.profileImageURL,size:30,alt:n.owner.displayName,userLogin:n.owner.login}),label:n.owner.displayName,onClickEmote:e.onClickEmote})))})),this.state.hasUserInteracted||(t=t.slice(0,4)),a.createElement(a.Fragment,null,t)},t.prototype.getResidualEmoteGrids=function(){if(!this.props.isLoggedIn)return null;var e=[];return this.props.unlockedEmotes.length>0&&this.props.isLoggedIn&&e.push(a.createElement(A.a,{key:"emote-grid--unlocked-emotes",className:"emote-picker__content-block"},a.createElement(V,{context:te.Unlocked,emotes:this.props.unlockedEmotes,label:Object(s.d)("Unlocked","EmotePickerCard"),onClickEmote:this.onClickEmote}))),this.props.globalEmotes.length>0&&e.push(a.createElement(A.a,{key:"emote-grid--global-emotes",className:"emote-picker__content-block"},a.createElement(V,{context:te.Global,emotes:this.props.globalEmotes,label:Object(s.d)("Global","EmotePickerCard"),onClickEmote:this.onClickEmote}))),a.createElement(A.a,{refDelegate:this.saveAllEmotesRef},e)},t.prototype.renderSearchContent=function(){var e=Object(s.d)('No Search Results for "{inputValue}"',{inputValue:this.state.inputValue},"EmotePickerCard");return this.state.filteredEmotes.length>0&&(e=Object(s.d)('Search Results for "{inputValue}"',{inputValue:this.state.inputValue},"EmotePickerCard")),a.createElement(j.b,{className:"emote-picker__tab-content"},a.createElement(A.a,{position:R.j.Relative,padding:{x:1,top:1,bottom:3},className:"emote-picker__content-block"},a.createElement(L.a,{padding:{x:1}},a.createElement(W.a,{bold:!0,ellipsis:!0},e)),a.createElement(x.a,{emotes:this.state.filteredEmotes,onClickEmote:this.onClickEmote,spaced:!0})))},t.prototype.renderTabNav=function(){var e=null;this.props.sortedChannelEmotes.length>0&&(e=a.createElement(K,{isActive:this.state.selectedNavTab===ae.ChannelEmotes,label:ae.ChannelEmotes,icon:d.a.NavChannels,onClick:this.onTabNavClick}));var t=null;return this.props.isLoggedIn&&(t=a.createElement(K,{isActive:this.state.selectedNavTab===ae.AllEmotes,label:ae.AllEmotes,icon:d.a.EmoticonsAll,onClick:this.onTabNavClick})),e||t?a.createElement(L.a,{display:R.d.Flex,background:B.a.Alt,borderRadius:{bottomLeft:B.b.Medium,bottomRight:B.b.Medium},fullWidth:!0},a.createElement(K,{isActive:this.state.selectedNavTab===ae.FrequentlyUsedEmotes,label:ae.FrequentlyUsedEmotes,icon:d.a.GlyphLength,onClick:this.onTabNavClick}),e,t):null},t}(a.PureComponent),ue=n("DB+C"),me=function(e){function t(t){var n=e.call(this,t)||this;return n.getOwnedSetIDs=Object(m.a)((function(e){var t=new Set;if(e&&e.emoteSets&&e.emoteSets.length>0)for(var n=0,i=e.emoteSets;n<i.length;n++){var r=i[n];r&&r.id&&t.add(parseInt(r.id,10))}return t})),n.getSubProductSetIDs=Object(m.a)((function(e){var t=new Set;if(e&&e.user&&e.user.subscriptionProducts)for(var n=0,i=e.user.subscriptionProducts;n<i.length;n++){var r=i[n];r&&void 0!==r.emoteSetID&&null!==r.emoteSetID&&t.add(r.emoteSetID)}return t})),n.getAllEmoteSets=Object(m.a)((function(e){return e&&e.emoteSets?Object(N.a)(e.emoteSets):[]})),n.getMappedEmotes=Object(m.a)((function(e,t,n){var i=[],r=[],a=[],o=[],s=[];return t.forEach((function(t){t.owner||"0"!==t.id?t.owner&&""!==t.owner.id?e&&e.user&&e.user.id===t.owner.id?Object(S.e)(t.id)?s.push.apply(s,t.emotes):e.user.id!==t.owner.id||n.has(t.id)||i.push.apply(i,t.emotes):a.push(t):o.push.apply(o,t.emotes):r.push.apply(r,t.emotes)})),{channelCampaignEmotes:i,globalEmotes:r,otherChannelEmoteSets:D(a),unlockedEmotes:o,channelBitsTierEmotes:s}})),n.getSubProducts=Object(m.a)((function(e){return e&&e.user&&e.user.subscriptionProducts?Object(v.b)(e.user.subscriptionProducts):[]})),n.getChannelSubEmotes=Object(m.a)((function(e,t){return w(e,t)})),n.getSortedChannelEmotes=Object(m.a)((function(e,t,n){var i=[],r=[];return e.forEach((function(e){e.isLocked?i.push(e):r.push(e)})),Object(N.d)(t.concat(r,i,n))})),n.handleSubEvent=function(e){e.action===T.a.ClickCheckout&&n.checkAndDisplaySubscriptionCheckout();var t=n.props.channelData,i=null;if(t){var a=t.user;a&&a.self&&a.self.cumulativeTenure&&(i=a.self.cumulativeTenure.months)}Object(T.c)(Object(r.__assign)(Object(r.__assign)({},e),{action:T.a.ClickCheckout,channelID:t&&t.user&&t.user.id||"",channelLogin:t&&t.user&&t.user.displayName||"",cumulativeTenureMonths:i,isMenuOpen:null,hasSubCredit:null,sub_location:"emote_picker",modal:!1,showPrimeContent:!0,giftRecipient:null}))},n.state={frequentlyUsedEmotes:t.isLoggedIn?[]:Object(C.b)()},n}return Object(r.__extends)(t,e),Object.defineProperty(t.prototype,"gqlError",{get:function(){var e=this.props,t=e.emoteSetsData,n=e.channelData;return t&&!!t.error||n&&!!n.error||!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gqlLoading",{get:function(){return!this.checkDataLoaded(this.props)},enumerable:!0,configurable:!0}),t.prototype.componentDidMount=function(){Object(C.c)(),this.checkDataLoaded(this.props)&&(this.props.onLoad&&this.props.onLoad(this.checkForContent(this.props)),this.props.latencyTracking.reportInteractive())},t.prototype.componentDidUpdate=function(e){if(this.gqlError||(e.pubsub.messages.subscriptionInfo!==this.props.pubsub.messages.subscriptionInfo&&(this.props.channelData&&this.props.channelData.refetch(),this.props.emoteSetsData&&this.props.emoteSetsData.refetch()),this.checkDataLoaded(this.props)&&(this.props.latencyTracking.reportInteractive(),this.props.onLoad&&this.props.onLoad(this.checkForContent(this.props)))),e.visible!==this.props.visible){if(this.props.openEmotePicker(),this.props.emoteSetsData&&this.props.emoteSetsData.emoteMap){var t=Object(C.d)(this.props.emoteSetsData.emoteMap);this.setState({frequentlyUsedEmotes:t})}}else e.visible&&!this.props.visible&&this.props.closeEmotePicker()},t.prototype.componentWillUnmount=function(){this.props.closeEmotePicker()},t.prototype.render=function(){var e=this.props,t=e.channelData,n=e.emoteSetsData;if(!this.props.visible)return null;var i=t&&t.user?t.user.displayName:null,r=t&&t.user?t.user.profileImageURL:null,o=t&&t.user?t.user.login:null,s=this.getAllEmoteSets(n),c=this.getOwnedSetIDs(n),d=this.getSubProducts(t),l=this.getMappedEmotes(t,s,this.getSubProductSetIDs(t)),u=l.channelCampaignEmotes,m=l.globalEmotes,p=l.otherChannelEmoteSets,h=l.unlockedEmotes,f=l.channelBitsTierEmotes,v=this.getChannelSubEmotes(c,d);return a.createElement(le,{allEmoteSets:s,channelDisplayName:i,channelID:this.props.channelOwnerID,channelLogin:o,channelProfileImageURL:r,channelSubEmotes:v,channelSubscriptionProducts:d,direction:this.props.direction,emotePickerSessionID:this.props.emotePickerSessionID,emotePickerSource:this.props.emotePickerSource,frequentlyUsedEmotes:this.state.frequentlyUsedEmotes,globalEmotes:m,gqlError:this.gqlError,handleSubAction:this.handleSubEvent,isCommerceDisabled:this.props.isCommerceDisabled,isLoggedIn:this.props.isLoggedIn,loading:this.gqlLoading,offsetX:this.props.offsetX,onClickClose:this.props.onClickClose,onClickEmote:this.props.onClickEmote,ownedSetIDs:c,otherChannelEmoteSets:p,roomID:this.props.roomID,size:this.props.size,sortedChannelEmotes:this.getSortedChannelEmotes(v,u,f),toggleVisibility:this.props.toggleVisibility,unlockedEmotes:h})},t.prototype.checkDataLoaded=function(e){var t=!e.channelOwnerID||e.channelData&&!e.channelData.loading,n=!e.isLoggedIn||e.emoteSetsData&&!e.emoteSetsData.loading;return t&&n},t.prototype.checkForContent=function(e){var t=e.emoteSetsData,n=e.channelData;return!!(t&&t.emoteSets&&t.emoteSets.length>0)||!!(n&&n.user&&n.user.subscriptionProducts)&&Object(v.b)(n.user.subscriptionProducts).filter(this.subscriptionProductHasEmotes).length>0},t.prototype.subscriptionProductHasEmotes=function(e){return null!==e.emoteSetID&&!!e.emotes&&e.emotes.length>0},t.prototype.checkAndDisplaySubscriptionCheckout=function(){var e=s.n.get(E.a.SUB_CHECKOUT__PRODUCT_KEY,""),t=s.n.get(E.a.SUB_CHECKOUT__RECIPIENT_KEY,""),n=s.n.get(E.a.SUB_CHECKOUT__MYSTERY_GIFT_COUNT,""),i=Number(n);e&&(this.props.channelData&&this.props.channelData.user&&this.props.channelData.user.subscriptionProducts&&this.props.channelData.user.subscriptionProducts.map((function(e){return e?e.name:null})).includes(e)?this.props.sessionUser?this.props.showSubscriptionCheckout({recipientLogin:t,productName:e,mysteryGiftCount:i,trackingContext:{source:_.c.EmotePicker}}):this.props.showLoginModal():E.a.clearSubscriptionCheckoutKeys())},t}(a.PureComponent);var pe=Object(u.d)(Object(i.b)((function(e){return{currentUserID:e.session.user&&e.session.user.id,emotePickerSessionID:e.chat&&e.chat.emotePickerSessionID||null,sessionUser:e.session.user,isLoggedIn:Object(k.f)(e)}}),(function(e){return Object(u.b)({closeEmotePicker:b.A,openEmotePicker:b.M,showLoginModal:E.a.showLoginModalWithCheckoutDispatch(g.a.EmotePickerSubscriptionButton),showSubscriptionCheckout:y.a},e)})),Object(p.a)(ue,{name:"channelData",skip:function(e){return!e.channelOwnerID},options:function(e){return{variables:{channelOwnerID:e.channelOwnerID}}}}),Object(h.a)([{topic:function(e){return"user-subscribe-events-v1."+e.currentUserID},mapMessageTypesToProps:{"*":"subscriptionInfo"},skip:function(e){return!e.currentUserID}}]),Object(I.withLatencyTracking)("EmotePicker"),Object(f.a)(),Object(F.withWatchPartyContext)(F.mapWatchPartyStateToChatProps))(me),he=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={hasInteracted:!1,isEmotePickerMenuVisible:!1,isEmotePickerButtonVisible:!1},t.onClickOut=function(){t.setState({isEmotePickerMenuVisible:!1})},t.onClickEmote=function(e,n){t.props.onClickEmote&&t.props.onClickEmote(e,n)},t.toggleEmotePicker=function(){t.setState((function(e){return{isEmotePickerMenuVisible:!e.isEmotePickerMenuVisible}}))},t.onEmotePickerDataLoaded=function(e){e&&t.setState({isEmotePickerButtonVisible:!0})},t.onInteraction=function(){return t.setState({hasInteracted:!0})},t}return Object(r.__extends)(t,e),t.prototype.componentDidMount=function(){this.props.latencyTracking.reportInteractive(),this.props.inputRef&&(this.props.inputRef.addEventListener("mouseenter",this.onInteraction),this.props.inputRef.addEventListener("focus",this.onInteraction))},t.prototype.componentWillUnmount=function(){this.props.inputRef&&(this.props.inputRef.removeEventListener("mouseenter",this.onInteraction),this.props.inputRef.removeEventListener("focus",this.onInteraction))},t.prototype.render=function(){var e=null;this.state.isEmotePickerButtonVisible&&(e=a.createElement(l,{onClick:this.toggleEmotePicker,isActive:this.state.isEmotePickerMenuVisible}));var t=null;this.hasInteractedOrPageload&&(t=a.createElement(pe,{channelOwnerID:this.props.channelOwnerID,emotePickerSource:this.props.emotePickerSource,onClickClose:this.toggleEmotePicker,onClickEmote:this.onClickEmote,onLoad:this.onEmotePickerDataLoaded,offsetX:this.props.offsetX,toggleVisibility:this.toggleEmotePicker,visible:this.state.isEmotePickerMenuVisible,direction:this.props.direction}));var n=a.createElement(A.a,Object(r.__assign)({className:"emote-picker-and-button"},this.layoutProps),e,t);return this.props.shouldCloseOnClickOut?a.createElement(o.a,{onClickOut:this.onClickOut},n):n},Object.defineProperty(t.prototype,"hasInteractedOrPageload",{get:function(){return!(!this.props.firstPageLoaded&&!this.state.hasInteracted)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"layoutProps",{get:function(){var e={attachTop:!!this.props.attachTop,attachRight:!!this.props.attachRight,attachBottom:!!this.props.attachBottom,attachLeft:!!this.props.attachLeft,padding:this.props.padding};return this.props.position&&(e.position=this.props.position),e},enumerable:!0,configurable:!0}),t}(a.Component),fe=Object(I.withLatencyTracking)("EmotePicker")(he);var ve=Object(i.b)((function(e){return{firstPageLoaded:e.session.firstPageLoaded}}))(fe);n("cpJf");n.d(t,"a",(function(){return ve})),n.d(t,"c",(function(){return pe})),n.d(t,"b",(function(){return l}))},nAiT:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return d})),n.d(t,"e",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"g",(function(){return m})),n.d(t,"f",(function(){return p}));var i=n("q1tI"),r=n("4rCz"),a=n("+80q"),o=n("Jsra");function s(){return Object(r.d)("Channel Points","ChannelPoints")}function c(){return Object(r.d)("This reward is temporarily out of stock.","ChannelPoints")}function d(e){return Object(r.d)("<x:strong>Oops!</x:strong> This reward went out of stock. <x:link>Please try again later.</x:link>",{"x:strong":function(e){return i.createElement(a.a,{bold:!0,type:a.e.Span},e)},"x:link":function(t){return i.createElement(o.a,{onClick:e},t)}},"ChannelPoints")}function l(e,t){return e?Object(r.d)("{streamerName} has changed the reward requirements. <x:link>Please try again.</x:link>",{streamerName:e,"x:link":function(e){return i.createElement(o.a,{onClick:t},e)}},"ChannelPoints"):Object(r.d)("The broadcaster has changed the reward requirements. <x:link>Please try again.</x:link>",{"x:link":function(e){return i.createElement(o.a,{onClick:t},e)}},"ChannelPoints")}function u(e,t){return e?Object(r.d)("<x:strong>Oops!</x:strong> {streamerName} has changed this reward's requirements. <x:link>Please try again.</x:link>",{streamerName:e,"x:strong":function(e){return i.createElement(a.a,{bold:!0,type:a.e.Span},e)},"x:link":function(e){return i.createElement(o.a,{onClick:t},e)}},"ChannelPoints"):Object(r.d)("<x:strong>Oops!</x:strong> The broadcaster has changed this reward's requirements. <x:link>Please try again.</x:link>",{"x:strong":function(e){return i.createElement(a.a,{bold:!0,type:a.e.Span},e)},"x:link":function(e){return i.createElement(o.a,{onClick:t},e)}},"ChannelPoints")}function m(){return Object(r.d)("Channel Points early access","ChannelPointsSignupPage")}function p(){return Object(r.d)("Review Requests Queue","CustomRewardsList")}},nR4f:function(e,t,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"EmoteCard"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"emoteID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"emote"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"emoteID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"stream"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"subscriptionProduct"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"subProduct"},directives:[]}]}}]}}]}}],loc:{start:0,end:248}};i.loc.source={body:'#import "twilight/features/chat/components/emote-card/emote-subscription-product.gql"\nquery EmoteCard ($emoteID: ID!) {\nemote(id: $emoteID) {\nid\ntoken\nsetID\nowner {\nid\nlogin\ndisplayName\nstream {\nid\ntype\n}\n}\nsubscriptionProduct {\n...subProduct\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var r={};i.definitions=i.definitions.concat(n("HfAM").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var t=e.name.value;return!r[t]&&(r[t]=!0,!0)})));var a={};function o(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}i.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),a[e.name.value]=t}})),e.exports=i,e.exports.EmoteCard=function(e,t){var n={kind:e.kind,definitions:[o(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var i=a[t]||new Set,r=new Set,s=new Set;for(i.forEach((function(e){s.add(e)}));s.size>0;){var c=s;s=new Set,c.forEach((function(e){r.has(e)||(r.add(e),(a[e]||new Set).forEach((function(e){s.add(e)})))}))}return r.forEach((function(t){var i=o(e,t);i&&n.definitions.push(i)})),n}(i,"EmoteCard")},oK83:function(e,t,n){"use strict";var i,r,a;n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),function(e){e[e.unknown=0]="unknown",e[e.chat=1]="chat",e[e.room=2]="room",e[e.whisper=3]="whisper",e[e.vod=4]="vod"}(i||(i={})),function(e){e[e.chat_message=0]="chat_message",e[e.extension_message=1]="extension_message",e[e.member_list=2]="member_list",e[e.recent_raids=3]="recent_raids",e[e.room_message=4]="room_message",e[e.test=5]="test",e[e.user_command=6]="user_command",e[e.viewer_list=7]="viewer_list",e[e.viewer_list_mod_section=8]="viewer_list_mod_section",e[e.mega_cheer_notification=9]="mega_cheer_notification",e[e.bits_leaderboard=10]="bits_leaderboard",e[e.popout_button=11]="popout_button",e[e.hype_train=12]="hype_train"}(r||(r={})),function(e){e[e.Viewer=0]="Viewer",e[e.Extension=1]="Extension",e[e.Emote=2]="Emote"}(a||(a={}))},oe5X:function(e,t,n){"use strict";var i=n("XmgI"),r=n("RcPG"),a=n("0FG4"),o=n("mrSG"),s=n("VJH5");var c=n("i6WW"),d=n("gTu3"),l=n("6j5V"),u=/^(['"*([{</]*)(@?)((?:[^\u0000-\u007F]|[\w-])+)/;function m(e,t){if(!t)return!1;var n=t.displayName,i=t.login;return e===n||e.toLowerCase()===i}function p(e,t){void 0===t&&(t={});for(var n=e.match(/[^\uD800-\uDFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDFFF]/g)||[],i=function(e){if(!e)return[];var t=e.list.filter((function(t){return t.categories[s.a.Aggressive]&&e.preferences[s.a.Aggressive]||t.categories[s.a.Identity]&&e.preferences[s.a.Identity]||t.categories[s.a.Profanity]&&e.preferences[s.a.Profanity]||t.categories[s.a.Sexual]&&e.preferences[s.a.Sexual]}));return 0===t.length?t:(t.sort((function(e,t){return e.startIndex-t.startIndex})),t.reduce((function(e,t,n){if(0===n)return e.push(t),e;var i=e[e.length-1];return t.startIndex<=i.endIndex+1?(i.endIndex=Math.max(t.endIndex,i.endIndex),i.categories=Object(o.__assign)(Object(o.__assign)({},i.categories),t.categories)):e.push(t),e}),[]))}(t.flags),a=0,c=[];a<n.length;){var d=i&&i.shift();d?(c.push.apply(c,h(n.slice(a,d.startIndex),a,t)),c.push({type:r.a.FlaggedSegment,categories:d.categories,content:f(h(n.slice(d.startIndex,d.endIndex+1),d.startIndex,t)),length:d.endIndex-d.startIndex+1,originalText:n.slice(d.startIndex,d.endIndex+1).join("")}),a=d.endIndex+1):(c.push.apply(c,h(n.slice(a),a,t)),a=n.length)}return f(c)}function h(e,t,n){void 0===n&&(n={});var o=n.cheers,s=n.emotes,p=n.links,h=n.mentions,f="",g=0;return e.reduce((function(n,k,b){if(v(k))return f="",n;if(0===f.length&&(g=t+b),f+=k,b!==e.length-1&&!v(e[b+1]))return n;var S=s&&Object(a.c)(f,g,s);if(S)return n.concat(S);var y=o&&Object(i.f)(f,o);if(y)return n.concat(y);var E=p&&Object(c.a)(f,p);if(E)return n.concat(E);var _=h&&function(e,t){var n=e.match(u);if(!n)return null;var i=[],a=n[1],o=Boolean(n[2].length),s=n[3],c=e.slice(n[0].length);if(a.length&&i.push(Object(l.a)(a)),o){var p=d.a.Default;m(s,t.sessionUser)?p=d.a.Recipient:t.sessionUser&&t.sessionUser.login===t.senderLogin&&(p=d.a.Sender),i.push({type:r.a.Mention,content:{recipient:s,currentUserMentionRelation:p}})}else{if(!m(s,t.sessionUser))return null;i.push({type:r.a.CurrentUserHighlight,content:s})}return c.length&&i.push(Object(l.a)(c)),i}(f,h);return _?n.concat([_]):n.concat(Object(l.a)(f))}),[])}function f(e){return e.reduce((function(e,t,n){return 0===n?[].concat.call(e,t):[].concat.call(e,Object(l.a)(" "),t)}),[]).reduce((function(e,t,n){if(0===n)return e.concat(t);var i=e[e.length-1];return t.type===r.a.Text&&i.type===r.a.Text?(i.content=""+i.content+t.content,e):e.concat(t)}),[])}function v(e){return/\s/.test(e)}n.d(t,"a",(function(){return p}))},okS7:function(e,t,n){"use strict";n("kPBf");var i,r=n("mrSG"),a=n("q1tI"),o=n("8Ad5"),s=n("1rIY"),c=n("uu1w"),d=n("/7QA"),l=n("2xye"),u={Chat:"chat",Feed:"feed",Whisper:"whisper"},m="/",p=":",h="#",f="@",v=function(e){switch(e){case c.a.Command:return m;case c.a.Emote:return p;case c.a.Hashtag:return h;case c.a.Mention:return f;default:return void d.k.warn("Chat Suggestions tracking was passed an unknown autocomplete type.")}},g=function(e){var t=v(e.autocompleteType);if(t){var n={channel:e.channelLogin,completed_text:e.completedText,source:e.source,start_character:t};d.o.track(l.SpadeEventType.ChatSuggestionComplete,n)}},k=n("3aAs"),b=n("Kae6");!function(e){e.Input="input",e.TextArea="textarea"}(i||(i={}));var S=Object(s.a)("Autocomplete",{registerAutocompleteProvider:function(){return function(){return null}}}),y=S.withContext,E=S.context,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={autocompleteType:c.a.None,matchedCursorPosition:0,matches:null,value:""},t.providers=[],t.contextForChildren={registerAutocompleteProvider:t.registerAutocompleteProvider.bind(t)},t.onChange=function(e){t.setState({value:e.target.value},(function(){t.getMatches()})),t.props.onChange&&t.props.onChange(e)},t.onKeyDown=function(e){var n=function(){t.props.onKeyDown&&t.props.onKeyDown(e)},i=function(){e.preventDefault(),e.stopPropagation()},r=e.charCode||e.keyCode;if(r!==o.a.Enter){switch(r){case o.a.Tab:if(!t.state.matches)t.getMatches(!0)&&i();break;case o.a.Esc:t.state.matches&&(i(),t.resetDisplayState())}n()}else n()},t.setComponentRefDelegate=function(e){t.componentRef=e,t.props.componentRefDelegate&&t.props.componentRefDelegate(e)},t.getMatches=function(e){var n=t.state.value;if(0===t.providers.length||0===n.length)return t.resetDisplayState(),!1;var i=t.getCurrentCursorPosition();if(i>n.length);else for(;i<n.length&&!/\s/.test(n.charAt(i));)i++;var r=n.substring(0,i);if(0===r.length||/\s/.test(r.substring(r.length-1)))return t.resetDisplayState(),!1;for(var a=r.split(/\s/),o=a.length-1,s=a[o],c=0,d=t.providers;c<d.length;c++){var l=d[c];if(!e||l.canBeTriggeredByTab){var u=l.getMatches(s,e,o);if(u)return t.props.onMatch&&t.props.onMatch(u,t.insertReplacement,t.resetDisplayState),t.setState({autocompleteType:l.autocompleteType,matchedCursorPosition:i,matches:u}),!0}}return t.resetDisplayState(),!1},t.resetDisplayState=function(e,n){t.props.onReset&&t.props.onReset();var i=Object(r.__assign)(Object(r.__assign)(Object(r.__assign)({},t.state),{autocompleteType:c.a.None,matches:null}),e||{});t.setState(i,n)},t.insertReplacement=function(e){var n,i=t.state.value,a=t.state.matchedCursorPosition,o=i.substring(0,a),s=o.lastIndexOf(e.current);if(-1===s)o=o.concat(e.replacement+" "),a=o.length;else{var c=o.substring(0,s),d=i.length>s+e.current.length?i.substring(s+e.current.length):"",l=d.startsWith(" ")?e.replacement:e.replacement+" ";o=""+c+l+d;var u=t.getNextCursorSelection(c,l,d,e);a=u.start,n=u.end}g(Object(r.__assign)(Object(r.__assign)({},t.props.trackingParams||{}),{autocompleteType:t.state.autocompleteType,completedText:e.replacement,source:t.props.suggestionSource})),t.resetDisplayState({value:o},(function(){t.setCursorSelection(a,n)}))},t.getCurrentCursorPosition=function(){return t.componentRef.selectionStart||0},t.getNextCursorSelection=function(e,t,n,i){var r=e.length+t.length;if(i.selection){var a=t.indexOf(i.selection);return{start:e.length+a,end:n.startsWith(" ")?r:r-1}}return{start:r,end:r}},t.setCursorSelection=function(e,n){t.componentRef&&(t.componentRef.setSelectionRange(e,n||e),t.componentRef.focus())},t}return Object(r.__extends)(t,e),t.prototype.componentDidMount=function(){this.props.refDelegate&&this.props.refDelegate(this)},t.prototype.componentDidUpdate=function(e,t){t.value!==this.state.value&&this.props.onValueUpdate&&this.props.onValueUpdate(this.state.value),!t.matches&&this.state.matches&&function(e){var t=v(e.autocompleteType);if(t){var n={source:e.source,start_character:t};d.o.track(l.SpadeEventType.ChatSuggestion,n)}}({autocompleteType:this.state.autocompleteType,source:this.props.suggestionSource})},t.prototype.render=function(){var e=Object(r.__assign)(Object(r.__assign)({},this.props),{onChange:this.onChange,onKeyDown:this.onKeyDown,refDelegate:this.setComponentRefDelegate,value:this.state.value});return a.createElement(E.Provider,{value:this.contextForChildren},this.props.componentType===i.Input?a.createElement(k.a,Object(r.__assign)({},e,{type:e.type||k.c.Text})):a.createElement(b.a,Object(r.__assign)({},e,{autoComplete:e.htmlAutocomplete})),this.props.children)},t.prototype.getValue=function(){return this.state.value},t.prototype.setValue=function(e){this.resetDisplayState({value:e})},t.prototype.registerAutocompleteProvider=function(e){var t=this;return this.providers.push(e),function(){var n=t.providers.indexOf(e);t.providers.splice(n,1)}},t}(a.Component),C=n("u5aL"),N=n("sUnt"),D=n("hnjF"),w=n("ygYM"),O=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={matches:null},t.onMatchSelect=function(e){t.insertReplacement&&t.insertReplacement(e)},t.onDismiss=function(){t.resetDisplayState&&t.resetDisplayState()},t.setMatches=function(e,n,i){t.insertReplacement||(t.insertReplacement=n),t.resetDisplayState||(t.resetDisplayState=i),t.setState({matches:e})},t.reset=function(){t.setState({matches:null})},t}return Object(r.__extends)(t,e),t.prototype.render=function(){return a.createElement(a.Fragment,null,this.state.matches&&a.createElement(N.a,{position:D.j.Relative},a.createElement(C.a,{onClickOut:this.onDismiss},a.createElement(w.a,{direction:w.b.TopLeft,"data-test-selector":"autocomplete-balloon",show:!0},a.createElement(N.a,{padding:{bottom:.5}},a.createElement(x,{matches:this.state.matches,onMatchSelect:this.onMatchSelect,onDismiss:this.onDismiss,containerElement:this.props.containerElement}))))),a.createElement(_,Object(r.__assign)({},this.props,{onMatch:this.setMatches,onReset:this.reset})))},t}(a.Component),I=n("8/mp"),T=n("G9mL"),F=n("3Czn"),j=n("i4Ys"),P=n("X2PJ"),U=n("+80q"),M="autocomplete-match-list-matches",x=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.resizeAnimationFrame=0,t.messages={noMatches:Object(d.d)("No matches.","AutocompleteBalloon")},t.logger=d.k.withCategory("AutocompleteMatchList"),t.renderMatches=function(){var e=new Set,n=[];return t.groupMatches().forEach((function(i,r){var o=i.group;o&&!e.has(o)&&(0!==r&&n.push(a.createElement(T.a,{key:"autocomplete-separator-"+r})),n.push(a.createElement(N.a,{key:"autocomplete-heading-"+r,padding:{x:.5}},a.createElement(F.a,null,o))),e.add(o)),n.push(t.renderMatchListItem(i,r))})),n},t.renderMatchListItem=function(e,n){var i=t.state.selectedMatch,r=i&&i.replacement===e.replacement;return a.createElement(N.a,{"data-test-selector":M,key:"autocomplete-match-"+n,refDelegate:r?t.focusOnOption:void 0},a.createElement(j.a,{borderRadius:P.b.Small,"data-a-target":e.replacement,"data-click-index":n,hover:r,onClick:t.onMatchClick,onMouseEnter:t.handleMatchMouseEnter,selected:r,type:j.b.Alpha},a.createElement(N.a,{alignItems:D.b.Center,display:D.d.Flex,padding:{x:.5}},e.element)))},t.handleMatchMouseEnter=function(e){var n=t.getMatchFromEvent(e);n&&t.setState({selectedMatch:n})},t.onMatchClick=function(e){var n=t.getMatchFromEvent(e);n&&t.props.onMatchSelect(n)},t.getMatchFromEvent=function(e){var n=t.groupMatches(),i=e.currentTarget.getAttribute("data-click-index");return!i||+i>=n.length?(t.logger.errorAndReport(new Error,"The index received from the UI element was not found in props.matches."),null):n[+i]},t.handleKeydown=function(e){var n=e.charCode||e.keyCode,i=function(){e.preventDefault(),e.stopPropagation()};switch(n){case o.a.Tab:case o.a.Enter:i(),t.props.matches.length&&t.state.selectedMatch?t.props.onMatchSelect(t.state.selectedMatch):t.props.onDismiss();break;case o.a.Up:case o.a.Down:if(!t.state.selectedMatch||!t.props.matches.length)return;var r=t.groupMatches(),a=r.indexOf(t.state.selectedMatch);if(-1===a)return void t.logger.errorAndReport(new Error,"The selected match was not found in props.matches.");i();var s=n===o.a.Up?-1:1,c=r[t.getIndexWithinLength(a+s,t.props.matches.length)];t.setState({selectedMatch:c})}},t.groupMatches=function(){for(var e={},n=0,i=t.props.matches;n<i.length;n++){var r=i[n];(d=e[c=r.group||"undefined"]||[]).push(r),e[c]=d}for(var a=[],o=0,s=Object.keys(e).sort(t.sortGroups);o<s.length;o++){var c,d;(d=e[c=s[o]])&&a.push.apply(a,d)}return a},t.sortGroups=function(e,t){return"undefined"===e?1:"undefined"===t?-1:e>t?1:e<t?-1:0},t.getIndexWithinLength=function(e,t){var n=e%t;return n<0?n+t:n},t.onResize=function(){t.resizeAnimationFrame||(t.resizeAnimationFrame=requestAnimationFrame(t.setContainerHeight))},t.setContainerHeight=function(){var e=t.props.containerElement&&t.props.containerElement.clientHeight||1080;t.scrollableArea&&t.scrollableArea.root&&(t.scrollableArea.root.style.maxHeight=e+"px"),t.resizeAnimationFrame=0},t.focusOnOption=function(e){if(e&&t.AutocompleteMatchListElement){var n=e.getBoundingClientRect(),i=t.AutocompleteMatchListElement.getBoundingClientRect();(n.bottom>i.bottom||n.top<i.top)&&e.scrollIntoView()}},t.setAutocompleteMatchListElement=function(e){t.AutocompleteMatchListElement=e},t.setScrollableAreaRef=function(e){return t.scrollableArea=e},t}return Object(r.__extends)(t,e),t.getDerivedStateFromProps=function(e,t){var n=e.matches.reduce((function(e,n,i){return t.selectedMatch?n.replacement===t.selectedMatch.replacement?i:e:0}),0);return{selectedMatch:e.matches[n]}},t.prototype.componentDidMount=function(){window.addEventListener("keydown",this.handleKeydown,!0),window.addEventListener("resize",this.onResize,!0),this.setContainerHeight(),this.props.matches.length>0&&this.setState({selectedMatch:this.props.matches[0]})},t.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.onResize,!0),window.removeEventListener("keydown",this.handleKeydown,!0),this.resizeAnimationFrame&&cancelAnimationFrame(this.resizeAnimationFrame)},t.prototype.render=function(){var e;return e=0===this.props.matches.length?a.createElement(N.a,{padding:{x:.5},"data-test-selector":"autocomplete-match-list-no-matches"},a.createElement(U.a,{type:U.e.Span,color:P.c.Alt2},this.messages.noMatches)):this.renderMatches(),a.createElement(N.a,{position:D.j.Relative,padding:{top:.5,x:.5}},a.createElement(D.g,{"data-test-selector":"autocomplete-matches-container",className:"autocomplete-match-list",overflow:D.i.Hidden,display:D.d.Flex,flexDirection:D.e.Column},a.createElement("div",{ref:this.setAutocompleteMatchListElement},a.createElement(I.b,{suppressScrollX:!0,scrollRef:this.setScrollableAreaRef},a.createElement(N.a,null,e)))))},t}(a.Component),A=n("hbnN"),R=n("lZdE"),L=n("OpME"),W=(n("gDzh"),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.autocompleteType=c.a.Emote,t.canBeTriggeredByTab=!1,t.hydrateEmotes=Object(A.a)((function(e){for(var t=[],n=0,i=e;n<i.length;n++){var r=i[n];r&&r.id&&r.emotes&&t.push({id:r.id,emotes:Object(L.b)(r.emotes)})}return t})),t.getMatches=function(e){return e.startsWith(":")?e.length<3?null:t.getMatchedEmotes(e):null},t.getMatchedEmotes=function(e){var n=t.hydrateEmotes(t.props.emotes);if(!n||0===n.length)return null;var i=e.substring(1),r=n.reduce((function(e,n){var r=n.emotes.filter((function(e){return t.doesEmoteMatchTerm(e,i)}));return e.concat(r)}),[]);return r=Object(L.d)(r),(r=Object(L.e)(r,i)).map((function(e){return{current:":"+i,replacement:e.token,element:t.renderEmoteSuggestion(e)}}))},t.doesEmoteMatchTerm=function(e,t){var n=new RegExp("^"+Object(R.a)(t),"i");if(e.token.match(n))return!0;var i=new RegExp(""+Object(R.a)(t.charAt(0)).toUpperCase()),r=new RegExp("^"+Object(R.a)(t.slice(1)),"i"),a=e.token.match(i);return!!(a&&a.index&&e.token.slice(a.index+1).match(r))},t.renderEmoteSuggestion=function(e){return[a.createElement(N.a,{padding:.5,flexShrink:0,key:"emote-img-"+e.id},a.createElement("img",{alt:e.token+"-emote",className:"emote-autocomplete-provider__image",srcSet:e.srcSet})),a.createElement(U.a,{type:U.e.Span,key:"emote-text-"+e.id,ellipsis:!0},e.token)]},t}return Object(r.__extends)(t,e),t.prototype.componentDidMount=function(){this.unregister=this.props.registerAutocompleteProvider(this)},t.prototype.componentWillUnmount=function(){this.unregister()},t.prototype.render=function(){return null},t}(a.Component)),B=y((function(e){return e}))(W);n.d(t,"c",(function(){return _})),n.d(t,"a",(function(){return i})),n.d(t,"g",(function(){return y})),n.d(t,"d",(function(){return O})),n.d(t,"b",(function(){return x})),n.d(t,"f",(function(){return B})),n.d(t,"e",(function(){return u}))},pORx:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"WhisperThread_ReportUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ReportContentInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reportContent"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"contentID"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:109}};n.loc.source={body:"mutation WhisperThread_ReportUser($input: ReportContentInput!) {\nreportContent(input: $input) {\ncontentID\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function r(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.WhisperThread_ReportUser=function(e,t){var n={kind:e.kind,definitions:[r(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var a=i[t]||new Set,o=new Set,s=new Set;for(a.forEach((function(e){s.add(e)}));s.size>0;){var c=s;s=new Set,c.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=r(e,t);i&&n.definitions.push(i)})),n}(n,"WhisperThread_ReportUser")},"r+cx":function(e,t){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"pointsImageFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CommunityPointsImage"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url2x"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url4x"},arguments:[],directives:[]}]}}],loc:{start:0,end:72}};n.loc.source={body:"fragment pointsImageFragment on CommunityPointsImage {\nurl\nurl2x\nurl4x\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=n},rCSd:function(e,t,n){},sU0Q:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"VideoChatCard_Video"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"videoID"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"video"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"videoID"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"previewThumbnailURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"90"}},{kind:"Argument",name:{kind:"Name",value:"height"},value:{kind:"IntValue",value:"51"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"publishedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:162}};n.loc.source={body:"query VideoChatCard_Video($videoID: ID!) {\nvideo(id: $videoID) {\nid\ntitle\npreviewThumbnailURL(width: 90 height: 51)\npublishedAt\nowner {\nid\nlogin\ndisplayName\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function r(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.VideoChatCard_Video=function(e,t){var n={kind:e.kind,definitions:[r(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var a=i[t]||new Set,o=new Set,s=new Set;for(a.forEach((function(e){s.add(e)}));s.size>0;){var c=s;s=new Set,c.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=r(e,t);i&&n.definitions.push(i)})),n}(n,"VideoChatCard_Video")},"szP+":function(e,t,n){"use strict";var i=n("fvjX"),r=n("/7QA"),a=n("mrSG"),o=n("w09P"),s=n("CzFK"),c=234,d=310;function l(e){if(0===e.openedIDs.length)return 0;for(var t=0,n=0,i=e.openedIDs;n<i.length;n++){var r=i[n],a=e.byID[r];a.hidden||(t+=a.collapsed?c:d)}return t}function u(e){var t=Object(a.__spreadArrays)(e.openedIDs),n=t.pop();return n&&e.focusedID===n&&t.length>0&&(t.pop(),t.push(n)),o(e,(function(e){return e.openedIDs}),(function(){return t}))}function m(e,t){var n=e.orderedIDs.filter((function(t){return!e.openedIDs.includes(t)}));return n.length>0?p(e,n[0],t):e}function p(e,t,n){var i=n-l(e),r=Object(a.__assign)({},e);return r.openedIDs.includes(t)||(i<d&&(r=u(r)),r=o(r,(function(e){return e.openedIDs}),(function(e){return e.push(t),e}))),r}function h(e,t,n){if(!e.byID[t])return e;var i=o(e,(function(e){return e.byID}),(function(e){return e[t].collapsed=!1,e}));return i.focusedID=t,l(e)>n&&(i=u(i)),i}var f=n("WSPL");n.d(t,"b",(function(){return g})),n.d(t,"a",(function(){return b}));var v=Object(i.c)({display:function(e,t){switch(void 0===e&&(e={byID:{},orderedIDs:[],openedIDs:[],focusedID:""}),t.type){case s.f:var n=(r=Object(a.__assign)({},e)).byID[t.data.threadID],i=r.openedIDs.includes(t.data.threadID);return n||(r=o(r,(function(e){return e.orderedIDs}),(function(e){return e.push(t.data.threadID),e})),r=o(r,(function(e){return e.byID}),(function(e){return e[t.data.threadID]=t.data,e}))),r.openedIDs.includes(t.data.threadID)&&!r.byID[t.data.threadID].hidden||(r.byID[t.data.threadID].hidden=t.data.hidden),t.data.ignoreCollapseIfOpen||t.data.collapsed||(r.focusedID=t.data.threadID),r=p(r,t.data.threadID,t.contentWidth),(!i||i&&!t.data.ignoreCollapseIfOpen)&&(t.data.collapsed||(r=h(r,t.data.threadID,t.contentWidth))),r;case s.b:if(!e.byID[t.threadID])return e;var r=o(e,(function(e){return e.byID}),(function(e){return delete e[t.threadID],e}));return r=o(r,(function(e){return e.orderedIDs}),(function(e){return e.filter((function(e){return e!==t.threadID}))})),r=o(r,(function(e){return e.openedIDs}),(function(e){return e.filter((function(e){return e!==t.threadID}))})),e.focusedID===t.threadID&&(r.focusedID=r.openedIDs[0]),m(r,t.contentWidth);case s.c:return e.byID[t.threadID]?(e.focusedID===t.threadID&&(e.focusedID=""),o(e,(function(e){return e.byID}),(function(e){return e[t.threadID].collapsed=!0,e}))):e;case s.d:return h(e,t.threadID,t.contentWidth);case s.e:return o(e,(function(e){return e.focusedID}),(function(){return t.threadID}));case s.g:return o(e,(function(e){return e.focusedID}),(function(e){return e===t.threadID?"":e}));case s.a:var c=l(e);if(c>t.contentWidth){if(e.openedIDs.length<=1)return e;for(var f=Object(a.__assign)({},e);c>t.contentWidth&&f.openedIDs.length>1;)c=l(f=u(f));return f}if(t.contentWidth-c>=d){var v=Math.floor((t.contentWidth-c)/d),g=Math.min(v,e.orderedIDs.length-e.openedIDs.length);if(0===g)return e;f=Object(a.__assign)({},e);for(var k=0;k<g;k++)if((f=m(f,t.contentWidth)).openedIDs.length>1)for(var b=f.openedIDs,S=b.length,y=0,E=f.orderedIDs;y<E.length;y++){var _=E[y];if(b[S-1]===_){var C=b.splice(S-2,1);b.push(C[0]);break}if(b[S-2]===_)break}return f}return e;default:return e}},notifications:function(e,t){switch(void 0===e&&(e={byThreadID:{}}),t.type){case f.a:return e.byThreadID[t.threadID]?o(e,(function(e){return e.byThreadID[t.threadID]}),(function(e){return Object(a.__spreadArrays)([{threadID:t.threadID,afterMessageID:t.afterMessageID,content:t.content}],e)})):o(e,(function(e){return e.byThreadID}),(function(e){var n;return Object(a.__assign)(((n={})[t.threadID]=[{threadID:t.threadID,afterMessageID:t.afterMessageID,content:t.content}],n),e)}));default:return e}}});function g(e,t){return e.whispers?e.whispers.display.byID[t]:null}var k=[];function b(e,t){return e.whispers.notifications.byThreadID[t]||k}r.p.store.registerReducer("whispers",v)},t4UF:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("mrSG"),r=n("q1tI"),a=n("fBrF");function o(e){return function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(i.__extends)(n,t),n.prototype.render=function(){return r.createElement(a.a,Object(i.__assign)({},this.props),r.createElement(e,Object(i.__assign)({},this.props)))},n}(r.Component)}},"t6r+":function(e,t,n){"use strict";n("szP+")},tQZM:function(e,t,n){"use strict";n.d(t,"g",(function(){return f})),n.d(t,"f",(function(){return v})),n.d(t,"e",(function(){return g})),n.d(t,"a",(function(){return k})),n.d(t,"d",(function(){return b})),n.d(t,"c",(function(){return S})),n.d(t,"b",(function(){return y}));var i=n("mrSG"),r=n("q1tI"),a=n("/7QA"),o=n("oe5X"),s=n("0FG4"),c=n("cys1"),d=n("oK83"),l=n("hnjF"),u=n("+80q"),m=n("X2PJ"),p=n("sUnt"),h=n("4eMh");function f(e,t,n){return void 0===n&&(n={}),Object(c.f)(Object(o.a)(e,{emotes:{type:s.a.Position,map:E(t)},links:{}}),n,!0)}var v=function(e){if(e.deletedAt)return null;var t="/me "===e.content.substr(0,4);t&&(e.content=e.content.substr(4),e.emotes=e.emotes.map((function(e){return e&&e.from&&e.to?Object(i.__assign)(Object(i.__assign)({},e),{from:e.from-4,to:e.to-4}):null})));var n=[r.createElement("span",{key:"str-separator","data-test-selector":h.a},t?" ":": ")],o={messageAuthorID:e.from&&e.from.id||"",messageSourceID:e.id,emoteSourceType:d.a.whisper};if(n.push.apply(n,f(e.content,e.emotes,o)),e.editedAt){var s=Object(a.d)("edited","ThreadMessage"),c=Object(a.d)("{timestamp, date, full} {timestamp, time, long}",{timestamp:new Date(e.editedAt)},"ThreadMessage");n.push(r.createElement(l.g,{key:"editedAt",margin:{left:1}},r.createElement(u.a,{type:u.e.Span,className:"thread-message__message--edited",title:c,color:m.c.Alt2},"("+s+")")))}var v=e.from&&e.from.chatColor||"",g=e.from&&e.from.displayName||r.createElement(u.a,{type:u.e.Span,italic:!0},Object(a.d)("Unknown","ThreadMessage")),k=t?v:"";return r.createElement(p.a,{padding:{x:1,y:.5}},r.createElement("span",{className:"thread-message__message--user-name","data-a-target":"whisper-message-name",style:{color:v}},g),r.createElement("span",{style:{color:k}},n))},g=function(){return r.createElement(p.a,{padding:{y:.5,x:1}},Object(a.d)("Please don't share passwords or personal information.","whispers"))},k=function(){return r.createElement(p.a,{padding:{y:.5,x:1}},Object(a.d)("This account is no longer active.","whispers"))},b=function(e){var t=new Date,n=new Date;n.setDate(n.getDate()-7);var o="",s={hour:"numeric",minute:"numeric",second:"numeric"},c=Object(i.__assign)(Object(i.__assign)({},s),{year:"numeric",month:"numeric",day:"numeric"});o=e.timestamp.toDateString()===t.toDateString()?Object(a.d)("Today, {timestamp, time, medium}",{timestamp:e.timestamp},"ThreadMessage"):e.timestamp<n?Object(a.j)(e.timestamp,c):Object(a.j)(e.timestamp,Object(i.__assign)(Object(i.__assign)({},s),{weekday:"long"}));var d=Object(a.j)(e.timestamp,Object(i.__assign)(Object(i.__assign)({},c),{timeZoneName:"short"}));return r.createElement(p.a,{padding:{y:1},textAlign:l.l.Center},r.createElement("span",{title:d},""+o))},S=function(e){return r.createElement(p.a,{padding:{y:.5,x:1}},r.createElement(u.a,{type:u.e.Span,color:m.c.Alt2},e.content))},y=function(){return r.createElement(p.a,{textAlign:l.l.Center,padding:{y:.5}},Object(a.d)("New Whispers","whispers"))};function E(e){var t={};return e.forEach((function(e){e&&null!==e.from&&e.emoteID&&(t[e.from]={startIndex:e.from,id:e.emoteID})})),t}},uu1w:function(e,t,n){"use strict";var i;n.d(t,"a",(function(){return i})),function(e){e.Command="command",e.Emote="emote",e.Mention="mention",e.Hashtag="hashtag",e.None="none"}(i||(i={}))},vGFN:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"j",(function(){return k})),n.d(t,"h",(function(){return b})),n.d(t,"g",(function(){return S})),n.d(t,"l",(function(){return y})),n.d(t,"o",(function(){return E})),n.d(t,"n",(function(){return _})),n.d(t,"k",(function(){return C})),n.d(t,"m",(function(){return N})),n.d(t,"i",(function(){return D})),n.d(t,"e",(function(){return w})),n.d(t,"d",(function(){return O})),n.d(t,"b",(function(){return I})),n.d(t,"f",(function(){return T})),n.d(t,"c",(function(){return F})),n.d(t,"q",(function(){return P})),n.d(t,"p",(function(){return U}));var i,r,a,o,s,c,d=n("mrSG"),l=n("/7QA"),u=n("2xye"),m=n("IZXT"),p=n("mBWp");function h(e){l.p.tracking.track(u.SpadeEventType.WhisperThreadMod,{conversation_id:e.threadID,action:e.action})}function f(e){return Object(d.__awaiter)(this,void 0,void 0,(function(){var t;return Object(d.__generator)(this,(function(n){switch(n.label){case 0:return[4,j()];case 1:return t=n.sent(),l.p.tracking.track(u.SpadeEventType.WhisperIgnoreUser,{ui_context:e.context,from_login:t&&t.login,ignored_login:e.targetUserLogin,reason:e.reason||i.Other,source:e.source}),[2]}}))}))}function v(e,t){return Object(d.__awaiter)(this,void 0,void 0,(function(){var n;return Object(d.__generator)(this,(function(i){switch(i.label){case 0:return[4,j()];case 1:return n=i.sent(),l.p.tracking.track(u.SpadeEventType.WhisperThreadMod,{conversation_id:e,action:t,login:n&&n.login}),[2]}}))}))}function g(e){l.p.tracking.track(u.SpadeEventType.WhisperAllThreadsMod,{action:e})}function k(){g(r.MarkAllRead)}function b(){g(r.EnableDoNotDisturb)}function S(){g(r.DisableDoNotDisturb)}function y(e,t){f({context:t,targetUserLogin:e,reason:i.Spam,source:"conversations_button"})}function E(e){v(e,s.MarkNotSpam)}function _(e){v(e,s.Archive)}function C(e){h({threadID:e,action:a.Mute})}function N(e){h({threadID:e,action:a.Unmute})}function D(e){h({threadID:e,action:a.Expand})}function w(e){h({threadID:e,action:a.Collapse})}function O(e){h({threadID:e,action:a.Close})}function I(e){h({threadID:e,action:a.Archive})}function T(e){l.p.tracking.track(u.SpadeEventType.WhisperThreadCreate,{conversation_id:e.threadID,target_login:e.targetUserlogin,source:"search_target_result",search_result_rank:e.searchResultRank})}function F(e){l.p.tracking.track(u.SpadeEventType.WhisperSearchClick,{query:e.searchQuery,source:"conversation_list",rank:e.searchResultRank,is_conversation:e.isConversation})}function j(){var e=this;return new Promise((function(t){setTimeout((function(){return Object(d.__awaiter)(e,void 0,void 0,(function(){var e,n,i;return Object(d.__generator)(this,(function(r){switch(r.label){case 0:e=null,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,l.p.apollo.client.query({query:p})];case 2:return e=r.sent(),[3,4];case 3:return n=r.sent(),Object(m.d)()?l.k.warn("Failed to make query for current user info in WhisperSent reporting"):l.k.errorAndReport(n,"Failed to make query for current user info in WhisperSent reporting"),[3,4];case 4:return i=e&&e.data&&e.data.currentUser,t(i),[2]}}))}))}))}))}function P(e){return Object(d.__awaiter)(this,void 0,void 0,(function(){var t;return Object(d.__generator)(this,(function(n){switch(n.label){case 0:return[4,j()];case 1:return t=n.sent(),l.p.tracking.track(u.SpadeEventType.WhisperSent,{to:e.targetUserLogin,from:t&&t.login,player:"web",is_turbo:t&&t.hasTurbo,conversation_id:e.threadID,availability:t&&t.availability,room_type:e.inChannelChat?c.Channel:c.Conversation}),[2]}}))}))}function U(e){return Object(d.__awaiter)(this,void 0,void 0,(function(){var t;return Object(d.__generator)(this,(function(n){switch(n.label){case 0:return[4,j()];case 1:return t=n.sent(),l.p.tracking.track(u.SpadeEventType.WhisperReceived,{to:t&&t.login,from:e.targetUserLogin,player:"web",is_turbo:t&&t.hasTurbo,conversation_id:e.threadID}),[2]}}))}))}!function(e){e.Harassment="Harassment",e.Spam="Spam",e.Other="Other"}(i||(i={})),function(e){e.MarkAllRead="mark_all_read",e.EnableDoNotDisturb="do_not_disturb_on",e.DisableDoNotDisturb="do_not_disturb_off"}(r||(r={})),function(e){e.Mute="mute",e.Unmute="unmute",e.Expand="maximize",e.Collapse="minimize",e.Close="close",e.Archive="archive",e.Open="open"}(a||(a={})),function(e){e.Dock="dock",e.SpamPropmt="dock_spam_cta"}(o||(o={})),function(e){e.Archive="archive",e.MarkNotSpam="mark_not_spam"}(s||(s={})),function(e){e.Channel="channel",e.Conversation="conversation"}(c||(c={}))},"x0+1":function(e,t,n){"use strict";var i=n("mrSG"),r=n("q1tI"),a=n("/7QA"),o=n("Jsra"),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={alwaysShowMessage:!1},t.renderBody=function(){return t.state.alwaysShowMessage?t.props.messageBody:r.createElement("span",{key:"deleted",className:"chat-line__message--deleted"},r.createElement(o.a,{linkTo:"",onClick:t.alwaysShowMessage},"<"+Object(a.d)("click to show","MessageDeletedLine")+">"))},t.alwaysShowMessage=function(e){e&&e.preventDefault(),t.setState({alwaysShowMessage:!0})},t}return Object(i.__extends)(t,e),t.prototype.render=function(){var e=this.props,t=e.moderatorLogin,n=e.targetIsCurrentUser,i=this.props.targetLogin;return n?Object(a.d)("A moderator deleted your message: {body}",{body:this.renderBody()},"MessageDeletedLine"):t?Object(a.d)("{moderatorLogin} deleted {targetLogin}'s message: {body}",{moderatorLogin:t,targetLogin:i,body:this.renderBody()},"MessageDeletedLine"):Object(a.d)("A moderator deleted {targetLogin}'s message: {body}",{targetLogin:i,body:this.renderBody()},"MessageDeletedLine")},t}(r.Component);n.d(t,"a",(function(){return s}))},xJpr:function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"d",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"f",(function(){return c})),n.d(t,"a",(function(){return d}));var i=n("0Log");function r(e){return e.type===i.PubsubMessageType.WhisperSent}function a(e){return e.type===i.PubsubMessageType.WhisperReceived}function o(e){return e.type===i.PubsubMessageType.WhisperDeleted}function s(e){return e.type===i.PubsubMessageType.WhisperEdited}function c(e){return e.type===i.PubsubMessageType.WhisperThreadUpdate}function d(e){return e.type===i.PubsubMessageType.WhisperAllThreadsUpdate}},xXlL:function(e,t,n){"use strict";function i(e){return{id:""+e.id,start:e.start,end:e.end}}function r(e){return{__typename:"WhisperMessageEdge",cursor:""+e.data_object.id,node:{__typename:"WhisperMessage",id:e.data_object.message_id,nonce:e.data_object.nonce,sentAt:new Date(1e3*e.data_object.sent_ts).toISOString(),editedAt:null,deletedAt:null,content:{__typename:"MessageBody",content:e.data_object.body,emotes:e.data_object.tags.emotes.map((function(e){return o(i(e))}))},from:{__typename:"User",id:""+e.data_object.from_id}}}}function a(e){return e.map((function(e){return o(i(e))}))}function o(e){return{from:e.start,to:e.end,emoteID:e.id,id:e.id+";"+e.start+";"+e.end,setID:"0",__typename:"EmbeddedEmote"}}n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o}))},yJn7:function(e,t){},zOU0:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("mrSG"),r=function(e){for(var t={},n=0,r=e;n<r.length;n++){var o=r[n],s=a(o);o.id&&s&&(t[o.id]=Object(i.__assign)({},s))}return t},a=function(e){return e.messages?{id:e.id,lastMessage:e.messages.edges.map((function(e){return e.node})).find((function(e){return!e.deletedAt}))||null,messageHistory:e.messages.edges.map((function(e){return e.node})).slice(0,-1),unreadMessagesCount:e.unreadMessagesCount,participants:e.participants.map((function(e){return e?Object(i.__assign)(Object(i.__assign)({},e),{displayBadges:[],self:null}):null})),spamInfo:e.spamInfo,muted:e.isMuted,archived:e.isArchived}:null}},zdrs:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UnlockChosenSubscriberEmote"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UnlockChosenSubscriberEmoteInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"unlockChosenSubscriberEmote"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"balance"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"error"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"code"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:154}};n.loc.source={body:"mutation UnlockChosenSubscriberEmote($input: UnlockChosenSubscriberEmoteInput!) {\nunlockChosenSubscriberEmote (input: $input) {\nbalance\nerror {\ncode\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function r(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.UnlockChosenSubscriberEmote=function(e,t){var n={kind:e.kind,definitions:[r(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var a=i[t]||new Set,o=new Set,s=new Set;for(a.forEach((function(e){s.add(e)}));s.size>0;){var c=s;s=new Set,c.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=r(e,t);i&&n.definitions.push(i)})),n}(n,"UnlockChosenSubscriberEmote")},zixI:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UnblockUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UnblockUserInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"unblockUser"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"targetUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:100}};n.loc.source={body:"mutation UnblockUser($input: UnblockUserInput!) {\nunblockUser(input: $input) {\ntargetUser {\nid\n}\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function r(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.UnblockUser=function(e,t){var n={kind:e.kind,definitions:[r(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var a=i[t]||new Set,o=new Set,s=new Set;for(a.forEach((function(e){s.add(e)}));s.size>0;){var c=s;s=new Set,c.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){s.add(e)})))}))}return o.forEach((function(t){var i=r(e,t);i&&n.definitions.push(i)})),n}(n,"UnblockUser")}}]);