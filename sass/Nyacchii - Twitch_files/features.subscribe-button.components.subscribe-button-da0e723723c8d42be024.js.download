(window.webpackJsonp=window.webpackJsonp||[]).push([[103,104],{"0WFu":function(e,n,i){"use strict";i.d(n,"c",(function(){return d})),i.d(n,"b",(function(){return u})),i.d(n,"a",(function(){return t})),i.d(n,"d",(function(){return c}));var t,a,o=i("/7QA"),r=i("3Bft"),s=i("kRBY");function d(e){return[r.a.Prime,r.a.Custom].includes(e)?null:parseInt(e,10)/1e3}function u(e){var n=e instanceof Date?e:new Date(e);return Math.round((n.getTime()-Date.now())/864e5)}function c(e){var n=o.b.get(e,a.Off);return n===a.On||!(n!==a.Staff||!Object(s.g)(o.p.store.getState()))}!function(e){e.Prime2Paid="prime_2_paid"}(t||(t={})),function(e){e.Off="off",e.On="on",e.Staff="staff"}(a||(a={}))},"2+sX":function(e,n,i){"use strict";var t,a=i("mrSG"),o=i("q1tI"),r=i("/7QA"),s=i("hnjF"),d=i("ygYM"),u=function(e){function n(n){var i=e.call(this,n)||this;return i.state={isError:!1,options:null,balloonID:""},i.logger=r.p.logger.withCategory("balloon-layer"),i.historyUnlisten=null,i.handleHistoryChange=function(){i.hideBalloon()},t=i,i}return Object(a.__extends)(n,e),n.prototype.componentDidMount=function(){this.historyUnlisten=r.p.history.listen(this.handleHistoryChange)},n.prototype.componentDidCatch=function(e,n){var i=this;this.setState({isError:!0},(function(){r.p.stats.recordComponentError("BalloonLayer"),i.logger.errorAndReport(e,"A unhandled exception occurred in the component hierarchy",{info:n})}))},n.prototype.componentDidUpdate=function(e,n){var i=n.options,t=i&&i.onBalloonUpdate,a=this.state.options,o=a&&a.onBalloonUpdate;i!==a&&(t&&t(this.state.balloonID),o&&o!==t&&o(this.state.balloonID))},n.prototype.componentWillUnmount=function(){this.historyUnlisten&&this.historyUnlisten()},n.prototype.render=function(){if(this.state.isError)return null;var e=null;if(this.state.options){var n={left:this.state.options.from.x,top:this.state.options.from.y};e=o.createElement(s.g,{className:"balloon-layer",position:s.j.Fixed,zIndex:s.o.Above},o.createElement("div",{style:n},o.createElement(d.a,{direction:this.state.options.direction?this.state.options.direction:d.b.Right,size:this.state.options.size||d.c.Large,show:!0,tailOffset:this.state.options.tailOffset},this.state.options.content)))}return e},n.prototype.showBalloon=function(e,n){this.setState({options:e,balloonID:n})},n.prototype.hideBalloon=function(){this.setState({options:null,balloonID:""})},n}(o.Component);function c(e,n){if(t&&e.ref){var i=function(e,n){var i=Object(a.__assign)({},e),t=0;e.y+n+20>window.innerHeight&&(i.y=window.innerHeight-n-20,t=e.y-i.y);return{coords:i,offset:t}}(function(e,n){var i=n.getBoundingClientRect();switch(e){case d.b.Bottom:case d.b.BottomLeft:return{x:i.left,y:i.bottom};case d.b.BottomCenter:return{x:i.left+i.width/2,y:i.bottom};case d.b.BottomRight:return{x:i.right,y:i.bottom};case d.b.Left:case d.b.Top:case d.b.TopLeft:return{x:i.left,y:i.top};case d.b.LeftCenter:return{x:i.left,y:i.top+i.height/2};case d.b.TopCenter:return{x:i.left+i.width/2,y:i.top};case d.b.TopRight:case d.b.Right:return{x:i.right,y:i.top};case d.b.RightCenter:return{x:i.right,y:i.top+i.height/2};default:return{x:i.left,y:i.bottom}}}(e.direction,e.ref),e.contentHeight);t.showBalloon({content:e.content,direction:e.direction,size:e.size,from:{x:i.coords.x,y:i.coords.y},tailOffset:i.offset,timeout:e.timeout,onBalloonUpdate:e.onBalloonUpdate},n)}}function l(){t&&t.hideBalloon()}var m=i("4VQm"),p=i("2Ygb"),f=i("f00E"),v=400;function h(){return function(e){var n=function(n){function i(){var e=null!==n&&n.apply(this,arguments)||this;return e.balloonID=Object(f.b)(),e.scrollListenerRegistered=!1,e.hoveringBalloon=!1,e.currentBalloonID="",e.show=function(n){e.clearTimeoutAndRun((function(){n.closeOnScroll?e.addScrollListener():e.scrollListenerRegistered&&e.removeScrollListener(),e.autoclose=n.autoclose,c({direction:n.direction,ref:n.ref,content:e.getBalloonContent(n.content),contentHeight:n.contentHeight,autoclose:n.autoclose,size:n.size,onBalloonUpdate:e.handleBalloonUpdate},e.balloonID)}),n.timeout)},e.hide=function(n){e.clearTimeoutAndRun((function(){(!e.hoveringBalloon||n&&n.force)&&(e.removeScrollListener(),e.balloonID===e.currentBalloonID&&l())}),n&&n.timeout)},e.clearTimeoutAndRun=function(n,i){void 0===i&&(i=0),e.displayTimeout&&(clearTimeout(e.displayTimeout),e.displayTimeout=0),e.displayTimeout=setTimeout((function(){n(),e.displayTimeout=0}),i)},e.setRef=function(n){e.balloonRef!==n&&(e.removeMouseoverListeners(),e.balloonRef=n,e.addMouseoverListeners(n))},e.addMouseoverListeners=function(n){n&&(n.addEventListener("mouseenter",e.handleMouseEnter,!0),n.addEventListener("mouseleave",e.handleMouseLeave))},e.removeMouseoverListeners=function(){e.balloonRef&&(e.balloonRef.removeEventListener("mouseenter",e.handleMouseEnter,!0),e.balloonRef.removeEventListener("mouseleave",e.handleMouseLeave))},e.handleMouseEnter=function(){e.hoveringBalloon=!0},e.handleMouseLeave=function(){e.hoveringBalloon=!1,e.displayTimeout||e.hide({timeout:v})},e.handleBalloonUpdate=function(n){e.balloonID!==n&&(e.removeScrollListener(),e.hoveringBalloon=!1,e.removeMouseoverListeners()),e.currentBalloonID=n},e}return Object(a.__extends)(i,n),i.prototype.componentWillUnmount=function(){this.removeScrollListener()},i.prototype.render=function(){var n={balloonLayer:{show:this.show,hide:this.hide}};return o.createElement(e,Object(a.__assign)({},this.props,n))},i.prototype.checkVisible=function(e,n){n&&n.type!==m.a.Resize&&this.scrollListenerRegistered&&this.hide()},i.prototype.getBalloonContent=function(e){return o.createElement("div",{ref:this.autoclose&&this.setRef||void 0},e)},i.prototype.addScrollListener=function(){this.unregister=this.props.registerReceiver(this),this.scrollListenerRegistered=!0},i.prototype.removeScrollListener=function(){this.unregister&&(this.unregister(),this.scrollListenerRegistered=!1)},i.displayName=Object(p.a)(i.name,e),i}(o.Component);return Object(m.d)((function(e){return{registerReceiver:e.registerReceiver}}))(n)}}i.d(n,"a",(function(){return u})),i.d(n,"d",(function(){return c})),i.d(n,"c",(function(){return l})),i.d(n,"e",(function(){return h})),i.d(n,"b",(function(){return v}))},"35qb":function(e,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"subscriptionProductPriceInfo"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PriceInfo"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"currency"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"exponent"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"price"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isTaxInclusive"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tax"},arguments:[],directives:[]}]}}],loc:{start:0,end:118}};i.loc.source={body:"fragment subscriptionProductPriceInfo on PriceInfo {\ncurrency\nexponent\ntotal\ndescription\nprice\nisTaxInclusive\nid\ntax\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=i},"3Bft":function(e,n,i){"use strict";i.d(n,"a",(function(){return t}));var t={Prime:"prime",Tier1:"1000",Tier2:"2000",Tier3:"3000",Custom:"Custom"}},"4iux":function(e,n,i){"use strict";var t,a=i("mrSG"),o=i("TSYQ"),r=i("q1tI"),s=i("eJ65"),d=i("N0BP"),u=i("YhA7"),c=i("Ws8v"),l=i("X2PJ"),m=i("hnjF"),p=i("sUnt"),f=i("wp5a"),v=i("+80q"),h=i("7d/q"),b=i("C7sF"),g=i("ygYM"),k=i("uKd/"),S=i("Z2sP"),y=i("7uM4");i("AolX");!function(e){e.SVGIcon="callout__icon-svg",e.CloseButton="callout__close-button",e.HoverContainer="callout__hover-container"}(t||(t={}));var N=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.state={isHovered:!1},n.handleFocus=function(){n.setState({isHovered:!0})},n.handleBlur=function(){n.setState({isHovered:!1})},n}return Object(a.__extends)(n,e),n.prototype.render=function(){var e=this.props,n=o("callout__icon",{"callout__icon--overlay":e.overlay&&!e.hideIconBackground});return r.createElement(c.a,Object(a.__assign)({},Object(d.a)(e),{border:!e.overlay,background:e.overlay?l.a.Accent:l.a.Base,borderRadius:l.b.Medium,color:e.overlay?l.c.Overlay:l.c.Base,elevation:4,position:m.j.Relative,padding:1}),r.createElement("div",{onMouseEnter:this.handleFocus,onMouseLeave:this.handleBlur,onFocus:this.handleFocus,onBlur:this.handleBlur,"data-test-selector":t.HoverContainer},r.createElement(p.a,{display:m.d.Flex,alignItems:m.b.Start},e.icon&&r.createElement(c.a,{className:n,margin:{right:1},padding:e.hideIconBackground?void 0:.5,display:m.d.Flex,flexGrow:0,flexShrink:0,borderRadius:l.b.Rounded,alignItems:m.b.Center,justifyContent:m.h.Center},this.renderIcon()),r.createElement(p.a,{display:m.d.Flex,alignItems:m.b.Center,className:"callout__header-segment",padding:{right:.5},flexGrow:1},r.createElement(p.a,null,e.pill&&r.createElement(p.a,{display:m.d.InlineBlock,margin:{right:.5}},r.createElement(f.a,Object(a.__assign)({},e.pill))),r.createElement(v.a,{bold:!0,type:v.e.Span},e.message.title),e.message.description&&e.inlineDescription&&r.createElement(v.a,{type:v.e.Span},"Â ",e.message.description))),r.createElement(p.a,{display:m.d.Flex,alignItems:m.b.Center,className:"callout__header-segment"},!!e.actions&&e.inlineActions&&this.renderActions(),e.contextMenu&&r.createElement(c.a,{color:l.c.Base},r.createElement(s.a,null,r.createElement(h.a,{icon:b.a.More,overlay:e.overlay,ariaLabel:"more options"}),r.createElement(g.a,{direction:g.b.TopRight,size:g.c.Small,tailOffset:7},e.contextMenu))),e.closeButton&&!e.contextMenu&&r.createElement(p.a,{padding:{left:.5},"data-test-selector":t.CloseButton},r.createElement(k.a,{ariaLabel:e.closeButton.ariaLabel,onClick:e.closeButton.onClick,size:h.b.Small,overlay:e.overlay})))),e.message.description&&!e.inlineDescription&&r.createElement(p.a,{margin:{top:.5}},r.createElement(v.a,null,e.message.description)),!!e.actions&&!e.inlineActions&&r.createElement(p.a,{margin:{top:.5}},this.renderActions()),e.progressBar&&r.createElement(c.a,{margin:{top:1}},r.createElement(S.a,{animationDirection:S.b.Down,size:S.c.ExtraSmall,animationDuration:e.progressBar.animationDuration,onAnimationEnd:e.progressBar.onAnimationEnd,paused:this.state.isHovered,overlay:e.overlay,mask:!0}))))},n.prototype.renderIcon=function(){return this.props.icon.asset?r.createElement(y.a,Object(a.__assign)({"data-test-selector":t.SVGIcon},this.props.icon)):this.props.icon},n.prototype.renderActions=function(){return this.props.actions.primaryButton?r.createElement(u.a,Object(a.__assign)({},this.props.actions)):this.props.actions},n}(r.Component);i.d(n,"a",(function(){return N}))},AolX:function(e,n,i){},DQ0a:function(e,n,i){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"SubModal"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"50"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"bannerImageURL"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"broadcastBadges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"badge"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"subscriptionProducts"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"subscriptionProduct"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"canPrimeSubscribe"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"primeSubCreditBenefit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"renewalDate"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"subscriptionGiftCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subscriptionBenefit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"subBenefit"},directives:[]},{kind:"Field",name:{kind:"Name",value:"isExtended"},arguments:[],directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"cumulativeTenure"},name:{kind:"Name",value:"subscriptionTenure"},arguments:[{kind:"Argument",name:{kind:"Name",value:"tenureMethod"},value:{kind:"EnumValue",value:"CUMULATIVE"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"tenure"},directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"streakTenure"},name:{kind:"Name",value:"subscriptionTenure"},arguments:[{kind:"Argument",name:{kind:"Name",value:"tenureMethod"},value:{kind:"EnumValue",value:"STREAK"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"tenure"},directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"badges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"badge"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"requestInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"countryCode"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hasPrime"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subscriptionSettings"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isGiftCountHidden"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:884}};t.loc.source={body:'#import "twilight/features/subscribe-button/models/subscription-product.gql"\n#import "twilight/features/sub-modal/fragments/sub-benefit.gql"\n#import "twilight/pages/subscriptions-management/models/cumulative-tenure-fragment.gql"\n#import "twilight/features/badges/models/badge-fragment.gql"\nquery SubModal($login: String!) {\nuser(login: $login) {\nid\ndisplayName\nprofileImageURL(width: 50)\nbannerImageURL\nbroadcastBadges {\n...badge\n}\nsubscriptionProducts {\n...subscriptionProduct\n}\nself {\ncanPrimeSubscribe\nprimeSubCreditBenefit {\nrenewalDate\n}\nsubscriptionGiftCount\nsubscriptionBenefit {\n...subBenefit\nisExtended\n}\ncumulativeTenure: subscriptionTenure(tenureMethod: CUMULATIVE) {\n...tenure\n}\nstreakTenure: subscriptionTenure(tenureMethod: STREAK) {\n...tenure\n}\n}\n}\nbadges {\n...badge\n}\nrequestInfo {\ncountryCode\n}\ncurrentUser {\nid\nhasPrime\nsubscriptionSettings {\nisGiftCountHidden\n}\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function o(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!a[n]&&(a[n]=!0,!0)}))}t.definitions=t.definitions.concat(o(i("IKRm").definitions)),t.definitions=t.definitions.concat(o(i("FaAX").definitions)),t.definitions=t.definitions.concat(o(i("HiyX").definitions)),t.definitions=t.definitions.concat(o(i("IKE4").definitions));var r={};function s(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}t.definitions.forEach((function(e){if(e.name){var n=new Set;!function e(n,i){if("FragmentSpread"===n.kind)i.add(n.name.value);else if("VariableDefinition"===n.kind){var t=n.type;"NamedType"===t.kind&&i.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach((function(n){e(n,i)})),n.variableDefinitions&&n.variableDefinitions.forEach((function(n){e(n,i)})),n.definitions&&n.definitions.forEach((function(n){e(n,i)}))}(e,n),r[e.name.value]=n}})),e.exports=t,e.exports.SubModal=function(e,n){var i={kind:e.kind,definitions:[s(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var t=r[n]||new Set,a=new Set,o=new Set;for(t.forEach((function(e){o.add(e)}));o.size>0;){var d=o;o=new Set,d.forEach((function(e){a.has(e)||(a.add(e),(r[e]||new Set).forEach((function(e){o.add(e)})))}))}return a.forEach((function(n){var t=s(e,n);t&&i.definitions.push(t)})),i}(t,"SubModal")},FaAX:function(e,n,i){var t={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"subBenefit"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"SubscriptionBenefit"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endsAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"platform"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"gift"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"gifter"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"isGift"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"isDNRd"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isExtended"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"pendingSubscription"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"pendingSubscription"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"purchasedWithPrime"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"renewsAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tier"},arguments:[],directives:[]}]}}],loc:{start:0,end:309}};t.loc.source={body:'#import "twilight/features/subscribe-button/components/subscribe-button/pending_subscription.gql"\nfragment subBenefit on SubscriptionBenefit {\nid\nendsAt\nplatform\ngift {\ngifter {\nid\nlogin\ndisplayName\n}\nisGift\n}\nisDNRd\nisExtended\npendingSubscription {\n...pendingSubscription\n}\npurchasedWithPrime\nrenewsAt\ntier\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};t.definitions=t.definitions.concat(i("QHJn").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!a[n]&&(a[n]=!0,!0)}))),e.exports=t},HiyX:function(e,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"tenure"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"SubscriptionTenure"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"daysRemaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"months"},arguments:[],directives:[]}]}}],loc:{start:0,end:62}};i.loc.source={body:"fragment tenure on SubscriptionTenure {\ndaysRemaining\nmonths\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=i},IKE4:function(e,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"badge"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Badge"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"version"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"image1x"},name:{kind:"Name",value:"imageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"EnumValue",value:"NORMAL"}}],directives:[]},{kind:"Field",alias:{kind:"Name",value:"image2x"},name:{kind:"Name",value:"imageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"EnumValue",value:"DOUBLE"}}],directives:[]},{kind:"Field",alias:{kind:"Name",value:"image4x"},name:{kind:"Name",value:"imageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"EnumValue",value:"QUADRUPLE"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"clickAction"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"clickURL"},arguments:[],directives:[]}]}}],loc:{start:0,end:170}};i.loc.source={body:"fragment badge on Badge {\nid\nsetID\nversion\ntitle\nimage1x: imageURL(size: NORMAL)\nimage2x: imageURL(size: DOUBLE)\nimage4x: imageURL(size: QUADRUPLE)\nclickAction\nclickURL\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=i},IKRm:function(e,n,i){var t={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"subscriptionProduct"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"SubscriptionProduct"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"price"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"priceInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"subscriptionProductPriceInfo"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emoteSetID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tier"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hasAdFree"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emotes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"subscriptionProductEmote"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"interval"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"unit"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"promotion"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"subscriptionProductPromotion"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"canGiftInChannel"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"promotion"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"subscriptionProductPromotion"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"paidUpgradePromotion"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"subscriptionProductPromotion"},directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"giftPromotion"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"subscriptionProductPromotion"},directives:[]}]}}]}}],loc:{start:0,end:697}};t.loc.source={body:'#import "twilight/features/subscribe-button/models/subscription-product-emote.gql"\n#import "twilight/features/subscribe-button/models/subscription-product-price-info.gql"\n#import "twilight/features/subscribe-button/models/subscription-product-promotion.gql"\nfragment subscriptionProduct on SubscriptionProduct {\nid\nprice\npriceInfo {\n...subscriptionProductPriceInfo\n}\nurl\nemoteSetID\ndisplayName\nname\ntier\nhasAdFree\nemotes {\n...subscriptionProductEmote\n}\ninterval {\nunit\n}\npromotion {\n...subscriptionProductPromotion\n}\nself {\ncanGiftInChannel\npromotion {\n...subscriptionProductPromotion\n}\npaidUpgradePromotion {\n...subscriptionProductPromotion\n}\n}\ngiftPromotion {\n...subscriptionProductPromotion\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function o(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!a[n]&&(a[n]=!0,!0)}))}t.definitions=t.definitions.concat(o(i("dq0Q").definitions)),t.definitions=t.definitions.concat(o(i("35qb").definitions)),t.definitions=t.definitions.concat(o(i("WJ1t").definitions)),e.exports=t},LDz7:function(e,n,i){"use strict";i.d(n,"a",(function(){return a}));var t=i("/7QA");function a(e,n){if(!n)return!1;var i=null;try{var a=t.b.get(e,"");if(i=JSON.parse(a)){var o=i[n.toLowerCase()],r=Date.now();if(o&&r>=o.start&&r<=o.end)return!0}return!1}catch(e){return!1}}},QHJn:function(e,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"pendingSubscription"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PendingSubscription"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"price"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"startsAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tier"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]}]}}],loc:{start:0,end:80}};i.loc.source={body:"fragment pendingSubscription on PendingSubscription {\nprice\nstartsAt\ntier\ntype\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=i},QjI3:function(e,n,i){"use strict";i.r(n);var t,a=i("mrSG"),o=i("q1tI"),r=i("/MKj"),s=i("fvjX"),d=i("/7QA"),u=i("ZS2+"),c=i("1/iK"),l=i("XDCx"),m=i("D7An"),p=i("kz7j"),f=i("kRBY"),v=i("w1PT"),h=i("8EUQ"),b=i("GnwI"),g=i("d0xR"),k=i("2+sX"),S=i("u5aL"),y=i("eJ65"),N=i("yR8l"),_=i("x7UT"),C=i("3Bft"),B=i("ht6z"),F=i("/aPz"),E=i("f00E"),L=i("KriR"),D=i("h3/L"),I=i("DQ0a"),T=Object(s.d)(Object(N.a)(I,{options:function(e){return{variables:{login:e.channelLogin}}}}),Object(N.a)(D,{name:"primeQuery",skip:function(e){return!e.primeLeadGen},options:function(e){return{variables:{countryCode:e.countryCode}}}}))((function(e){return o.createElement(o.Fragment,null,e.children)})),w=i("4iux"),P=i("Uh2Q"),O=i("RiD7"),M=i("uG/k"),U=i("7d/q"),A=i("dEDE"),R=i("sUnt"),j=i("hnjF"),x=(i("nO9i"),"megacommerce-2019-callout-dismissed");function G(e){return x+(e?"-"+e:"")}!function(e){e.Callout="megacommerce-callout"}(t||(t={}));var q=function(e){var n=e.userId,i=Object(o.useState)((function(){return d.m.get(G(n),!1)})),r=i[0],s=i[1];if(r||!Object(P.f)(P.a))return null;var u,c=Object(d.d)("Subscribe or Gift a sub to the community to unlock exclusive holiday emotes! Check the Bits card for more ways to unlock.","MegaCommerceCallout"),l={message:{title:Object(d.d)("Happy HAHAHAlidays!","MegaCommerceCallout"),description:c},icon:o.createElement(M.a,{src:"https://static-cdn.jtvnw.net/emoticons/v1/633181/3.0",sizes:[{size:"30px"}],alt:"snoWhal"}),closeButton:{ariaLabel:Object(d.d)("Close","MegaCommerceCallout"),type:U.c.Secondary,onClick:function(){d.m.set(G(n),!0),s(!0)}},actions:{primaryButton:{onClick:(u=n,void Object(O.p)({user_id:u||"",source:O.e.SubButtonCallout})),linkTo:Object(P.e)(P.a),targetBlank:!0,children:Object(d.d)("Learn more","MegaCommerceCallout"),type:A.d.Secondary}}};return o.createElement(R.a,{position:j.j.Absolute,zIndex:j.o.Above,padding:{top:.5},className:"megacommerce-callout","data-test-selector":t.Callout},o.createElement(w.a,Object(a.__assign)({},l)))},H=i("LDz7"),z=i("br9A"),W=i("ygYM"),V=i("C7sF"),Q=i("Ws8v"),K=i("X2PJ"),Y=i("4rCz"),X=i("0WFu"),J="Continue Sub",$="Continue Sub - Ends Today",Z=function(e){return"Continue Sub - "+e+" Days Remaining"},ee="Gift A Sub",ne="Resubscribe",ie="Subscribe",te="Subscribed",ae="Subscribed to <hosted channel>",oe="Subscribe to <hosted channel>";var re,se=i("z+dA"),de=u.a.wrap((function(){return Promise.all([i.e(0),i.e(101)]).then(i.bind(null,"oaL6"))}),"SubModalComponent");!function(e){e.SubButton="subscribe-button__dropdown",e.BalloonLayerButton="subscribe-button__balloon-layer-btn",e.DefaultButton="subscribe-button__default-btn",e.SubscribeBalloon="subscribe-button__subscribe-balloon"}(re||(re={}));var ue=u.a.wrap((function(){return Promise.all([i.e(0),i.e(102)]).then(i.bind(null,"f+qK"))}),"SubscribeBalloon"),ce=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.state={modalSessionId:""},n.modalLevel="top_page",n.getBalloonWrapperContent=function(){return n.balloonWrapperContent},n.handleSubMenuAction=function(e){new Set([z.a.ClickCheckout,z.a.BuyGiftSub,z.a.BuyMysteryGift,z.a.BuyCustomMysteryGift,z.a.BuyGiftToPaidUpgrade,z.a.BuyPaidUpgrade,z.a.BuyContinueSub,z.a.BuyPrimeToPaid]).has(e.action)&&n.checkAndDisplaySubscriptionCheckout();var i=n.props.data;if(i){var t=i.user,a=null,o=null;t&&(a=t.self),a&&a.cumulativeTenure&&(o=a.cumulativeTenure.months);var r=!(!a||!a.subscriptionBenefit),s=i.requestInfo&&Object(B.a)(i.requestInfo.countryCode);Object(z.c)({action:e.action||"",buttonCTA:n.buttonTrackingCTA,channelLogin:n.props.channelLogin||"",channelID:t&&t.id||"",checkoutButtonTier:e.checkoutButtonTier,cumulativeTenureMonths:o,hasSubCredit:a&&a.canPrimeSubscribe,hostChannelID:n.props.hostChannelID,hostChannelLogin:n.props.hostChannelLogin,isAnonymous:e.isAnonymous,isMenuOpen:e.action!==z.a.OpenSubMenu,isSingleMonth:e.isSingleMonth,mysteryGiftCount:e.mysteryGiftCount,sub_location:n.props.subLocation,modal:!r,modalLevel:r?"":n.modalLevel.slice(),modalSessionId:e.modalSessionId||n.state.modalSessionId,showPrimeContent:s,giftRecipient:e.giftRecipient||null}),!e.modalLevel||e.action!==z.a.ClickMoreSubOptions&&e.action!==z.a.ClickBack||(n.modalLevel=e.modalLevel)}},n.userHasPrime=function(){if(!n.props.data)return!1;var e=n.props.data.currentUser;return!!e&&e.hasPrime},n.userGetsPrimeLeadGen=function(){if(!n.props.data)return!1;var e=n.props.data.requestInfo,i=Object(B.a)(e.countryCode);return n.props.primeLeadGenGroup&&i&&!n.userHasPrime()||!1},n.renderBalloonContentForBalloonLayer=function(){return o.createElement(S.a,{onClickOut:n.handleBalloonClickOut},o.createElement(R.a,{"data-a-target":"sub-balloon",refDelegate:n.setBalloonContentRefDelegate},n.balloonWrapperContent))},n.handleButtonClick=function(){if(n.props.data){var e=Object(E.c)();n.balloonContentRef||(n.props.useNewModal&&n.props.channelLogin?(n.props.showNewSubModal({channelLogin:n.props.channelLogin,countryCode:n.props.data.requestInfo.countryCode,extraSubProductNames:n.props.extraSubscriptionProducts,hostChannelID:n.props.hostChannelID,hostChannelLogin:n.props.hostChannelLogin,modalSessionId:e,primeLeadGen:n.userGetsPrimeLeadGen(),onClose:n.handleModalClose,subLocation:"channel_page_modal"}),n.handleSubMenuAction({action:z.a.OpenSubMenu,modalSessionId:e})):n.props.useModal&&n.props.channelLogin?(n.props.showSubscriptionModal({channelLogin:n.props.channelLogin,onClose:n.handleModalClose,subLocation:"channel_page_modal"}),n.handleSubMenuAction({action:z.a.OpenSubMenu,modalSessionId:e})):(n.props.balloonLayer.show({direction:n.getBalloonDirection(),ref:n.containerRef,content:n.renderBalloonContentForBalloonLayer(),contentHeight:0,closeOnScroll:!0}),n.handleSubMenuAction({action:z.a.OpenSubMenu,modalSessionId:e})),n.setState({modalSessionId:e}))}},n.handleBalloonClickOut=function(){n.handleSubMenuAction({action:z.a.CloseSubMenu,modalSessionId:n.state.modalSessionId}),n.props.balloonLayer.hide({force:!0})},n.handleModalClose=function(){n.handleSubMenuAction({action:z.a.CloseSubMenu,modalSessionId:n.state.modalSessionId})},n.setBalloonWrapperContent=function(e){n.balloonWrapperContent=e},n.handleMenuToggle=function(e){if(e)n.handleSubMenuAction({action:z.a.CloseSubMenu,modalSessionId:n.state.modalSessionId});else{var i=Object(E.c)();n.setState({modalSessionId:i}),n.handleSubMenuAction({action:z.a.OpenSubMenu,modalSessionId:i})}},n.getBalloonDirection=function(){var e=n.props.balloonDirection||W.b.BottomRight;return n.props.hostChannelID&&(e=W.b.TopLeft),e},n.setBalloonContentRefDelegate=function(e){n.balloonContentRef=e},n}return Object(a.__extends)(n,e),n.prototype.componentDidMount=function(){this.trackLatencyIfComponentFinished(this.props),this.checkAndDisplaySubscriptionCheckout()},n.prototype.componentDidUpdate=function(e){this.props.channelLogin&&!this.isUserDataReady(this.props)||!this.props.updateContainerWidth||this.props.updateContainerWidth(),this.trackLatencyIfComponentFinished(this.props),!this.isUserDataReady(e)&&this.isUserDataReady(this.props)&&this.checkAndDisplaySubscriptionCheckout(),this.isUserDataReady(this.props)&&this.props.pubsub.messages.subscriptionInfo!==e.pubsub.messages.subscriptionInfo&&this.props.data.refetch()},n.prototype.componentWillUnmount=function(){h.a.clearSubscriptionCheckoutKeys()},n.prototype.render=function(){var e=this.props,n=e.data,i=e.sessionUser;if(!n||n.loading||n.error)return null;var t=n.requestInfo,a=n.user;if(!a)return null;var r=a.self,s=a.subscriptionProducts;if(!s)return null;var d=s.filter((function(e){return e}));if(0===d.length)return null;var u=1===d.length;d.some((function(e){return!e.emoteSetID}))&&(u=!0);var c=null,l=!1,p=!1,f=!1,v=!1,h=!1,b=!1,g=null,k=!1;if(r){if(r.cumulativeTenure)f=r.cumulativeTenure.months>0;if(r.subscriptionBenefit){var S=r.subscriptionBenefit;c=S.endsAt,l=S.isDNRd,p=!!S.pendingSubscription,v=S.gift&&S.gift.isGift||!1,h=!0,b=S.purchasedWithPrime,g=S.purchasedWithPrime?C.a.Prime:S.tier,this.modalLevel=""}else if(Object(H.a)("untouch_cam_mig",this.props.channelLogin))return null}i&&i.roles&&(k=i.roles.isStaff);var N=function(e){var n=Y.q.experiments.getAndTrackAssignment(m.c.SubsReanimator),i=Object(X.d)(X.a.Prime2Paid),t=void 0;if(e.purchasedWithPrime&&i&&(t=Y.q.experiments.getAndTrackAssignment(m.c.PrimeToPaid)),e.isSubscribed){if(e.isNonStandardSub)return{text:Object(Y.d)("Subscribed","SubscribeButton"),cta:te};if(e.hostedDisplayName)return{text:Object(Y.d)("Subscribed to {username}",{username:e.hostedDisplayName},"SubscribeButton"),cta:ae};if(("variant_a"===t||"control"!==n&&e.benefitIsDNRd||e.isGift)&&e.benefitEndsAt&&!e.hasPendingSub){var a=Object(X.b)(e.benefitEndsAt);if(a<=15&&a>7||a>15&&Object(H.a)("untouch_cam_mig",e.channelLogin))return{text:Object(Y.d)("Continue Sub","SubscribeButton"),cta:J};if(a<=7&&0!==a)return{text:Object(Y.d)("{daysRemaining, plural, one {Continue Sub - {daysRemaining} Day Remaining} other {Continue Sub - {daysRemaining} Days Remaining}}",{daysRemaining:a},"SubscribeButton"),cta:Z(a)};if(0===a)return{text:Object(Y.d)("Continue Sub - Ends Today","SubscribeButton"),cta:$}}return{text:Object(Y.d)("Gift a Sub","SubscribeButton"),cta:ee}}return e.hostedDisplayName?{text:Object(Y.d)("Subscribe to {username}",{username:e.hostedDisplayName},"SubscribeButton"),cta:oe}:e.hasTenure?{text:Object(Y.d)("Resubscribe","SubscribeButton"),cta:ne}:{text:Object(Y.d)("Subscribe","SubscribeButton"),cta:ie}}({benefitEndsAt:c,benefitIsDNRd:l,hasPendingSub:p,hasTenure:f,channelLogin:this.props.channelLogin,hostedDisplayName:this.props.hostChannelID?a.displayName||"":void 0,isGift:v,isNonStandardSub:u,isSubscribed:h,purchasedWithPrime:b,subscriptionProducts:d});this.buttonTrackingCTA=N.cta;var _=N.text;if(h&&u)return o.createElement(A.a,{disabled:!0,ariaLabel:_,icon:V.a.Star},_);var F=this.props.allowPromotionalCallout&&this.props.sessionUser&&o.createElement(q,{userId:this.props.sessionUser&&this.props.sessionUser.id}),E=o.createElement(A.a,{ariaLabel:_,"data-a-target":h?"subscribed-button":"subscribe-button","data-test-selector":re.SubButton,dropdown:!this.props.hideDropdownArrow,fullWidth:!0,icon:this.getButtonIcon(h,g),onClick:this.handleButtonClick,type:this.getButtonType(h),overlay:this.props.overlayButton},_);if(this.props.useModal)return o.createElement(R.a,{position:j.j.Relative},E,F);if(this.props.useNewModal)return o.createElement(T,{channelLogin:this.props.channelLogin,countryCode:n.requestInfo.countryCode,primeLeadGen:this.userGetsPrimeLeadGen()},o.createElement(R.a,{position:j.j.Relative},E,F));if(this.props.useNewBalloon)this.setBalloonWrapperContent(o.createElement(Q.a,{className:"sub-modal__container",background:K.a.Base,borderRadius:K.b.Medium,overflow:j.i.Hidden},o.createElement(de,{channelLogin:this.props.channelLogin||"",hostChannelID:this.props.hostChannelID,hostChannelLogin:this.props.hostChannelLogin,modalSessionId:this.state.modalSessionId,sessionUser:this.props.sessionUser,showLoginModal:this.props.showLoginModal,showSubscriptionCheckout:this.props.showSubscriptionCheckout,isThin:!0,subLocation:this.props.subLocation,subButtonCTA:this.buttonTrackingCTA})));else{var L=d[0];if(!L||!L.id)return null;this.setBalloonWrapperContent(o.createElement(ue,{authToken:this.props.authToken,channelLogin:this.props.channelLogin||"","data-test-selector":re.SubscribeBalloon,handleSubMenuAction:this.handleSubMenuAction,inPrimeRegion:!!t&&Object(B.a)(t.countryCode),isNonStandardSub:u,isStaff:k,isSubscribed:h,productId:L.id,subbedTier:g||C.a.Prime,userHasPrime:!1}))}return o.createElement(R.a,{position:j.j.Relative},o.createElement(y.a,{"data-test-selector":re.DefaultButton,onToggle:this.handleMenuToggle},E,o.createElement(W.a,{"data-a-target":"sub-balloon",direction:this.getBalloonDirection(),size:W.c.Large},this.balloonWrapperContent)),F)},n.prototype.getButtonType=function(e){A.d.Primary;return e&&void 0!==this.props.subscribedButtonType?this.props.subscribedButtonType:e?A.d.Success:this.props.unsubscribedButtonType||A.d.Primary},n.prototype.getButtonIcon=function(e,n){var i=void 0;return e?i=n===C.a.Prime?V.a.Crown:V.a.Star:this.props.forceIcon&&(i=V.a.StarHollow),i},n.prototype.isUserDataReady=function(e){return e.data&&e.data.user&&!e.data.loading&&!e.data.error},n.prototype.trackLatencyIfComponentFinished=function(e){e.data&&!e.data.loading&&(e.reportInteractive&&e.reportInteractive(),e.reportCustomLatency&&e.reportCustomLatency())},n.prototype.checkAndDisplaySubscriptionCheckout=function(){if(this.props.data){var e=d.n.get(h.a.SUB_CHECKOUT__PRODUCT_KEY,"");if(e){var n=this.props.data.user;if(n&&n.subscriptionProducts)n.subscriptionProducts.filter((function(e){return e})).map((function(e){return e.name})).includes(e)||this.props.extraSubscriptionProducts&&this.props.extraSubscriptionProducts.includes(e)?this.props.sessionUser?this.props.showSubscriptionCheckout({isAnonymous:d.n.get(h.a.SUB_CHECKOUT__GIFTING_ANONYMOUSLY,!1),isOneTimePurchase:d.n.get(h.a.SUB_CHECKOUT__IS_ONE_TIME_PURCHASE,!1),mysteryGiftCount:Number(d.n.get(h.a.SUB_CHECKOUT__MYSTERY_GIFT_COUNT,"")),productName:e,recipientLogin:d.n.get(h.a.SUB_CHECKOUT__RECIPIENT_KEY,""),trackingContext:{source:L.c.ChannelSubscribeButton}}):this.props.showLoginModal():h.a.clearSubscriptionCheckoutKeys()}}},n}(o.Component),le=Object(s.d)(Object(N.a)(se,{options:function(e){return{variables:{login:e.channelLogin}}},skip:function(e){return!e.channelLogin}}),Object(_.a)([{topic:function(e){return Object(F.U)(e.data&&e.data.currentUser&&e.data.currentUser.id||"")},mapMessageTypesToProps:{"*":"subscriptionInfo"},skip:function(e){return!(e.data&&!e.data.loading&&!e.data.error&&e.data.currentUser)}}]),Object(k.e)())(ce),me=u.a.wrap((function(){return Promise.all([i.e(0),i.e(100)]).then(i.bind(null,"hfwl"))}),"SubModal"),pe=function(e){function n(n){var i=e.call(this,n)||this;return i.loadedLatencyEvent=i.props.latencyTracking.registerCustomEvent({benchmark:500,group:p.a.Subscriptions,label:p.c.Loaded,start:p.d.Registration,key:p.b.SubscriptionButtonLoaded}),i.reportCustomLatencyTracking=function(){i.props.latencyTracking.reportCustomEvent(i.loadedLatencyEvent)},i.reportInteractive=function(){i.props.latencyTracking.reportInteractive()},i.modalExperimentAssignment=d.p.experiments.getAndTrackAssignment(m.c.SubModalRedesign)||"",i}return Object(a.__extends)(n,e),n.prototype.render=function(){var e="modal"===this.modalExperimentAssignment||"accordion"===this.modalExperimentAssignment||"prime_70_30"===this.modalExperimentAssignment||"prime_30_70"===this.modalExperimentAssignment||"dirty_modal"===this.modalExperimentAssignment,n="balloon"===this.modalExperimentAssignment,i="prime_70_30"===this.modalExperimentAssignment||"prime_30_70"===this.modalExperimentAssignment;return o.createElement(o.Fragment,null,o.createElement(le,{authToken:this.props.authToken,balloonDirection:this.props.balloonDirection,channelLogin:this.props.channelLogin,extraSubscriptionProducts:this.props.extraSubscriptionProducts,forceIcon:this.props.forceIcon,hideDropdownArrow:this.props.hideDropdownArrow,hostChannelID:this.props.hostChannelID,hostChannelLogin:this.props.hostChannelLogin,overlayButton:this.props.overlayButton,primeLeadGenGroup:i,reportCustomLatency:this.reportCustomLatencyTracking,reportInteractive:this.reportInteractive,sessionUser:this.props.sessionUser,showLoginModal:this.props.showLoginModal,showSubscriptionCheckout:this.props.showSubscriptionCheckout,showSubscriptionModal:this.props.showSubscriptionModal,showNewSubModal:this.props.showNewSubModal,subscribedButtonType:this.props.subscribedButtonType,unsubscribedButtonType:this.props.unsubscribedButtonType,updateContainerWidth:this.props.updateContainerWidth,useModal:this.props.useModal,useNewBalloon:n||void 0,useNewModal:e||void 0,subLocation:this.props.subLocation,allowPromotionalCallout:this.props.allowPromotionalCallout}),e&&o.createElement(me.Preload,null))},n=Object(a.__decorate)([Object(b.withLatencyTracking)("SubscribeButton")],n)}(o.Component);var fe=Object(r.b)((function(e){return{authToken:Object(f.a)(e),sessionUser:Object(f.e)(e)}}),(function(e){return Object(s.b)({showLoginModal:h.a.showLoginModalWithCheckoutDispatch(c.a.ChannelSubscriptionButton),showSubscriptionModal:function(e){var n=Object(a.__rest)(e,[]);return Object(l.e)(g.SubscribeModal,n)},showNewSubModal:function(e){var n=Object(a.__rest)(e,[]);return Object(l.e)(me,n)},showSubscriptionCheckout:v.a},e)}))(pe);i.d(n,"SubscribeButtonContainer",(function(){return pe})),i.d(n,"SubscribeButton",(function(){return fe})),i.d(n,"TestSelectors",(function(){return re})),i.d(n,"SubscribeButtonPresentation",(function(){return ce})),i.d(n,"SubscribeButtonComponent",(function(){return le}))},RiD7:function(e,n,i){"use strict";i.d(n,"n",(function(){return r})),i.d(n,"d",(function(){return d})),i.d(n,"a",(function(){return s})),i.d(n,"c",(function(){return f})),i.d(n,"i",(function(){return h})),i.d(n,"j",(function(){return b})),i.d(n,"k",(function(){return g})),i.d(n,"h",(function(){return u})),i.d(n,"l",(function(){return k})),i.d(n,"o",(function(){return S})),i.d(n,"b",(function(){return c})),i.d(n,"m",(function(){return y})),i.d(n,"g",(function(){return l})),i.d(n,"f",(function(){return m})),i.d(n,"e",(function(){return p})),i.d(n,"q",(function(){return N})),i.d(n,"r",(function(){return _})),i.d(n,"s",(function(){return C})),i.d(n,"p",(function(){return B}));var t=i("mrSG"),a=i("/7QA"),o=i("2xye");function r(e){var n={action_name:e.actionName,action_type:e.actionType||s.Click,tracking_id:e.trackingId,checkout_id:e.checkoutId,displayed_balance:e.displayedBalance,emote_level:e.emoteLevel,emote_type:e.emoteType,bits_location:e.location||d.ChatTooltip,bits_card_error:e.bitsCardError,channel_id:e.channelId,user_id:e.userId,gem_notification:e.gemNotification};a.o.track(o.SpadeEventType.BitsCardInteraction,n)}var s,d={ChatTooltip:"card",GetBitsButton:"get_bits_button",GetBitsButtonTopNav:"topnav",BitsLandingPage:"bits_landing_page"};!function(e){e.Click="click",e.Hover="hover"}(s||(s={}));var u,c,l,m,p,f={BuyMain:"buy_main",Buy100:"buy_100",Buy500:"buy_500",Buy1000:"buy_1000",Buy1500:"buy_1500",Buy2500:"buy_2500",Buy5000:"buy_5000",Buy10000:"buy_10000",Buy25000:"buy_25000",CloseCard:"menu_close",OpenCard:"menu_open",OpenCardViaCheering:"menu_open_from_cheer",PreviewEmote:"emote_preview",WatchAd:"watch_ad",WatchAnotherAd:"watch_another_ad",CheeringInRoom:"cheering_in_room",NewUserLearnMore:"new_user_learn_more",NewUserSkipTutorial:"new_user_skip_tutorial",NewUserCloseTutorial:"new_user_close_tutorial",NewUserFirstTimePurchaseDiscountClick:"new_user_first_time_purchase_discount_click",NewUserHelpRequested:"new_user_help_requested",SendInvalidCheerAttemptButtonDisabled:"send_invalid_cheer_button_disabled",UserViewingCheerError:"user_viewing_cheer_error",UserViewingCheerRoomsError:"user_viewing_cheer_rooms_error",LoadBitsLandingPage:"load_bits_landing_page"},v={100:f.Buy100,500:f.Buy500,1e3:f.Buy1000,1500:f.Buy1500,2500:f.Buy2500,5e3:f.Buy5000,1e4:f.Buy10000,25e3:f.Buy25000};function h(e){return e&&v[e]?v[e]:(a.k.errorAndReport(new Error('Buy Bits card contains improperly rendered offers, or offers unknown to Science. Tracking as "buy_100"'),'Buy Bits card contains improperly rendered offers, or offers unknown to Science. Tracking as "buy_100"'),f.Buy100)}function b(e){var n={channel:e.channel,channel_id:e.channelID,available:e.available,host:"twitch.tv"};a.o.track(o.SpadeEventType.BitsAdsAvailability,n)}function g(e){var n={distinct_id:a.p.session.deviceID,host:"twitch.tv",request_id:e.requestID,campaign_id:e.campaignID,adblock:e.adblock};a.o.track(o.SpadeEventType.BitsAdsImpression,n)}function k(e){var n=a.o.getLastPageview(),i={location:n&&n.location||"",ad_returned:null,campaign_id:e.campaignID,distinct_id:a.p.session.deviceID,host:"twitch.tv",request_id:e.requestID,request_method:e.requestMethod};a.o.track(o.SpadeEventType.BitsAdsRequest,i)}function S(e){var n={leaderboard_size:e.leaderboardSize,leaderboard_mode:e.leaderboardMode,user_present_in_leaderboard:e.userPresentInLeaderboard,user_id:e.userID,channel_id:e.channelID};a.o.track(o.SpadeEventType.LeaderboardExpandClick,n)}function y(e){var n={transaction_id:e.transactionId,user_id:e.userId,user_login:e.userLogin,channel_id:e.channelId,channel_login:e.channelLogin,action:e.action,badge_amount:e.badgeAmount};a.o.track(o.SpadeEventType.BitsBadgeTierNotification,n)}function N(e){return Object(t.__awaiter)(this,void 0,void 0,(function(){return Object(t.__generator)(this,(function(n){return a.o.track(o.SpadeEventType.MegaCheerChatNotificationImpression,{time:Date.now(),transaction_id:e.transaction_id,notification_type:e.notification_type,user_id:e.user_id,initiator_user_id:e.initiator_user_id,channel:e.channel,channel_id:e.channel_id,campaign_domain:e.domain}),[2]}))}))}function _(e){return Object(t.__awaiter)(this,void 0,void 0,(function(){return Object(t.__generator)(this,(function(n){return a.o.track(o.SpadeEventType.MegaCheerChatNotificationAction,{time:Date.now(),transaction_id:e.transaction_id,notification_type:e.notification_type,action:e.action,user_id:e.user_id,initiator_user_id:e.initiator_user_id,channel:e.channel,channel_id:e.channel_id,campaign_domain:e.domain}),[2]}))}))}function C(e){return Object(t.__awaiter)(this,void 0,void 0,(function(){return Object(t.__generator)(this,(function(n){return a.o.track(o.SpadeEventType.MegaCheerChatNotificationShare,{time:Date.now(),body:e.body,transaction_id:e.transaction_id,user_id:e.user_id,initiator_user_id:e.initiator_user_id,channel:e.channel,channel_id:e.channel_id,campaign_domain:e.domain}),[2]}))}))}function B(e){return Object(t.__awaiter)(this,void 0,void 0,(function(){return Object(t.__generator)(this,(function(n){return a.o.track(o.SpadeEventType.MegacheerLearnMoreInteraction,{time:Date.now(),source:e.source,user_id:e.user_id}),[2]}))}))}!function(e){e.ShowAdButton="show_ad_button"}(u||(u={})),function(e){e.AutoSkip="AUTO_SKIP",e.Impression="IMPRESSION"}(c||(c={})),function(e){e.CheerAgain="cheer_again",e.SubGiftAgain="gift_again",e.SubGift="gift",e.Thank="thank",e.Share="share"}(l||(l={})),function(e){e.Click="click",e.Dismiss="dismiss"}(m||(m={})),function(e){e.BitsCard="bits_card",e.SubManagement="sub_management",e.SubModalGifting="sub_modal_gifting",e.SubModalMain="sub_modal_main",e.SubButtonCallout="sub_button_callout"}(p||(p={}))},Uh2Q:function(e,n,i){"use strict";var t,a=i("NAv5"),o=i("/7QA"),r=i("3Bft"),s=i("HGFl"),d=i("mrSG"),u=i("q1tI"),c=i("/MKj"),l=i("/0dD"),m=i("XDQu"),p=i("5zXJ"),f=i("RiD7"),v=i("uG/k"),h=i("sUnt"),b=i("+80q"),g=i("X2PJ"),k=i("Jsra"),S=i("hnjF");i("m66z");!function(e){e.Container="lazy-carousel-container",e.Prev="lazy-carousel-prev-button",e.Next="lazy-carousel-next-button",e.NavDot="lazy-carousel-nav-dot",e.NavDotContainer="lazy-carousel-nav-dot-container",e.Animation="lazy-carousel-animation-container"}(t||(t={}));var y=[{src:p.h+"/mega-commerce/bits-card/1.png",emoteString:"emote1"},{src:p.h+"/mega-commerce/bits-card/2.png",emoteString:"emote2"},{src:p.h+"/mega-commerce/bits-card/3.png",emoteString:"emote3"},{src:p.h+"/mega-commerce/bits-card/4.png",emoteString:"emote4"},{src:p.h+"/mega-commerce/bits-card/5.png",emoteString:"emote5"},{src:p.h+"/mega-commerce/bits-card/6.png",emoteString:"emote6"},{src:p.h+"/mega-commerce/bits-card/7.png",emoteString:"emote7"}],N=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.state={currIndex:0},n.renderEmotes=y.map((function(e){return u.createElement(v.a,{key:e.emoteString,className:"seasonal-megacommerce-introduction__emote",src:e.src,srcSet:{"112w":e.src},sizes:[{size:"28px"}],alt:e.emoteString})})),n.learnMoreClick=function(){Object(f.p)({user_id:n.props.currentUserID||"",source:f.e.BitsCard})},n}return Object(d.__extends)(n,e),n.prototype.render=function(){var e=this,n="";return n=this.props.theme===l.a.Dark?"seasonal-megacommerce-introduction__dark":"seasonal-megacommerce-introduction__light",u.createElement(h.a,{className:n},u.createElement(h.a,{padding:{top:3}},u.createElement(b.a,{fontSize:g.d.Size5,bold:!0},Object(o.d)("Happy HAHAHAlidays!","MegaCommerceMegaCheerBitsIntroduction")),u.createElement(h.a,{padding:{x:1,top:.5}},u.createElement(b.a,null,Object(o.d)("Cheer at least 300 Bits, Subscribe, or Gift a sub to receive exclusive holiday emotes and gift emotes to your community. Collect them all by {date}!",{date:Object(o.c)(E(B),{day:"numeric",month:"numeric",year:"numeric"})},"MegaCommerceMegaCheerBitsIntroduction"))),u.createElement(h.a,{padding:{top:.5,bottom:1}},u.createElement(b.a,null,Object(o.d)("<x:link>Learn more</x:link>",{"x:link":function(n){return u.createElement(k.a,{targetBlank:!0,linkTo:D(B),onClick:e.learnMoreClick},n)}},"MegaCommerceMegaCheerBitsIntroduction")))),u.createElement(h.a,{display:S.d.Flex,justifyContent:S.h.Center,flexDirection:S.e.Row,padding:{bottom:1}},this.renderEmotes))},n}(u.Component);var _,C=Object(c.b)((function(e){return{theme:Object(m.a)(e),currentUserID:e.session.user&&e.session.user.id||null}}))(N);i.d(n,"b",(function(){return _})),i.d(n,"a",(function(){return B})),i.d(n,"f",(function(){return F})),i.d(n,"h",(function(){return E})),i.d(n,"g",(function(){return L})),i.d(n,"e",(function(){return D})),i.d(n,"d",(function(){return I})),i.d(n,"c",(function(){return T})),function(e){e.Cheer="CHEER",e.Subscription="SUBSCRIPTION",e.SubGift="SUBGIFT"}(_||(_={}));var B={startDateDynamicSetting:"megacommerce_2019_start_date",endDateDynamicSetting:"megacommerce_2019_end_date",eventDomain:"megacommerce_2019",eventTestDomain:"megacommerce_2019-test",intro:C,tier1ImageUrl:p.h+"/mega-commerce/MegaCheer-01.png",tier2ImageUrl:p.h+"/mega-commerce/MegaCheer-02.png",tier3ImageUrl:p.h+"/mega-commerce/MegaCheer-03.png",tier4ImageUrl:p.h+"/mega-commerce/MegaCheer-04.png",helpLinkDynamicSetting:"megacommerce_2019_help_link"};function F(e){if(!e)return!1;var n=o.b.get(e.startDateDynamicSetting,"2019-12-03T20:00:00Z");if(Object(a.isAfter)(Object(s.e)(n),Date.now()))return!1;var i=o.b.get(e.endDateDynamicSetting,"2020-01-03T07:00:00Z");return Object(a.isAfter)(Object(s.e)(i),Date.now())}function E(e){var n=o.b.get(e.endDateDynamicSetting,"2020-01-03T07:00:00Z");return Object(s.e)(n)}function L(e,n){return!!n&&(e===n.eventDomain||e===n.eventTestDomain)}function D(e){return o.b.get(e.helpLinkDynamicSetting,"https://help.twitch.tv/s/article/winter-megacheer")}function I(e,n){var i=0;n===r.a.Tier3?i=2:n===r.a.Tier2&&(i=1);var t=1;return e>=20?t=15:e>=10?t=7:e>=5&&(t=5),t+i}function T(e,n){var i=0;n===r.a.Tier3?i=10:n===r.a.Tier2&&(i=5);var t=5;return e>=100?t=500:e>=50?t=250:e>=20?t=100:e>=10?t=50:e>=5&&(t=25),t+i}},WJ1t:function(e,n,i){var t={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"subscriptionProductPromotion"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"SubscriptionPromotion"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"newPrice"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"oldPrice"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"discountType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"discountValue"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"previewPrice"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"subscriptionProductPriceInfo"},directives:[]}]}}]}}],loc:{start:0,end:248}};t.loc.source={body:'#import "twilight/features/subscribe-button/models/subscription-product-price-info.gql"\nfragment subscriptionProductPromotion on SubscriptionPromotion {\nnewPrice\noldPrice\ndiscountType\ndiscountValue\npreviewPrice {\n...subscriptionProductPriceInfo\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};t.definitions=t.definitions.concat(i("35qb").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!a[n]&&(a[n]=!0,!0)}))),e.exports=t},YhA7:function(e,n,i){"use strict";var t=i("mrSG"),a=i("q1tI"),o=i("sUnt"),r=i("hnjF"),s=i("dEDE"),d=function(e){return a.createElement(o.a,{display:r.d.Flex,justifyContent:r.h.End},e.secondaryButton&&a.createElement(o.a,{margin:{right:1}},a.createElement(s.a,Object(t.__assign)({size:s.b.Small},e.secondaryButton))),a.createElement("div",null,a.createElement(s.a,Object(t.__assign)({size:s.b.Small},e.primaryButton))))};d.displayName="CalloutActions",i.d(n,"a",(function(){return d}))},d0xR:function(e,n,i){"use strict";i.r(n);var t,a=i("mrSG"),o=i("q1tI"),r=i("/MKj"),s=i("fvjX"),d=i("cZKs"),u=i("1/iK"),c=i("XDCx"),l=i("kRBY"),m=i("w1PT"),p=i("8EUQ"),f=i("Ws8v"),v=i("X2PJ"),h=i("/7QA"),b=i("ZS2+"),g=i("yR8l"),k=i("3Bft"),S=i("ht6z"),y=i("KriR"),N=i("br9A"),_=i("PL8s"),C=i("uG/k"),B=i("HH5h"),F=i("sUnt"),E=i("hnjF"),L=(i("y2dA"),i("eaNi"));!function(e){e.SubButton="subscribe-button__dropdown",e.BalloonLayerButton="subscribe-button__balloon-layer-btn",e.DefaultButton="subscribe-button__default-btn",e.SubscribeBalloon="subscribe-button__subscribe-balloon"}(t||(t={}));var D=b.a.wrap((function(){return Promise.all([i.e(0),i.e(102)]).then(i.bind(null,"f+qK"))}),"SubscribeBalloon"),I=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.modalLevel="top_page",n.handleSubMenuAction=function(e){new Set([N.a.ClickCheckout,N.a.BuyGiftSub,N.a.BuyMysteryGift,N.a.BuyCustomMysteryGift,N.a.BuyGiftToPaidUpgrade,N.a.BuyPaidUpgrade,N.a.BuyPrimeToPaid,N.a.BuyContinueSub]).has(e.action)&&n.checkAndDisplaySubscriptionCheckout();var i=n.props.data,t=i.user,a=null;t&&t.self&&t.self.cumulativeTenure&&(a=t.self.cumulativeTenure.months);var o=!!(t&&t.self&&t.self.subscriptionBenefit),r=i.requestInfo&&Object(S.a)(i.requestInfo.countryCode);Object(N.c)({action:e.action||"",channelLogin:n.props.channelLogin||"",channelID:t&&t.id||"",checkoutButtonTier:e.checkoutButtonTier,cumulativeTenureMonths:a,hasSubCredit:t&&t.self&&t.self.canPrimeSubscribe,hostChannelID:n.props.data.user&&n.props.data.user.id||"",hostChannelLogin:n.props.channelLogin,isMenuOpen:e.action!==N.a.OpenSubMenu,mysteryGiftCount:e.mysteryGiftCount,sub_location:n.props.subLocation||"squad_page",modal:!o,modalLevel:o?"":n.modalLevel.slice(),showPrimeContent:r,giftRecipient:e.giftRecipient||null}),!e.modalLevel||e.action!==N.a.ClickMoreSubOptions&&e.action!==N.a.ClickBack||(n.modalLevel=e.modalLevel)},n}return Object(a.__extends)(n,e),n.prototype.componentDidMount=function(){this.checkAndDisplaySubscriptionCheckout()},n.prototype.componentDidUpdate=function(e){!this.isUserDataReady(e)&&this.isUserDataReady(this.props)&&this.checkAndDisplaySubscriptionCheckout()},n.prototype.render=function(){var e,n,i,t,a,r,s=null,d=null;if(this.props.data&&this.props.data.user&&this.props.data.user.id&&this.props.data.user.subscriptionProducts&&this.props.data.requestInfo){r=this.props.data.user.displayName||this.props.channelLogin,this.props.data.user.bannerImageURL&&(s=o.createElement(C.a,{src:this.props.data.user.bannerImageURL,alt:Object(h.d)("{channelName}'s banner image",{channelName:r},"SubscribeModal")})),this.props.data.user.profileImageURL&&(d=o.createElement(B.a,{size:80,src:this.props.data.user.profileImageURL,alt:Object(h.d)("{channelName}'s profile image",{channelName:r},"SubscribeModal"),userLogin:this.props.channelLogin}));var u=this.props.data.user,c=u.self,l=u.subscriptionProducts.filter((function(e){return e}));if(0===l.length)return null;t=Object(S.a)(this.props.data.requestInfo.countryCode),a=!(!c||!c.subscriptionBenefit),e=1===l.length,l.some((function(e){return!e.emoteSetID}))&&(e=!0),i="",c&&c.subscriptionBenefit&&(i=c.subscriptionBenefit.purchasedWithPrime?k.a.Prime:c.subscriptionBenefit.tier,this.modalLevel=""),n=l[0].id}else e=!1,n="",i="",t=!1,a=!1,s=o.createElement(_.a,{width:400,height:120}),d=o.createElement(_.a,{width:80,height:80});return o.createElement(o.Fragment,null,o.createElement(F.a,{className:"subscribe-modal__container"},o.createElement(f.a,{overflow:E.i.Hidden,fullWidth:!0,className:"subscribe-modal__banner"},s),o.createElement(f.a,{className:"subscribe-modal__avatar",background:v.a.Alt,position:E.j.Absolute,borderRadius:v.b.Rounded,overflow:E.i.Hidden},d)),o.createElement(F.a,{className:"subscribe-modal__balloon-container"},o.createElement(D,{authToken:this.props.authToken,channelLogin:this.props.channelLogin,handleSubMenuAction:this.handleSubMenuAction,inPrimeRegion:t,isNonStandardSub:e,isStaff:!(!this.props.sessionUser||!this.props.sessionUser.roles)&&this.props.sessionUser.roles.isStaff,isSubscribed:a,userHasPrime:!1,productId:n,subbedTier:i})))},n.prototype.isUserDataReady=function(e){return e.data&&e.data.user&&!e.data.loading&&!e.data.error},n.prototype.checkAndDisplaySubscriptionCheckout=function(){var e=h.n.get(p.a.SUB_CHECKOUT__PRODUCT_KEY,"");if(e){var n=this.props.data.user;if(n&&n.subscriptionProducts)if(this.props.showSubscriptionCheckout&&this.props.showLoginModal)n.subscriptionProducts.filter((function(e){return e})).map((function(e){return e.name})).includes(e)?this.props.sessionUser?this.props.showSubscriptionCheckout({isAnonymous:h.n.get(p.a.SUB_CHECKOUT__GIFTING_ANONYMOUSLY,!1),mysteryGiftCount:Number(h.n.get(p.a.SUB_CHECKOUT__MYSTERY_GIFT_COUNT,"")),productName:e,recipientLogin:h.n.get(p.a.SUB_CHECKOUT__RECIPIENT_KEY,""),trackingContext:{source:y.c.ChannelSubscribeButton}}):(h.n.set("subscription-target-login",this.props.channelLogin),this.props.showLoginModal()):p.a.clearSubscriptionCheckoutKeys()}},n}(o.Component),T=Object(g.a)(L,{options:function(e){return{variables:{login:e.channelLogin}}}})(I);var w=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.handleClose=function(){n.props.closeModal()},n}return Object(a.__extends)(n,e),n.prototype.componentWillUnmount=function(){this.props.onClose&&this.props.onClose()},n.prototype.render=function(){return o.createElement(f.a,{className:"subscribe-modal",background:v.a.Base},o.createElement(T,{authToken:this.props.authToken,sessionUser:this.props.sessionUser,onClose:this.handleClose,channelLogin:this.props.channelLogin,showLoginModal:this.props.showLoginModal,showSubscriptionCheckout:this.props.showSubscriptionCheckout,subLocation:this.props.subLocation}),o.createElement(d.a,{closeOnBackdropClick:!0,closeOnPageNavigation:!0}))},n}(o.Component);var P=Object(r.b)((function(e){return{authToken:Object(l.a)(e),sessionUser:Object(l.e)(e)}}),(function(e){return Object(s.b)({closeModal:c.d,showLoginModal:p.a.showLoginModalWithCheckoutDispatch(u.a.ChannelSubscriptionButton),showSubscriptionCheckout:m.a},e)}))(w);i.d(n,"SubscribeModalContainer",(function(){return w})),i.d(n,"SubscribeModal",(function(){return P})),i.d(n,"SUBSCRIPTION_TARGET_LOGIN",(function(){return"subscription-target-login"})),i.d(n,"TestSelectors",(function(){return t})),i.d(n,"SubscribeModalComponentPresentation",(function(){return I})),i.d(n,"SubscribeModalComponent",(function(){return T}))},dq0Q:function(e,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"subscriptionProductEmote"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Emote"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"setID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]}]}}],loc:{start:0,end:61}};i.loc.source={body:"fragment subscriptionProductEmote on Emote {\nid\nsetID\ntoken\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=i},eaNi:function(e,n){var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"MultiStream_SubscribeModal_User"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bannerImageURL"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"profileImageURL"},arguments:[{kind:"Argument",name:{kind:"Name",value:"width"},value:{kind:"IntValue",value:"300"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"subscriptionProducts"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emoteSetID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"paidUpgradePromotion"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"newPrice"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"canPrimeSubscribe"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"cumulativeTenure"},name:{kind:"Name",value:"subscriptionTenure"},arguments:[{kind:"Argument",name:{kind:"Name",value:"tenureMethod"},value:{kind:"EnumValue",value:"CUMULATIVE"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"months"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"subscriptionBenefit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"purchasedWithPrime"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tier"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"pendingSubscription"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"startsAt"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"gift"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isGift"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"roles"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isStaff"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"requestInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"countryCode"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:498}};i.loc.source={body:"query MultiStream_SubscribeModal_User($login: String!) {\nuser(login: $login) {\nid\ndisplayName\nlogin\nbannerImageURL\nprofileImageURL(width:300)\nsubscriptionProducts {\nid\nemoteSetID\nname\nself {\npaidUpgradePromotion {\nnewPrice\n}\n}\n}\nself {\ncanPrimeSubscribe\ncumulativeTenure: subscriptionTenure(tenureMethod: CUMULATIVE) {\nmonths\n}\nsubscriptionBenefit {\nid\npurchasedWithPrime\ntier\npendingSubscription {\nstartsAt\n}\ngift {\nisGift\n}\n}\n}\n}\ncurrentUser {\nid\nroles {\nisStaff\n}\n}\nrequestInfo {\ncountryCode\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function a(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}i.definitions.forEach((function(e){if(e.name){var n=new Set;!function e(n,i){if("FragmentSpread"===n.kind)i.add(n.name.value);else if("VariableDefinition"===n.kind){var t=n.type;"NamedType"===t.kind&&i.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach((function(n){e(n,i)})),n.variableDefinitions&&n.variableDefinitions.forEach((function(n){e(n,i)})),n.definitions&&n.definitions.forEach((function(n){e(n,i)}))}(e,n),t[e.name.value]=n}})),e.exports=i,e.exports.MultiStream_SubscribeModal_User=function(e,n){var i={kind:e.kind,definitions:[a(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var o=t[n]||new Set,r=new Set,s=new Set;for(o.forEach((function(e){s.add(e)}));s.size>0;){var d=s;s=new Set,d.forEach((function(e){r.has(e)||(r.add(e),(t[e]||new Set).forEach((function(e){s.add(e)})))}))}return r.forEach((function(n){var t=a(e,n);t&&i.definitions.push(t)})),i}(i,"MultiStream_SubscribeModal_User")},"h3/L":function(e,n,i){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"SubModal_PrimeOffers"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"countryCode"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"primeOffers"},arguments:[{kind:"Argument",name:{kind:"Name",value:"countryCode"},value:{kind:"Variable",name:{kind:"Name",value:"countryCode"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"primeOfferFragment"},directives:[]}]}}]}}],loc:{start:0,end:190}};t.loc.source={body:'#import "twilight/features/sub-modal/fragments/prime-offer-fragment.gql"\nquery SubModal_PrimeOffers($countryCode: String) {\nprimeOffers(countryCode: $countryCode) {\n...primeOfferFragment\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};t.definitions=t.definitions.concat(i("pGv1").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!a[n]&&(a[n]=!0,!0)})));var o={};function r(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}t.definitions.forEach((function(e){if(e.name){var n=new Set;!function e(n,i){if("FragmentSpread"===n.kind)i.add(n.name.value);else if("VariableDefinition"===n.kind){var t=n.type;"NamedType"===t.kind&&i.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach((function(n){e(n,i)})),n.variableDefinitions&&n.variableDefinitions.forEach((function(n){e(n,i)})),n.definitions&&n.definitions.forEach((function(n){e(n,i)}))}(e,n),o[e.name.value]=n}})),e.exports=t,e.exports.SubModal_PrimeOffers=function(e,n){var i={kind:e.kind,definitions:[r(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var t=o[n]||new Set,a=new Set,s=new Set;for(t.forEach((function(e){s.add(e)}));s.size>0;){var d=s;s=new Set,d.forEach((function(e){a.has(e)||(a.add(e),(o[e]||new Set).forEach((function(e){s.add(e)})))}))}return a.forEach((function(n){var t=r(e,n);t&&i.definitions.push(t)})),i}(t,"SubModal_PrimeOffers")},ht6z:function(e,n,i){"use strict";i.d(n,"a",(function(){return a}));var t=i("/7QA");function a(e){var n=t.b.get("prime_blocked_regions",[]);return!!e&&!n.includes(e.toUpperCase())}},m66z:function(e,n,i){},nO9i:function(e,n,i){},pGv1:function(e,n){var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"primeOfferFragment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PrimeOffer"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"imageURL"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"priority"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"categories"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:95}};i.loc.source={body:"fragment primeOfferFragment on PrimeOffer {\nid\ntitle\nimageURL\npriority\ncontent {\ncategories\n}\n}",name:"GraphQL request",locationOffset:{line:1,column:1}};e.exports=i},y2dA:function(e,n,i){},"z+dA":function(e,n,i){var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ChannelPage_SubscribeButton_User"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"displayName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subscriptionProducts"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"emoteSetID"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"promotion"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"previewPrice"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"promotion"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"previewPrice"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"self"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"canPrimeSubscribe"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"cumulativeTenure"},name:{kind:"Name",value:"subscriptionTenure"},arguments:[{kind:"Argument",name:{kind:"Name",value:"tenureMethod"},value:{kind:"EnumValue",value:"CUMULATIVE"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"tenure"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"subscriptionBenefit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"purchasedWithPrime"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"tier"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endsAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isDNRd"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"platform"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"pendingSubscription"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"pendingSubscription"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"gift"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isGift"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"currentUser"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"hasPrime"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"requestInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"countryCode"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:702}};t.loc.source={body:'#import "twilight/pages/subscriptions-management/models/cumulative-tenure-fragment.gql"\n#import "twilight/features/subscribe-button/components/subscribe-button/pending_subscription.gql"\nquery ChannelPage_SubscribeButton_User($login: String!) {\nuser(login: $login) {\nid\ndisplayName\nsubscriptionProducts {\nid\nemoteSetID\nname\npromotion {\npreviewPrice {\nid\n}\n}\nself {\npromotion {\npreviewPrice {\nid\n}\n}\n}\n}\nself {\ncanPrimeSubscribe\ncumulativeTenure: subscriptionTenure(tenureMethod: CUMULATIVE) {\n...tenure\n}\nsubscriptionBenefit {\nid\npurchasedWithPrime\ntier\nendsAt\nisDNRd\nplatform\npendingSubscription {\n...pendingSubscription\n}\ngift {\nisGift\n}\n}\n}\n}\ncurrentUser {\nid\nhasPrime\n}\nrequestInfo {\ncountryCode\n}\n}',name:"GraphQL request",locationOffset:{line:1,column:1}};var a={};function o(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!a[n]&&(a[n]=!0,!0)}))}t.definitions=t.definitions.concat(o(i("HiyX").definitions)),t.definitions=t.definitions.concat(o(i("QHJn").definitions));var r={};function s(e,n){for(var i=0;i<e.definitions.length;i++){var t=e.definitions[i];if(t.name&&t.name.value==n)return t}}t.definitions.forEach((function(e){if(e.name){var n=new Set;!function e(n,i){if("FragmentSpread"===n.kind)i.add(n.name.value);else if("VariableDefinition"===n.kind){var t=n.type;"NamedType"===t.kind&&i.add(t.name.value)}n.selectionSet&&n.selectionSet.selections.forEach((function(n){e(n,i)})),n.variableDefinitions&&n.variableDefinitions.forEach((function(n){e(n,i)})),n.definitions&&n.definitions.forEach((function(n){e(n,i)}))}(e,n),r[e.name.value]=n}})),e.exports=t,e.exports.ChannelPage_SubscribeButton_User=function(e,n){var i={kind:e.kind,definitions:[s(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var t=r[n]||new Set,a=new Set,o=new Set;for(t.forEach((function(e){o.add(e)}));o.size>0;){var d=o;o=new Set,d.forEach((function(e){a.has(e)||(a.add(e),(r[e]||new Set).forEach((function(e){o.add(e)})))}))}return a.forEach((function(n){var t=s(e,n);t&&i.definitions.push(t)})),i}(t,"ChannelPage_SubscribeButton_User")}}]);